The IEEE 802.11 wireless media standard supports multiple frequency channels as well as multiple data rates at the physical (PHY) layer.
Moreover, various auto rate adaptation mechanisms at the medium access layer have been proposed to exploit the multi-rate capabilities of IEEE 802.11.
In this paper we introduce Multi-channel Opportunistic Auto Rate (MOAR), an enhanced MAC protocol for multi-channel and multi-rate IEEE 802.11 enabled wireless ad hoc networks to opportunistically exploit the presence of frequency diversity (in the form of multiple frequency channels).
The key mechanism of MOAR is that if the signal to noise ratio on the current channel is not favorable, mobile nodes can op-portunistically skip to better quality frequency channels enabling data transmission at a higher rate.
As channel separation for IEEE 802.11 is greater than the coherence bandwidth, different channels experience independent fading and hence there is a high probability that the skipping nodes will find better channel conditions on one of the other frequency channels.
Consequently MOAR nodes exploit the presence of frequency domain diversity in a distributed manner to transmit packets at a higher rate (on higher quality channels) resulting in an enhanced net system throughput for MOAR.
In theory, nodes can skip indefinitely in search of a better channel until the highest possible transmission rate is found, yet, as channel state information is not available a priori, each skip decision incurs an additional overhead due to channel measurement.
Thus, in order to maximize the gain in throughput it is critical to balance the tradeoff between additional throughput gain via channel skipping and the time and resource costs of channel measurement and skipping.
Consequently, we devise an optimal skipping rule for MOAR which maps the channel conditions at the PHY layer to a MAC rule which allows nodes to limit the number of times they skip in search of a better channel.
Finally, we perform an extensive set of ns-2 simulations to evaluate the performance of MOAR and the impact of such factors as location distribution, channel conditions and error in channel measurements on the throughput gains offered by MOAR.
The transmitted signal in a wireless network usually reaches the receiver via multiple propagation paths.
These paths change with time due to reflectors in the environment and/or mobility.
The changing strength of each path and the changing interference between these paths induces channel fading which is a fundamental trait of the wireless channel.
Traditionally, channel fading has been viewed as a source of unreliability which has to be mitigated.
However recent advances in wireless communications theory suggests an alternate view.
Channel fluctuations can be exploited by transmitting information opportunistically when and where the channel is strong [4,22,24,30,39].
Nearly all the literature on opportunistic wireless communication has focused on exploiting multi-user diversity which has its roots in the work of Knopp and Humblet [20].
When many users are present, different users will experience peaks in their channels quality at different times.
This effect is called multi-user diversity and can be exploited by scheduling transmissions when a user has favorable channel conditions.
However, the presence of multiple frequency channels in such systems as IEEE 802.11 wireless networks is a source of a different form of diversity which too can be exploited opportunistically to enhance the throughput of wireless networks.
In particular, if the channel conditions on the current frequency channel are not favorable, mobile nodes can skip to a better quality frequency channel enabling data transmission at a higher rate.
In this way it is possible to increase the throughput of wireless networks by skipping frequency channels opportunistically.
There is little previous work on opportunistically exploiting frequency diversity to enhance the throughput of wireless networks (we discuss the related work in more detail in Section 3).
Moreover, for a wireless ad hoc network with no central controlling entity, realizing the throughput gains available via opportunistic skipping of frequency channels introduces design challenges not incurred in centralized cellular systems.The contribution of this paper is the design and evaluation of an efficient opportunistic channel skipping protocol for wireless ad hoc networks which coordinates the channel skip decision among the mobile nodes in a decentralized manner.
In particular, we develop Multi-channel Opportunistic Auto Rate (MOAR), an enhanced MAC protocol for multi-channel and multi-rate IEEE 802.11 enabled wireless ad hoc networks.
The key idea of MOAR is to exploit the variable nature of the wireless channel in a distributed way via opportunistically skipping frequency channels in search of a better quality channel.
When measurements indicate low channel quality on the current frequency channel, MOAR allows the receiver and transmitter to negotiate a decision to skip frequencies in search of a better quality channel.
Since different IEEE 802.11 frequency channels are spaced at a distance greater than the coherence bandwidth, the conditions on different channels are independent and hence there is a high probability that the skipping node will find better channel conditions on one of the other frequency channels.
Consequently MOAR nodes exploit frequency domain diversity in a distributed manner to transmit packets at a higher rate (on higher quality channels) resulting in an enhanced net system throughput for MOAR.
Moreover, MOAR is compatible with the state-of-art rate adaptation protocols (e.g., Auto Rate Fallback [18], Receiver Based Auto Rate [14], and Opportunistic Auto Rate (OAR) [32]) and hence is able to fully exploit the diversity present at the physical (PHY) layer in frequency domain (across multiple frequency channels) and in time domain (across users).
In theory nodes can skip indefinitely in search of a better channel until the frequency channel with the highest possible transmission rate is found.
However, in realistic systems where channel state information is not available a priori, each skip decision incurs an additional overhead due to channel measurement.
As a result the throughput gains available via opportunistic channel skipping can diminish with each skip.
Moreover, when the average channel conditions are poor, the probability of finding the highest quality channel (and the highest possible data rate) is very low.
Thus, in order to maximize the gain in throughput it is critical to balance the tradeoff between additional throughput gain via channel skipping and the time and resource costs of channel measurement and skipping.
Consequently, we devise an optimal skipping rule for MOAR to limit the number of times a node skips in search of a better channel.
In particular, the optimal skipping rule for MOAR maps the channel conditions at the PHY layer to a MAC rule which allows nodes to limit the number of times they skip in search of a better channel.Finally, we explore the performance of MOAR via extensive ns-2 simulations and also study the various factors impacting the performance of MOAR.
Our experiments show that MOAR outperforms state-of-art multi-rate protocols by 20% to 25%.
The remainder of this paper is organized as follows.
First in Section 2 we describe the wireless channel model and review the multi-rate and multi-channel capabilities of the IEEE 802.11 standards.
Next, in Section 3 we discuss the related work on exploiting multi-rate and multi-channel capabilities of the IEEE 802.11 and also related work on exploiting frequency diversity in wireless networks.
We present the Multi-channel Opportunistic Auto Rate (MOAR) protocol in Section 4 and also discuss the various challenges encountered while designing an efficient channel skipping protocol within the IEEE 802.11 channel access framework.
In Section 5 we devise the optimal skipping rule for MOAR and discuss issues relating to implementation of the optimal skipping rule in practical systems in Section 6.
The results of simulation experiments are presented in Section 7.
Finally, we summarize in Section 8.
The transmitted radio frequency signal is reflected by both natural and man-made objects.
Based on the relative phases of different reflections at the receiver, the different copies of the same signal may add coherently (which can result in large received signal power) or tend to cancel out (which can lead to zero received signal power).
Thus, the signal at the receiver is a superposition of different reflections of the same signal, received with varying delays and attenuations as shown in Figure 1.
This phenomena of interference between two or more versions of the transmitted signal is called multipath fading.Typically, physical layer algorithms (error correcting codes, channel modulation, demodulation and decoding) use detailed propagation models that characterize all the reflections and their timevariations [28,31].
The performance of any physical layer implementation is well captured by observing its packet loss rate as a function of the received signal-to-noise-ratio (SNR).
Received SNR measures the extent of the received signal power over the channel background noise.
Generally, the larger the SNR, the better the chance of any packet being received error free.
Actual performance (packet loss rate as a function of SNR) is dependent on a particular implementation.
1 Recognizing that the received SNR can be used to capture the packet level performance of any physical layer implementation, we model the received SNR, at packet transmission time ¡ as¢ £ ¤ ¥ ¡ ¦ § ¨ © ¥ ¦ ¥ ¡ ¦ (1)where is the variance of the background noise, ¥ ¡ ¦ is the average channel gain for the packet at time ¡ and¨© and¨ and¨© ¥ ¦ denotes the received power when the distance between the sender and the receiver is and is given by¨© is typically modeled by a probability distribution and its rate of change [31].
A commonly used distribution for ¥ ¦ is the Ricean distribution,by¨ by¨© ¥ ¦ § ¨ © ¥ ¦ !
(2)# ¥ ¦ § $ % & ' ( ) ( 0 1 2 3 4 ¥ 5 6 ¦ (3)where 6 is the distribution parameter representing the strength of the line of the sight component of the received signal and 3 4 ¥ ¦ is the modified Bessel function of the first kind and zero-order [31].
The Ricean distribution models the case where there is a dominant stationary (nonfading) signal component present (such as the lineof-sight component) and the random multipath components are superimposed on the stationary dominant signal.
For6 § 7, the Ricean distribution reduces to the Rayleigh distribution, in which there is no-line-of-sight component.The phenomenon of multipath on a mobile radio channel is characterized by two parameters, the Doppler shift which is related to time selectivity and the multipath delay spread, which is related to frequency selectivity.
Next we discuss these two parameters in detail and also describe how we model the effects of these two parameters.
8 For example, we have found in controlled laboratory tests with hardware-emulated channel conditions, that 802.11b compliant cards from different manufacturers perform differently under identical channel conditions.
The rate of change of ¥ ¡ ¦ depends on a mobile host's relative speed with respect to its surroundings.
Among the several models available in the literature we use the Clarke and Gans model [31].
2 The motion of nodes causes a Doppler shift in the frequency of the received signal, and the extent of the Doppler shift depends on the relative velocity of the sender and the receiver.
Let ¡ denote the maximum Doppler frequency during communication between two nodes.
Then according to the Clarke-Gans model, the received signal is modulated in the frequency domain by the following spectrum Coherence interval is a statistical measure of the time duration over which the channel impulse response is essentially invariant.
In essence, the channel SNR values separated by more than , are approximately independent.
The observation that at moderate velocities typical values of the coherence interval is of the order of multiple packet transmission times motivated the design of Opportunistic Auto Rate (OAR) protocol.
¢ ¥ ¦ § ¢ £ ¤ ¡ ¥ ¢ ¦ § ¨ % ¨ © ¨(4) Doppler spread and coherence interval are parameters which describe the time varying nature of the channel caused by the motion of the mobile node and of the objects surrounding it.
However they do not describe the time dispersive nature of the channel due to multipath propagation delays.
Due to reflection off surrounding objects, the various multipath components arrive at the receiver displaced with respect to each other in time and amplitude.
This time dispersion of the channel is called multipath delay spread.
A common measure of multipath delay spread is the root mean square (rms) delay spread.
Typical values of the rms delay spread are on the order of microseconds in outdoor mobile radio channels and on the order of nanoseconds in indoor radio channels [31].
In particular, measurement studies [17,12,38,34] have shown that for the IEEE 802.11b standard rms delay spread for an indoor environment ranges from 10-35 ns.A dual representation of multipath delay spread in frequency domain is given by the coherence bandwidth,.
Coherence bandwidth can be defined as a statistical measure over the range of freAlso see [31] for a survey.
quencies over which the channel passes all spectral components with approximately equal gain and linear phase [31].
In other words coherence bandwidth is the range of frequencies over which two frequency components have a strong potential for amplitude correlation and thus two sinusoids with frequency separation greater than are affected quite differently by the channel.
The rms delay spread and coherence bandwidth are inversely proportional to one another.
Assuming frequency correlation between amplitudes of frequency components being above .9, the coherence bandwidth can be approximated by [31] ¢¤ 7 (5)where represents the rms delay spread.
Using the values of rms delay spread from measurement studies [17,12,38,34], typical value of coherence bandwidth for IEEE 802.11 standards can be computed to be in the range 1-3 MHz in an indoor environment.
In this section we review the multi-rate and multi-channel properties of the IEEE 802.11 standard [15,27].
Table 1 summarizes the multi-rate and multi-channel features of IEEE 802.11a and IEEE 802.11b standards.
The IEEE 802.11a and IEEE 802.11b protocols are multi-rate in that they provide physical-layer mechanisms to transmit at higher rates than the base rate if channel conditions so permit.
In practice, depending on the line-of-sight factor 6 in Equation (3) and the distance between the transmitter and the receiver in Equation (1), the channel rates can vary within the entire range of the lowest to highest possible data rate.
5 Besides multi-rate capabilities, the IEEE 802.11 standard also provides for multiple frequency channels as summarized in Table 1.
In case of IEEE 802.11b the allocated spectrum in the 2.4 GHz band is from 2400 MHz to 2483 MHz.
For North America, there are 11 channels starting at 2412 MHz and spaced at an interval of 5 MHz each [15,27].
Each channel has an approximate bandwidth of 22 MHz and channels 1, 6 and 11 (which are 25 MHz apart) are completely orthogonal.
Similarly, in case of IEEE 802.11a there are a total of 12 physical layer channels with 8 completely orthogonal channels.
In this section we discuss related work on multi-rate and multichannel IEEE 802.11 and also discuss the related work on exploiting diversity for higher throughput.
We divide the related work into three categories.
Few rate-adaptation techniques have been designed for multi-rate wireless ad hoc networks.
The first commercial implementation that exploits the multi-rate capability of IEEE 802.11 networks is termed Auto Rate Fallback (ARF) [18].
Another protocol to exploit the multi-rate capabilities of IEEE 802.11 termed Receiver Based Auto Rate (RBAR) was proposed in [14].
The key idea of RBAR is for receivers to control the sender's transmission rate.
In IEEE 802.11, all RTS/CTS messages must be sent at the base rate to ensure that all stations are able to receive these messages error free.
RBAR uses physical-layer analysis of the received RTS message to determine the maximum possible transmission rate for a particular bit error rate.
The receiver inserts this rate into a special field of the CTS message to inform the sender and other overhearing nodes of the potentially modified rate.
Overhearing nodes modify their NAV values to the new potentially decreased transmission time.
In this way, RBAR quickly adapts to channel variations and extracts significant throughput gains.
Opportunistic Auto Rate (OAR) exploits channel variability to increase the throughput of IEEE 802.11 ad hoc networks.
In particular, OAR exploits the fact that at moderate velocities, channel coherence time is on the order of multiple packet times, such that when the channel quality is high, throughput improvement can be obtained by opportunistically sending multiple back-to-back packets at a higher rate.
OAR obtains a throughput gain as compared to RBAR and ARF and also ensures time-share fairness to ensure that users with perpetually bad channels obtain their fair share of time accessing the channel.
MAC protocol designs that exploit multiple physical layer frequency channels have received significant attention in the recent literature [9,13,16,25,26,33,40].
For example, the protocols in [13,25] divide a common channel into multiple sub channels (two in [13], one data and one control) to decrease contention in CSMA type networks and increase throughput.
These protocols require each station to monitor all sub channels at all times which requires more than one transceiver per node.
Hop-Reservation Multiple Access (HRMA) protocol [40] is a multi-channel protocol for slow frequency hop ad hoc networks where all stations hop according to a predefined hopping pattern and exchange RTS/CTS.
After a successful exchange of RTS/CTS, the transmitter-receiver remain in a hop for further data exchange while other nodes keep hopping according to the predefined hop pattern.
The MAC protocol in [33] provides a means to load balance users among the three orthogonal channels in IEEE 802.11b enabled wireless ad hoc networks.All of the above approaches exploit multiple frequency channels to reduce contention or to increase throughput by ensuring that multiple communication can take place in the same region simultaneously, each in a different non-interfering channel.
Although these approaches result in significant performance gains especially in a targeted scenario of ad hoc networks, they do not address opportunistic scheduling gains available from a multi-rate medium access protocol and do not exploit the unique properties of multiple frequency channels (namely independent fading) to enhance the throughput of ad hoc networks.
Our objective is to isolate the throughput gains available from opportunistically skipping channels in search of better quality channels and address the various MAC mechanisms needed to capture this potential gain in ad hoc networks.
Likewise, while [24] does address multi-channel opportunistic scheduling, it focuses on a cellular time slotted system with perfect channel information and is not applicable to distributed systems such as ad hoc networks.
The existence of multiple channels is a source of diversity which can be exploited to enhance the throughput of wireless ad hoc networks.
The concept of enhancing throughput by exploiting diversity (be it multi-channel, spatial or multi-user diversity) has been well studied in the wireless communications literature.
One such formulation is known as the problem of parallel Gaussian channels [7,37], where multiple simultaneous and orthogonal channels are available to the transmitter, and the transmitter appropriately allocates its power and/or time resources.
Also, there is a growing literature on opportunistic and multi-rate scheduling, e.g., [2,4,22,23].
Such schemes exploit channel variations to select high-qualitychannel users and provably optimize system throughput while also satisfying user fairness constraints.
However, the above cited work assumes that the channel quality of each of the users is known a priori, which allows the transmitter to choose the user and/or the channel optimally.
Moreover, such results address scheduling in centralized time-slotted systems more applicable to cellular networks and do not address the distributed MAC protocols required to extract the available performance gains.Multi-user diversity has also been studied within the context of wireless ad hoc networks in [11] where the authors exploit mobility to increase the capacity of delay-insensitive wireless ad hoc networks.
In [30] the authors jointly address both physical layer and medium access control issues to exploit multiuser diversity gains in a distributed fashion in CSMA networks.
However, none of the above cited work exploits the presence of multiple frequency channels within the IEEE 802.11 protocol to enhance the throughput of wireless ad hoc networks.In the next section, we describe the challenges involved in designing a realistic distributed MAC protocol which seeks to achieve significant throughput gains by skipping channels in search of higherquality channels and present a detailed description of the Multichannel Opportunistic Auto Rate (MOAR) protocol.
OAR can be characterized as opportunistic across users, exploiting periods of high quality channel to achieve a significant throughput gain.
However, OAR does not exploit the presence of diversity in frequency domain (in the form of multiple channels).
In particular, short time-scale channel variations for different IEEE 802.11 channels have a low degree of correlation among themselves.
Fig- ure 2 depicts a typical sample path of the received SNR for two channels between the same two devices (at a fixed distance).
6 The figure also shows two horizontal lines which indicate the threshold SNR for receiving at 2 Mb/sec and 5.5 Mb/sec.
The key point is that the two channels have a strong independent component despite being from the same pair of devices.
This is due to the fact that the channel separation in the frequency domain is much larger than the coherence bandwidth 7 .
Thus, while different channels may have the same average conditions, measurement studies [31] and the example in the figure indicate that SNRs on different channels can be quite different at the same time such that there are significant potential throughput gains to be obtained by selection of a better quality channel.
Here we devise Multi-channel Opportunistic Auto Rate (MOAR), a distributed MAC protocol to exploit the frequency diversity among different IEEE 802.11 frequency channels.
The fundamental idea is that both the transmitter and the receiver of a flow opportunistically skip channels in search of a better quality channel, if the current channel is of low quality.
Ideally, channel qualities on all the frequency channels would be known so that nodes could simply skip to the best channel to transmit on at all times.
However for realistic systems, design of an efficient channel skipping protocol introduces the following challenges:Measuring channel conditions before and after each skip.
channels are not known a priori.
Moreover, since channel conditions are continually changing, past channel measurements (beyond several packet transmission times, i.e., coherence time interval) are not a useful predictor of current channel conditions.
Hence, there is a need to introduce a mechanism to measure the current conditions on the present channel before making the decision whether to skip to another channel or not.Coordinating a channel skip decision between the transmitter and the receiver.
Prior to skipping, the transmitter and the receiver of a flow need to mutually decide the frequency channel to skip to.
Since a wireless ad hoc network does not have a central entity to coordinate skip decisions, there is a need for a distributed mechanism to coordinate the skip decision between the transmitter and the receiver.Maintaining carrier sense for all overhearing nodes.
A potential problem with channel skipping in wireless ad hoc networks is the need to maintain carrier sense for all overhearing nodes to avoid the hidden terminal problem [3].
This involves making sure that all overhearing nodes are able to correctly set their defer timers so as to allow the transmitterreceiver pair sufficient time to skip to better quality channels.
Potentially, a transmitter-receiver pair can continue skipping multiple times in search of the highest quality channel.
However, due to the overhead of channel measurement and estimation incurred at every skip, throughput gains of sending data on a better quality frequency channel are diminishing with each skip.
Moreover, when the average channel conditions are poor, the probability of finding the highest quality channel is very low.
Therefore it is important to balance the tradeoff between throughput gain and the time and resource cost of opportunistic channel skipping.
In particular, there is a need to devise a mechanism to optimally limit the number of times a transmitter-receiver pair skip in search of a better quality channel.Next we present a detailed description of the MOAR protocol and also describe how we overcome the first three challenges mentioned above.
In Section 5 we devise an optimal skipping rule for MOAR and show how a MOAR node can limit the number of times it skips in search of better quality channels to optimally balance the tradeoff between the throughput gain available via opportunistic skipping and the overhead of channel skipping/measurement.
In this section we describe how MOAR employs a channel skipping technique within the IEEE 802.11 8 framework.All nodes initially reside on a single common frequency channel, known as the home channel.
DATA transmission is preceded by the sender transmitting an RTS packet to the receiver on the home channel.
On reception of the RTS frame, the receiver makes the decision to skip by comparing the measured SNR 9 to a channel skip threshold.
If the measured SNR is low, the sender and the receiver skip to a new channel in search of a better quality channel, whereas if the measured SNR is high, data is transferred on the current frequency channel as in the OAR protocol, in which nodes transfer a multiple number of packets in proportion to their channel quality.
By making opportunistic channel skipping compatible with OAR, we seek to fully exploit the diversity present at the PHY layer in frequency and time domain.On making the decision to skip, the receiver selects a channel to skip to and piggy-backs this channel on the CTS packet.
After transmitting the CTS frame, the receiver immediately skips to the new frequency channel and waits for another RTS from the receiver for a time equal to the CTS timeout value as mandated by the IEEE 802.11 standard [15].
Since we assume that in a realistic setting channel conditions on other frequency channels are unknown, the channel to which the receiver decides to skip is selected randomly among the available frequency channels.
Yet, if information regarding channel conditions or interference on some other frequency channel is known (e.g, in a wireless LAN scenario where the Access Point (AP) may have information regarding interference on other frequency channels), the receiver can take that into account to make a better decision about which channel to skip to.
However, for the purpose of this discussion we do not require the existence of such information.If after skipping to a new frequency channel the receiver does not receive another RTS from the sender within a CTS timeout period, the receiver node switches back to the home channel and starts contending for channel access as mandated by the IEEE 802.11 standard.Once the sender receives confirmation of the choice of frequency channel to skip to from the receiver (via a CTS frame), it immediately skips to that channel.
Note that the time elapsed for switching channels is 1 ¡ [9] and of negligible overhead.
After skipping to the selected channel, the transmitter and receiver renegotiate the data rate via another RTS/CTS exchange which also serves the dual purpose of measuring the channel conditions on the new frequency channel.
Note that the transmission time of an RTS/CTS exchange represents approximately 5% of the DATA/ACK transmission time for a 1000 byte data packet at the base rate.
10 As ¢ Although our discussion of MOAR is within the context of the RTS/CTS mechanism within the DCF mode of IEEE 802.11 standard, the concepts are equally applicable to other RTS/CTS based protocols such as SRMA [36], MACAW [3] and FAMA [10].
£ A reasonably accurate estimate of the received SNR can be made from physical-layer analysis of PHY layer preamble to each packet.
8 4 Recall that for the OAR protocol nodes transmit multiple back-toback data packets at higher data rates so that the net DATA/ACK transmission above the base rate represents a 5.5-fold maximum increase for IEEE 802.11b and 27-fold maximum increase for IEEE 802.11a, significant throughput gains are available to MOAR even after accounting for the overhead of channel skipping and additional RTS/CTS messages.
In case channel quality on the new frequency channel is measured to be below the skip threshold, the sender-receiver pair can choose to skip again in search of a better quality channel.Since RTS/CTS exchange prior to any channel skip is done at the base rate on the home channel, all nodes within radio range of the receiver and the transmitter can also decode these packets.
However, some nodes (including nodes within radio range of the sender but outside the radio range of the receiver) may be unable to hear the CTS packet and are unable to detect whether a decision to skip frequency channels was made or not.
Moreover, even though nodes within radio range of the receiver can correctly decode a CTS packet and infer that a decision to skip has been made, they are unable to set a correct defer time since it is not known a priori how many times the sender-receiver pair may skip in search of a better quality channel.
This can lead to problems similar to the hidden terminal problem [3].
To solve the problem mentioned above, all MOAR nodes upon reception of an RTS/CTS packet defer (via the Network Allocation vector, NAV) for a fixed amount of time corresponding to a maximum time, as a temporary reservation, to denote the fact that the reservation is not an actual reservation but represents a maximal amount of reservation time.
A temporary reservation serves to inform the neighboring nodes that a reservation has been requested but the duration of the reservation is not known.
Any node that receives the temporary reservation is required to treat it the same as an actual reservation with regard to later transmission requests; that is if a node overhears a temporary reservation it must update its NAV so that any later requests it receives that would conflict with the temporary reservation must be denied.
Thus the temporary reservation serves as a placeholder until either a new reservation is received or is canceled.
If the sender-receiver pair decide not to skip channels then they can proceed with the DATA/ACK exchange on the home channel as dictated by OAR in which case other nodes can replace the temporary reservation with the exact reservation, as carried in the DATA/ACK packets.Once the transmitter and the receiver conclude the DATA/ACK transmission by skipping to one or more frequency channels, they return to the home channel.
The final DATA/ACK transmission (recall that the sender/receiver send multiple back-to-back packets as required by the OAR protocol) by the sender and receiver is done on transmission time for multiple packets transmitted at a higher data rate is the same as the transmission time for a single DATA/ACK exchange at the base rate.
the home channel so that all nodes within range of either the sender and/or the receiver can correctly infer the end of channel skipping and cancel the temporary reservation timer.
In case a node is unable to hear either the updated reservation or the DATA/ACK transmission signalling the end of the temporary reservation, it would be able to contend for the channel again after the temporary reservation has expired.In the next section we devise an optimal skipping rule for MOAR to limit the number of times a MOAR node skips in search of better quality channels.
The problem of deciding the optimal number of times a MOAR node should skip in search of a better quality frequency channel can be formulated as an optimal stopping time problem.
The theory of optimal stopping time is concerned with the problem of choosing the time to take a given action based on sequentially observed random variables in order to maximize an expected payoff or to minimize an expected cost [6,8].
Stopping rule problems are defined by two objects, a sequence of random variables,8 £ £ £, whose distribution is assumed known, and a sequence of real-valued reward functions,¡ 8 ¥ ¢ 8 ¦ ¡ ¥ ¢ 8 ¢ ¦ £ £ £ £ ¡ £ ¥ ¢ 8 ¢ £ £ £ ¦ .
Given these two objects, associated stopping rule problem may be described as follows [6].
.
It is shown in [6] that an optimal stopping rule exists if the following two conditions are satisfiedCONDITION 1.
! "
¥ ¥ # $ ¦ .
CONDITION 2.
% & ! "
¥ ' £ ¥ ( £ ) £ ¡ £In this case (for the class of finite horizon problems) the optimal rule is given by the principle of optimality [6] as£ 0 § & 1 ¤ 2 ¢ 3 ¥ 2 0(9)where 0 denotes the expected return from an optimal stopping rule.
The problem of deciding the optimal number of times to skip for MOAR can be formulated as an optimal stopping time problem as follows.
Let ¥ denote the expected payoff of transmitting after skipping The following theorem (proof in [8] it is immaterial what we do, but let us say we stop.
This argument can be made at any stage, so the optimal stopping rule is as given by Equation (9) is the distribution of received SNR (given by Equation (3) is equal to 2 Mb/sec.
The distribution of the payoff is a function of the distribution of the achievable data rates as given by Equation (17), which in turn is a function of the channel conditions as given by SNR (Equation (1)).
Thus under the assumption that the distribution of the channel fading is known, the distribution of payoff is known too.Note from Equation (18) that has finite first and second moments (for a finite sized data packet).
Thus it follows from Theorem 1 that an optimal stopping rule exists and is given by Equation (9).
From Equation (11) Note that the as given by Equation (22) is a function of the constant 4 (the cost of channel measurement via RTS/CTS) and the distribution of the payoff .
Thus, under the assumption that the distribution of channel fading is known, the value of given by Equation (22) is also known.The value of as given by Equation (22) which is then compared to the boundary conditions for this case to determine whether it indeed is the valid optimal value 0 .
Thus, given the distribution of achievable data rates, one or more of the values as given by Cases 1-4 will yield a valid value of the expected return from an optimal stopping rule 0 (which meets the requirements of the boundary conditions for that case too).
Since we are maximizing the expected return from an optimal stopping rule, the maximum value from the set of valid 0 is selected as the expected return from an optimal stopping rule.
The optimal stopping rule is then given by Equation (9).
In particular, since the payoff for a particular transmission data rate ¤ is given by Equation (15), we can extrapolate the expected return from an optimal stopping rule, For IEEE 802.11 based wireless networks, the set of feasible data rates is a finite sized set and it is not possible to select an arbitrary data rate.
For example, in case of IEEE 802.11b standard the set of feasible data rates consists of 2, 5.5 and 11 Mb/sec and any other value of data rate (say 7.5 Mb/sec) is not feasible.
Typically achievable data rates is a function of received SNR as given in Equation (16).
Approximating that the achievable data rates and received SNR (in dB) are linearly related, given Here we illustrate the application of the optimal skipping rule via a numerical example.
Assume, that the channel conditions are such that the probability of data transmission at rate 11 Mb/s, 5.5 Mb/s and 2 Mb/s is given by 0, .5 and .5 respectively.
Thus in Equation (18) In the next section we discuss how the optimal skipping rule for MOAR can be implemented in practical wireless networks.
The optimal stopping rule for MOAR which maximizes the expected payoff achievable via opportunistically skipping channels in search of a better quality channel is derived in Section 5.
Equations (22), (24) and (26) , and the distribution of the achievable data rates which in turn is a function of channel fading.
Thus, for a MOAR node to be able to infer the optimal stopping time in practical systems it is necessary that the node has knowledge of 4 and the distribution of achievable data rates and given these two parameters, the optimal stopping rule is given by Equation (9).
The cost of channel measurement via RTS/CTS, 4 , is a constant and for a fixed RTS/CTS packet size can be computed as in Equa- tion (12).
The other parameter required to implement the optimal skipping rule in practical systems is the distribution of achievable data rates.
In particular, a MOAR node needs # A the probability that the data rate is equal to ¤ .
Alternatively, if the underlying distribution of signal to noise ratio, SNR and its parameters (mean, variance etc) are known, the nodes can compute # A indirectly rather than requiring it to be provided explicitly.
However, in practice, the parameters of the SNR distribution or the distribution itself may not be known a priori.
Moreover, for mobile nodes, the parameters of channel fading distribution (and hence the distribution of data rates) may also change with time as the distance between the sender and the receiver changes.
In such cases, in order to make a skipping decision in accordance with the optimal skipping rule (Section 5.3) a node may need to estimate either the parameters of the underlying distribution of channel fading or the distribution of data rates.In case the underlying distribution of the channel fading is known but the exact parameters of the distribution are unknown, a MOAR node can choose to estimate the unknown parameters.
For example if it is known that the underlying channel fading has the Rayleigh or the Ricean distribution, but the mean and the variance (also the value of parameter 6 for the Ricean distribution) are unknown, a MOAR node can sample the received SNR values during the first several DATA (and accompanying control) packets to estimate the unknown parameters.
The problem of estimating unknown parameters of a known distribution from finite samples of that distribution occurs in a wide array of disciplines.
Various point estimation techniques like the method of moments and maximum likelihood estimation (among others) [5,21] have been proposed and well studied in literature.
In particular, [1] compares the efficiency of different estimation techniques in estimating the unknown parameters for a Rayleigh distribution.
However, estimating the unknown parameters of a Ricean distribution is computationally expensive [35].
Moreover, in certain scenarios the exact distribution of the received SNR may be unknown which makes estimating # A infeasible.
Thus rather than estimating the underlying distribution of the received SNR we choose to directly estimate the distribution of achievable data rates by measuring # A from samples of received SNR.We propose a measurement based approach to estimate online the distribution of the transmission data rates required to make a correct optimal skipping decision.
Each MOAR node transmits the first After enough samples have been collected to estimate the distribution of the transmission rates within certain confidence, the MOAR nodes may start opportunistic channel skipping.
Since the distribution of data rates may change over time, MOAR nodes continuously update the estimated values of # A by using only the last £ 9 ¥ samples of the received SNR.
In this way, MOAR is still able to perform well for scenarios where the channel conditions change (for example, due to mobility) at a time scale greater than the time required to accurately estimate the distribution of data rates.Note that the accuracy of the estimation scheme described above depends on the size of the estimation window, In Section 7.1 we investigate the effect of estimation window size on the throughput performance of MOAR via simulations and suggest a suitable value of the estimation window size for which MOAR is able to extract maximal throughput gains available from opportunistic skipping.
In this section, we use ns-2 simulations to evaluate the performance of MOAR as compared to OAR.
Our methodology is to isolate the impact of each performance factor to the largest extent possible and then consider more complex scenarios to study the joint effects of numerous factors.
We begin with a fully connected topology (where all nodes are within radio range of each other) and study the effects of node location, channel conditions, error in channel measurement and the effect of estimating the distribution of achievable data rates on the performance of MOAR.
We then consider more general topologies consisting of a simple asymmetric topology and more complex random topologies.
Our key performance metric is aggregate throughput while maintaining the same time share as IEEE 802.11.
All experiments use the fast fading model of Equation (1).
In particular, we use the Ricean probability density (Equation (3)) implemented in the ns-2 extension [29].
In [29], a packet level simulation is used to model the short time-scale fading phenomenon using the procedure suggested in [31].
A pre-computed lookup table containing the components of a time-sequenced fading envelope are modulated in frequency domain using the Doppler spectrum in Equation (4).
Although the ns-2 extensions implemented in [29] result in an accurate simulation of the wireless channel for each individual flow, the fading components of channels for different flows are identical, a scenario not encountered in practice.
This arises due to the fact that the index into the pre-computed channel table is chosen based on the simulator's time instant, which is identical for all flows.
Thus, to realistically model the wireless channel for multiple users in a manner consistent with [31], we modified the extensions of [29] such that channel lookup indexes are a function of the flow, time, and IEEE 802.11 channel.
This allows us to accurately model independent fading suffered by the different frequency channels.
As in [29], background noise is modeled with § ¢ .
The available rates for both MOAR and OAR, based on IEEE 802.11b, are set to 2 Mb/sec, 5.5 Mb/sec, and 11 Mb/sec, so that with OAR, nodes can respectively transmit 1, 3, or 5 consecutive packets depending on their channel condition.
The values for received power thresholds for different data rates were chosen based on the distance ranges specified in the Orinoco TM 802.11b card data sheet.
For only the path loss component (no channel fading) of the received power, the threshold received power for 11 Mb/sec, 5.5 Mb/sec, and 2 Mb/sec corresponds to distances of 100 m, 200 m, and 250 m respectively.
As specified by the IEEE 802.11 standard, we set the rate for sending physical-layer headers to 1 Mb/sec for all packets.
Each transmitter generates constant-rate traffic such that all nodes are continuously backlogged.
Moreover, packet sizes are set to 1000 bytes and all reported results are averages over multiple 50-second simulations.
Here, we study the various performance factors that impact the performance of MOAR in fully connected topologies in which all nodes are within radio range of each other.
Such topologies are representative of a wireless LAN scenario.
The performance factors we study are location distribution, Ricean parameter K, error in channel measurement and the impact of estimating channel distribution while employing the optimal skipping rule within MOAR.
Finally we combine all these factors to explore the performance of MOAR for random fully connected topologies.
The opportunistic gain that can be achieved by skipping channels is dependent upon the temporal channel quality which has two components, a random fading component and a constant line of sight propagation loss component.
In this experiment, we study the impact of the node location distribution by considering a scenario where there is a single flow and the distance (and hence the strength of the line of sight component) between the sender and the receiver is varied.
The random channel fading is kept constant by setting the Ricean fading parameter, throughput gain of MOAR over OAR as the distance between the sender and the receiver of a flow is varied.
The throughput gain has two peaks corresponding to distance between the sender and the receiver of 100 m and 225 m respectively.
This is due to the fact that the path loss component of the received power has distance thresholds for 11 Mb/sec, 5.5 Mb/sec, and 2 Mb/sec of 100 m, 200 m and 250 m respectively.
Thus for distances less than 100 m, the average channel condition corresponds to a data rate of 11 Mb/sec, distances between 100 m and 200 m correspond to a data rate of 5.5 Mb/sec and distances between 200 m and 250 m correspond to a data rate of 2 Mb/sec.
Whenever the two mobile nodes are close to each other, the line of sight component dominates resulting in minimal available channel diversity gains over and above what OAR can achieve.
However, as the distance between the two mobile nodes approaches the thresholds where the average data rate is often switched, random channel variations become comparable with the line of sight component.
This is the regime where MOAR is able to extract additional throughput gains.
Finally, we note that the relative heights of the peaks is due to the ratio of the constant overhead in switching channels to the difference in channel qualities found (2 to 5.5 or 11 Mb/sec vs. 5.5 to 11 Mb/sec) resulting in a larger peak for higher distances.
In this section we explore the effect of the Ricean parameter for distance between the sender an the receiver fixed to 220 m, 150 m and 100 m respectively.
95% confidence intervals for 5 random simulation runs (each 50 seconds long) are also shown.
Observe that MOAR outperforms OAR by 40% to 60% when the distance between the sender and the receiver is 220 m indicating that significant throughput gains can be obtained by opportunistically exploiting the temporal variations among the IEEE 802.11b channels.
However, the throughput gain with increasing 6 is dependent on the distance between the sender and the receiver.
In particular, when the distance between the sender and the receiver is 100 m or 150 m, the throughput gain of MOAR over OAR decreases with increasing 6 .
This is due to the fact that a larger value of 6 represents a smaller variation in channel quality which reduces the probability that the channel conditions on one of the other IEEE 802.11 channels is better than the channel conditions on the home channel.
Thus the opportunity to skip channels opportunistically decreases leading to a decrease in throughput gain of MOAR over OAR with increasing 6 .
On the other hand when the distance between the sender and the receiver is 220 m, the throughput gain of MOAR over OAR increases with an increasing value of 6 .
Note that MOAR can skip channels opportunistically only after the initial RTS/CTS on the home channel takes place successfully.
When the distance between the sender and the receiver is 220 m the line of sight component is already very weak and low values of 6 (denoting high channel variance) makes the transmission of RTS/CTS on the home channel sometime impossible as the received power is below the threshold required to correctly decode packets.
As 6 increases, channel variance decreases and RTS/CTS on the home channel have a higher probability of being correctly received which allows MOAR greater opportunity to skip channels.
Thus the throughput of both OAR and MOAR increases with increasing 6 .
Lower values of 6 means that MOAR has lower probability of finding good channels.
However, higher average channel quality provides increased opportunity to skip poor channels and find a higher data rate channel which dominates the fact that there is a lower probability of finding better quality channels.
Thus the gain of MOAR over OAR increases for increasing 6 rather than showing a decrease as one would intuitively expect and as is shown when the distance between sender and receiver is 100 m or 150 m.
We next study the impact of error in channel quality measurement on the performance of MOAR (we previously considered perfect channel measurement).
We consider the case that the measured channel SNR is the true SNR plus a Gaussian error process.
Figure 5 depicts the performance impact of standard deviation of the measurement error.
In particular, the figure shows throughput loss for MOAR with channel measurement error (as compared to MOAR with no measurement error) vs. the error's standard deviation scaled to the mean SNR.
As shown, the throughput loss is not significant (less that 7%) for standard deviations less than the mean SNR.
In particular, MOAR still outperforms OAR for standard deviation of channel measurement error less than 1.5 times the mean SNR.
However, as the severity of error increases, so does the loss in throughput, indicating that it is important in practice to develop techniques that can measure channel quality within reasonable error margins to fully exploit opportunistic throughput gains.
We discussed the challenges involved in implementing an optimal skipping rule in actual systems in Section 6.
In particular we proposed a measurement based scheme to estimate # A , the probability that data rate ¤ is feasible.
In this section we study the impact of the size of estimation window ( £ 9 ¥ ) on the performance of MOAR and suggest a suitable value of the estimation window size in order to extract maximal throughput gain from MOAR.
We consider a single flow with the distance between the sender and the receiver fixed to .
The random channel fading is kept constant by setting the Ricean parameter, ), MOAR outperforms OAR by 5%-30% depending on the distance between the sender and the receiver.
The reason for this behavior is that for a smaller estimation window size, the proposed measurement based scheme to estimate the distribution of feasible data rates does not have enough number of samples to accurately estimate the distribution correctly.
Thus, in this regime the optimal skipping rule results in a conservative value of optimal skipping threshold which in effect causes MOAR to be conservative in channel skipping and the throughput gain of MOAR over OAR is very small.
However, for a larger estimation window size, the measurement based estimation scheme is able to estimate the channel rate distribution quite accurately which in turn implies that MOAR is able to aggressively skip frequency channels as dictated by the optimal skipping rule and hence MOAR is able to extract the maximal throughput gains available via opportunistic channel skipping.Another interesting observation that can be made from Figure 6 is that the critical value of the estimation window is dependent on the distance between the sender and the receiver.
In particular, the minimum size of the estimation window for which MOAR outperforms OAR is 50 packets, 100 packets and less than 20 packets when the distance between the sender and the receiver is 100 m, 225 m and for all other distances respectively.
This is due to the fact that the path loss component of the received power has distance thresholds for 11 Mb/sec, 5.5 Mb/sec, and 2 Mb/sec of 100 m, 200 m and 250 m respectively.
13 Thus, when the distance between the sender 8 For distances less than 100 m, the average channel condition corresponds to a data rate of 11 Mb/sec, distances between 100 m and 200 m correspond to a data rate of 5.5 Mb/sec and distances between 200 m and 250 m correspond to a data rate of 2 Mb/sec.
and the receiver is either 100 m or 225 m the measurement based estimation scheme requires a larger sample size to accurately estimate the channel rate distribution.
On the other hand when the distance between the sender and the receiver is different from the threshold distances of 100 m and 225 m, there is less variability in the channel rate distribution and an accurate estimation of the distribution can be made in as few as 20 packets.In practical systems the distance between the sender and the receiver is either unknown a priori or can change due to node mobility.
Thus it is important to set the value of the estimation window size such that MOAR is able to extract maximal gains from opportunistic channel skipping independent of the distance between the sender and the receiver.
It can be seen from Figure 6 that for the estimation window size equal to 100 packets MOAR is able to achieve maximal throughput gain over OAR irrespective of the distance between the sender and the receiver.
Thus we recommend that the minimum estimation window size be set to 100 packets to enable the optimal skipping rule for MOAR to extract maximal throughput gains via opportunistic channel skipping.
Here we consider random topologies representative of a wireless LAN and consider a scenario where the mobile subscribers are uniformly distributed in a circular area with diameter 250 m.
We fix the Ricean fading parameter to 4 and also set the size of the estimation window to 100 packets, as discussed in the previous section.
Figure 7 shows the average percentage throughput gain of MOAR over OAR as well as the 95% confidence interval values of the percentage gain for each number of flows.
The curve labeled "Look-ahead" assumes that the channel state information for all the 11 channels is known a priori and thus flows need to skip at a maximum of one time to the channel with known higher rate than the present channel.
This serves as an upper bound to the gain that MOAR can extract over OAR.
We also implement the optimal skipping rule (as derived in Section 5.3) and plot the throughput gains of MOAR with optimal skipping over OAR.
As discussed in Section 7.1.1, the opportunistic gain that MOAR can extract is dependent upon the distance between the sender and receiver of a flow.
For a given random topology, some of the flows are located in a region where the opportunistic gain obtained by skipping channels is not significant.
These nodes, besides contributing little to the net overall gain that MOAR can obtain, actually reduce the opportunistic gain for better located nodes.
The reason for this can be attributed to the random nature of the MAC.
Whenever the nodes with lower opportunistic gain access the medium, the nodes which are better located to exploit the opportunistic gain through channel skipping defer medium access.
Thus the net opportunistic gain that can be obtained by exploiting channel diversity is reduced.
However, on average MOAR still outperforms OAR by 14-24%.
Also note that the gain of MOAR with optimal skipping is very close to the maximum gain achievable if the channel condition on all the 11 channels is known a priori.
Thus, in realistic systems where channel state information on other channels may be unavailable, the optimal skipping rule can still enable MOAR to capture most of the performance gains available via opportunistic skipping.
In this section we study the performance of MOAR for more complex topologies where all nodes are not within radio range of each other.
Unlike the Topologies studied in Section 7.1, in this section we study topologies which are representative of ad hoc networks.
First we study the throughput gains offered by MOAR for Asymmetric Topology (Figure 8).
Finally we study random complex topologies.
In systems with topologies that are not fully connected, i.e., all nodes are not within range of each other, nodes can have different probability of channel capture due to one node hearing an RTS or CTS that another node does not hear.
This unequal channel access probability can result in large differences in throughput shares among nodes.
This behavior is due to asymmetry in information available to each flow and is well documented in the context of IEEE 802.11 [3,19].
An illustrative example of asymmetric infor- Figure 8, in which the receiver of Flow A (node 2) is in direct radio range of Flow B, whereas the sender (node 1) has no knowledge of Flow B.
As shown in Fig- ure 9, Flow B obtains a significantly higher share of the channel access time as compared to Flow A, namely 80% vs. 20% when using IEEE 802.11.
This disparity in total share is attributed to the fact that Flow B can hear packets from the receiver of Flow A, and hence knows exactly when to contend for the channel.
On the other hand, the transmitter of Flow A does not hear any packets from Flow B, and thus has to discover an available time-slot randomly; hence Flow A continually attempts to gain access to the channel via repeated RTS requests which in most cases result in doubling of Flow A's contention window.
As a result, the probability of Flow A capturing the channel is significantly less than that of Flow B.
In this section we show that in general topologies, even with asymmetric information, MOAR will still have a throughput gain over OAR and at the same time complies with pure IEEE 802.11 in the sense that the relative throughput shares of Flow A and Flow B are still approximately same as in IEEE 802.11.
To isolate the effect of information asymmetry on the performance of MOAR in the experiment for Figure 8, we fix the distance between the transmitter and the receiver to 100 m for both Flow A and Flow B. Thus we ensure that the average channel conditions for both Flow A and Flow B are kept to be the same.
Further we set the Ricean parameter, , and also set the value of the estimation window size to 100 packets.
Figure 9 plots the average throughput (in Mb/sec) (over 5 random simulation runs of 50 sec each) for Flow A and Flow B as also the total throughput for single rate IEEE 802.11, OAR and MOAR.
The throughput share for Flow A is 23.14% for single rate IEEE 802.11, 15.85% for OAR and 22.88% for MOAR.
Thus MOAR preserves the relative throughput share of IEEE 802.11 and OAR.
However, note that the total throughput for MOAR is higher than that achieved by OAR which in turn is higher than that achieved by single-rate IEEE 802.11.
In particular, MOAR achieves a throughput gain of 16.6% over OAR while still maintaining approximately the same relative throughput shares for the individual flows as OAR.
Thus, both Flow A and Flow B benefit from opportunistic channel skipping and MOAR is able to provide a net throughput gain while maintaining similar time shares as IEEE 802.11 even in topologies which are not fully connected.
Here we consider random topologies representative of a wireless ad hoc network.
In particular we consider a scenario in which nodes are uniformly distributed in rectangular area 1500 m by 1500 m which is greater than the transmission range of 250 m. To isolate the performance gains achievable via MOAR we disable multi-hop routing and all the flows are single hop flows.
We set the Ricean fading parameter, 6 § ¥ , and also set the size of the channel rate estimation window to 100 packets.
Figure 10 shows the average percentage throughput gain of MOAR over OAR as well as the maximum and minimum values of the percentage gain (over 10 runs of 50 seconds each) for different number of flows.
Observe that on average MOAR outperforms OAR by 18% -28% even in scenarios where not all nodes are within radio range of each other.
Thus even in complex topologies representative of ad hoc networks, MOAR is able to achieve significant throughput gains over OAR.
In this paper we devised the Multi-channel Opportunistic Auto Rate (MOAR) protocol for wireless ad hoc networks.
MOAR allows nodes to opportunistically skip frequency channels in search of better quality channels.
Since the spacing between various IEEE 802.11 channels is greater than the coherence bandwidth, the channel quality on one of the other frequency channels may be better than on the current channel.
Thus MOAR nodes are able to achieve a higher throughput by transmitting at a higher rate on better quality channels.
To balance the tradeoff between the time and resource cost of channel measurement/channel skipping and the throughput gain available via transmitting on a better channel we also devised an optimal stopping rule for MOAR.
Finally we explore the performance of MOAR via extensive simulations and showed that MOAR achieves a consistent gain in throughput of 20% to 25% over current state-of-the-art multi-rate MAC protocols.
