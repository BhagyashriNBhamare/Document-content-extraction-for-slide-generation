Video streaming over wireless networks is getting very popular because of the high bandwidth and the support of quality of service offered by recent wireless standards, such as IEEE 802.11e.
We consider optimizing the quality of video streaming in single-hop wireless networks that are composed of multiple wireless stations.
Our optimization problem controls parameters in different layers to optimally allocate the wireless network resources among all stations.
We address this problem in two steps.
First, we formulate an abstract optimization problem for video streaming in single-hop wireless networks in general.
This formulation exposes the important interaction between parameters belonging to different layers in the network stack.
Then, we instantiate and solve the general problem for the recent IEEE 802.11e WLANs, which support prioritized traffic classes.
We show how the calculated optimal solutions can efficiently be implemented in the distributed mode of the IEEE 802.11e standard.
We evaluate our proposed solution using extensive simulations in the OPNET simulator, which captures most features of realistic wireless networks.
In addition, to show the practicability of our solution, we have implemented it in the driver of an off-the-shelf wireless adapter that complies with the IEEE 802.11e standard.
Our experimental and simulation results show that significant quality improvement in video streams can be achieved using our solution, without incurring any significant communication or computational overhead.
Wireless networks offer convenience, mobility, and low-cost infrastructure.
As wireless networks provide higher throughput and quality-of-service (QoS), video streaming over wireless networks has become an important application.
The optimization of video streaming over wireless networks, however, is a challenging task because of the heterogeneity and dynamic nature of the channels among wireless nodes.
1 In this paper, we seek to optimize the quality of video streaming in wireless networks with energy-constrained devices.We consider a general wireless network model, which is depicted in Fig. 1.
In this model, there are multiple wireless stations sharing a common wireless medium.
These wireless stations can, for example, be notebook computers, PDAs, or video sensors.
The wireless medium can be cellular networks, IEEE 802.16 WiMAX networks, or IEEE 802.11e WLANs.
The wireless stations can be sending and/or receiving video streams to/from the video server through a wireless base station.
For example, in video surveillance systems, video sensors capture and transmit their streams over a WLAN to a processing server for further analysis.
As another example, wireless stations can be receiving video tutorials, demos, or movies from a video-on-demand streaming server over a WiMAX network.
The model assumes that the video streaming or processing server is connected to the wireless base station through a high-speed link, e.g., Fast or Giga bit Ethernet link.
Therefore, the server-base station link is not the bottleneck in the system.
This is a typical setting for local and wide area setups for video streaming.
For example, in streaming over a cellular network, the server-base station bandwidth is usually several order of magnitudes higher than the wireless channel bandwidth.
In WLANs, the server can be attached to the base station through wired high-speed Ethernet switches, while all wireless stations compete with each other for the wireless channel, which has higher bit error rates and smaller bandwidth.Furthermore, we consider battery-powered wireless stations that have power constraints.
To cope with the power constraints, stations employ complexity scalable video coders that may selectively skip some encoding optimization modules to save power.
To maximize quality at a given power budget, we employ models that relate power consumption, encoding bit rate, and resulting distortion.
Power considerations are critical in wireless devices.
Previous measurement studies indicate that modern video coders consume about two-thirds of the system power in video wireless communication systems.
2 Figure 2.
The interaction among different layers to optimize video quality.
Solid arrows indicate inputs to our algorithm, while dotted arrows show the outputs.
Notice that the inputs and outputs belong to different layers.Video optimization in wireless environments has been addressed by several works in the literature, see Katsaggelos et al. 1 for a survey.
However, unlike the general setting considered in this paper, several previous works [3][4][5][6][7] assume only one wireless station, while others 8-11 consider multiple wireless stations but do not account for energy constraints.
Furthermore, many of the previous works solve the optimization problem numerically using exhaustive search or dynamic programming, while we solve our problem analytically.We approach the video optimization problem in wireless networks in two steps.
First, we formulate an abstract video optimization problem for general wireless networks composed of multiple stations.
This formulation, presented in Sec. 3, exposes the important interaction between parameters belonging to different layers in the network stack.
Then, we instantiate and solve the general problem for IEEE 802.11e networks, which support differential quality of service.
We chose IEEE 802.11e networks because they are much more challenging than the centrally-controlled networks such as cellular and WiMAX networks.
We start by summarizing the related works in the literature in Sec. 2.
We then present key models for different layers in the IEEE 802.11e standard in Sec. 4.
We also derive a simple, closed-form, model for allocating the wireless medium in that section.
Then, in Sec. 5, we formulate and solve the video optimization problem, and we show how the calculated optimal allocations can be enforced in the distributed mode of the IEEE 802.11e standard.
In Sec. 6, we evaluate our proposed solution using extensive simulations in the OPNET simulator, which captures most features of realistic wireless networks.
To show the practicability of our solution, we have also implemented our solution in the driver of an off-the-shelf wireless adapter that complies with the IEEE 802.11e standard, i.e., supports quality differentiation.
We report results from our experimental testbed in Sec. 6.
We conclude the paper in Sec. 7, where we also describe how our formulation and solution of the video optimization problem can be applied to other wireless networks, such as IEEE 802.16 WiMAX.Remark: Our modeling and solution of the video optimization problem are applicable only to single-hop wireless networks that do support some QoS differentiation among competing traffic streams.
We build our cross-layer solution on top of the basic QoS differentiation scheme provided by such networks.
In WiMAX networks, 12, 13 for example, the base station can allocate different portions of the wireless channel to different stations.
Also, as detailed in Sec. 5, the recent IEEE 802.11e standard 14 supports prioritized traffic classes.
We should mention that our work is not applicable to the common IEEE 802.11 a/b/g networks, because they don't support link-level traffic differentiation.
Also, our work is not targeted towards the general Internet streaming systems in which some receivers are attached to the Internet via a WLAN.
He and Wu 4, 5 formulate a problem to maximize the video quality by gauging the coding rate and the power allocation between the video coder and the wireless transmitter in battery-powered systems.
Their system utilizes the P-R-D model developed by He et al., 2 the wireless effective capacity model proposed by Wu et al., 15 and the transmission distortion models proposed by Dani et al. 16 and He et al. 17 to estimate the video quality.
This system is not designed for 802.11e WLANs, and only one station is considered in the formulation.
The formulation is highly-nonlinear and is computationally intensive.
Khan et al. 8 consider a wireless video streaming system with multiple wireless stations that receive a video sequence sent from a base station.
They formulate an optimization problem to maximize the average perceived quality for all stations.
They use empirically pre-computed rate-distortion information, which is sent as meta data to the wireless stations.
The solution of the optimization problem is based on exhaustive search.
Schaar et al. 10 study the problem of maximizing the number of 802.11e wireless stations that are receiving scalable video streams from a base station using the HCCA access mode.
They formulate and solve this problem with linear programming techniques.
Their key idea is to divide a global stream into several scalable substreams.
Sending individual substreams with heterogeneous QoS parameters enables matching the packet arrival time with the playout deadline.
Since packets are not needlessly delivered earlier than their deadlines, the number of receiving stations can be increased.
Our work is different from the work by Schaar et al., 10 because we consider the de-centralized EDCA access mode that is more flexible and less complicated to be implemented in commercial products.
11 Finally, Shankar and Schaar 11 and Chou et al. 18 propose the concept of effective airtime, and empirically derive it using simulations, which allows them to achieve airtime fairness among wireless stations.
We further couple the effective airtime with video coding parameters and video sequence properties to maximize perceived-quality for heterogeneous video sequences.
Moreover, we analytically, rather than empirically, estimate the effective airtime under given EDCA parameters to efficiently solve our optimization problem.
In this section, we introduce a general system model for video streaming in single-hop wireless networks, where we demonstrate the interaction among parameters in different layers.
Then, we formulate a cross-layer video optimization problem under this general model.
As shown in Fig. 1, the model has S ≥ 1 wireless stations sharing a common wireless medium.
The wireless stations are battery-powered.
For concreteness, we focus on the case where the wireless stations transmit video streams to a video processing server that is co-located with the wireless base station, as in video surveillance systems.
Similar analysis can be done when the base station transmits video streams to wireless stations.
Each station encodes its video stream and competes with other stations for the wireless medium to send the video data to the server.
The wireless stations are, in general, heterogeneous in their energy level and they are transmitting different streams.
Furthermore, they could be at different distances from the base station and/or experiencing different noise and interference levels.
Therefore, the channel rates between individual wireless stations and the base station are also heterogeneous.
The goal is to maximize the average video quality of all streams received by the server by properly allocating the wireless medium resources while not exceeding the energy constraint of each station.We adopt a cross-layer approach to achieve this goal, as summarized in Fig. 2.
In particular, our optimization scheme uses and sets parameters in three layers: application, link, and physical.
In the application layer, complexity scalable video coding techniques 2, 3 are employed.
These coding techniques are abstracted by the so-called Power-Rate-Distortion (P-R-D) models.
2,19 A P-R-D model relates the expected distortion in the reconstructed video with the encoding rate and the power allocated to the encoding process.
More power allocated to the encoding process allows it to use more sophisticated video encoding and compression algorithms, and thus results in better quality (i.e., lower distortion) at the same bit rate.
Also, higher bit rates usually produce higher video quality, according to the shape of the P-R-D curve.
Therefore, in our problem, a wireless station s (1 ≤ s ≤ S) employs a P-R-D model in the application layer to estimate the distortion D(p s , r s , V ) as a function of the allocated power level p s , the coding rate r s , and the video characteristics V .
Our optimization method takes the function D(·), p s , and V as inputs, and computes the optimal encoding rate r s .
We emphasize that D(·), p s , and V are not determined by our algorithm.
For example, mobile devices often have a dedicate battery level monitor, which can determine the proper p s based on current battery level and other factors.The link and physical layers depend on the wireless medium technology.
But in general, the physical layer can be modeled by the bit rate of the channel between the wireless station and the base station.
The objective of the link layer is to coordinate the access to the shared wireless medium.
That is, it needs to allocate the optimal share of bandwidth b s to each station s such that the aggregate bandwidth does not exceed the link capacity B.
After computing the bandwidth share of each station, the system needs to enforce this allocation, i.e., allows each station to actually obtain its computed bandwidth.The allocation enforcement scheme is much easier in centrally-controlled wireless systems, such as TDMA or FDMA cellular networks, than in distributed wireless systems, such as IEEE 802.11e WLANs.
This is because in TDMA systems, for example, the base station can appropriately allocate time slots among wireless stations.
Whereas, in a WLAN each station independently competes for bandwidth according to the distributed 802.11e MAC protocol.
As shown in Fig. 2, the link layer parameters and the physical channel rate are given to our optimization method, and the optimal share of bandwidth for each station is produced by the optimization method.
Furthermore, our optimization method specifies how these bandwidth shares can be achieved by wireless stations.
As will be detailed later, we present simple and distributed solution for this optimization problem in which the base station and wireless stations cooperate to compute the optimal solution without imposing any significant traffic overhead.Finally, the cross-layer video optimization problem considered in this paper can be mathematically stated as follows.
Find the optimal policy (coding rate and bandwidth share)Φ * = {φ * s = (r * s , b * s ) | 1 ≤ s ≤ S} such that: P G : Φ * = arg min Φ S s=1 D(p s , r s , V ) (1a) s.t. S s=1 b s ≤ B(·); (1b) s = 1, 2, . . . , S. (1c)In the above formulation, the wireless medium capacity B(·) is a function of the number of wireless stations, the protocol used in the link layer, and the channel physical rates between wireless stations and the base station.
Since B(·) captures the physical and link layer parameters and D(·) captures the application parameters, solving the general problem P G in (1) will yield a cross-layer optimized solution for video streaming in wireless networks.Problem P G is fairly general, and various models for D(·) and B(·) can be plugged into it.
The solution may be obtained analytically for some cases and can be computed numerically for others.
We show in the rest of this paper how we instantiate P G for the IEEE 802.11e WLANs and how we solve it.
As discussed above, solving the problem for the IEEE 802.11e standard is challenging due to the distributed nature of the protocol, which makes estimating the wireless medium capacity B(·) and enforcing the computed optimal bandwidth allocations more difficult.
Solving the problem for centrallycontrolled networks such as TDMA and WiMAX can be done in a similar, but much easier, way, as outlined in Sec. 7.
We also mention that P G is applicable in solving the video optimization problem when the base station is transmitting to multiple stations.
In this case, p s represents the power spent by station s to receive and decode its video stream.
Therefore, this abstract formulation of the video optimization problem in wireless networks could be useful in different settings.
The IEEE 802.11 wireless LAN standard is widely deployed in many real systems.
Although the legacy IEEE 802.11 a/b/g standards 20 do not support link layer qualify of service (QoS), the recently-finalized IEEE 802.11e standard 14 enables QoS differentiation among different applications.
[21][22][23] The IEEE 802.11e standard defines two medium access modes: contention-based and polling-based contention-free.
In the contention-free mode, a station sends its QoS requirements (e.g., mean rate, peak rate, and maximum burst size) to the base station, which decides whether to admit or reject the station's request based on the available resources.
The contention-free mode requires centralized admission and scheduling algorithms, thus it is not flexible.
18 In addition, it may not fully utilize the channel bandwidth, because it relies on resource reservations, which are typically made for worst case scenarios.
In this work, we build our solution on top of the more flexible contention-based access mode, which is known as the Enhancement Distributed Channel Access (EDCA) mode.
Our work can easily be extended to support the contention-free mode as well.
In this case, the base station solves the optimization problem and centrally allocates the bandwidth to wireless stations.We start in the following subsection by introducing the physical layer model employed in this paper.
Then, we present the main QoS features of the EDCA mode of the IEEE 802.11e link layer standard, where we describe the controlling parameters used in our optimization problem.
Finally, we propose a simple model for estimating the wireless link capacity, which we will use in our optimization problem.
Most modern WLAN adaptors support multiple physical modes to cope with different channel conditions, such as various signal fading and interference levels.
Each physical mode specifies a modulation scheme and a channel coding algorithm.
A channel adaptation algorithm determines the optimal physical mode that maximizes the effective throughput.
This channel adaptation algorithm is usually based on signal strength measurements and bit error rates, and does not depend on information from upper layers.
Thus, our video optimization problem does not try to control the physical layer rate, in order to avoid interfering with the channel adaptation algorithm typically implemented in the firmware.
We use y s to denote the physical rate at station s (1 ≤ s ≤ S), which is decided by the channel adaptation algorithm.
y s is not assumed to be static, rather, it varies based on channel conditions and characteristics of station s itself, such as its mobility pattern and its distance from the base station.
We do not control y s in our optimization problem.We denote the application layer rate of station s by r s .
To analyze the interaction between r s and y s , let us ignore overheads such as protocol headers and acknowledgment frames.
We will relax this assumption later.
Define φ s = r s /y s .
Since there is at most one successful transmission at any moment without colliding with other transmissions, φ s can be seen as the fraction of airtime assigned to station s. For illustration: to stream a 1-Mbps coded stream over a 10-Mbps channel, the station has to acquire at least 10% of the airtime.
Clearly, the total effective airtime (EA), i.e., the airtime during which useful data is transmitted and no collision occurs, is limited.
The value of EA depends on the details of the link layer protocol and the number of stations, as described in the following subsections.
In EDCA mode, packets are categorized into prioritized classes, called access categories (ACs).
For example, audio, video, and best effort traffic could make three different ACs.
Traffic sessions compete with each other for the wireless medium.
In EDCA mode, airtime allocation among traffic session in different ACs is differentiated by assigning each AC different EDCA parameters.
Differential allocation of airtime to different ACs is essential for QoS-enabled applications.
For example, some traffic sessions belonging to the video AC may need to be allocated larger fractions of the airtime than traffic sessions belonging to the best-effort AC.
There are two sets of EDCA parameters that can achieve airtime differentiation.
The first set controls the frequency of acquiring a transmission opportunity on the wireless medium, while the second set controls the duration of an acquired transmission opportunity.The frequency of transmission opportunities is determined through three parameters: arbitration inter-frame space (AIFS ), minimum contention window size (CW min ), and maximum contention window size (CW max ).
Each AC maintains a contention window size variable (CW ), which is initialized to CW min .
The CW is incremented after transmission failures until it reaches CW max , and is reset to CW min after a successful transmission.
To avoid collisions, a backoff timer is independently chosen from the range [0, CW ] for each AC.
Since smaller CW min and CW max generally lead to smaller CW values, they result in shorter backoff timer and higher transmission opportunity frequency.
Moreover, the backoff timer is decremented once the wireless medium is sensed idle for at least AIFS seconds.
Smaller AIFS values enable wireless stations to start decrementing backoff timers earlier, and thus increase the transmission opportunity frequency.
On the other hand, the maximum allowed duration for each acquired transmission opportunity is determined by a parameter called the TXOP limit.
Once a station acquires a transmission opportunity, it may transmit multiple frames within the assigned TXOP limit.
Assigning different TXOP values to ACs, therefore, achieves differential airtime allocations.The above mentioned EDCA mode supports per-class (AC) differentiated service, but it does not support per-session QoS, which is important to video communications.
For example, some video sessions may need to be allocated larger fractions of the airtime than others in the same AC, because the wireless stations transmitting them are farther away from the base station or they have poorer channel conditions.
To cope with this limitation of IEEE 802.11e EDCA mode, we propose to control the EDCA parameters of different traffic sessions in the same AC such that the differential airtime allocation among traffic sessions is achieved.More precisely, to achieve a given airtime allocation φ s , we can either fix the frequency-related parameters among stations and use the transmission opportunity limit as the control knob, or fix the transmission opportunity limit among stations and use the frequency-related parameters as the control knob.
The experiments in Chou et al. 18 indicate that both approaches result in similar airtime differentiation behavior.
However, the frequency-based approaches incur high computational complexity because modeling the AIFS , CW min and CW max values and their impacts on throughput is complicated.
There are several models in the literature for throughput estimations.
All these models require solving nonlinear equation systems that are extremely computationally demanding and not suitable for real-time applications, see for example Hui and Devetsikiotis 24 and the references cited therein.
In our video optimization problem, we control the TXOP limits of wireless stations, and we fix all frequency-related parameters (AIFS , CW min , and CW max ).
In our video optimization problem, we need to determine the total effective airtime (EA) of the wireless medium so that we can divide it among stations, and to avoid over/under allocation of the wireless medium.
We have developed a simple analytic model to estimate EA; the details are omitted due to space limitations.
The effective airtime of the standard EDCA system is given by:EA = 1 ρ E[x] + 1 + ( 2S CW min + 2 )(1 − 2 CW min ) S−1 ,(2)where ρ is a function of several system parameters, and E[x] denotes the expectation of the TXOP limit for all wireless stations.
The above model accounts for the number of wireless stations in the system as well as the detailed operation of the EDCA mode, including collisions, backoffs, and the minimum and maximum sizes of the contention window.
In the evaluation section, we use a real 802.11 testbed to verify that controlling the TXOP limits is practically easier and it indeed achieves the desired differential allocation of the wireless medium.The above equation for EA can further be simplified by choosing any CW min ≥ 3, which is quite practical considering the range of CW min is between 1 and 1024.
Under this assumption, the first term in the denominator is much smaller than the second term, and therefore, can be ignored.
For example, if CW min = 3, the ρ/E [x] values are 0.0046, 0.0105, 0.0200 for 2, 3, 4 wireless stations, respectively.
Moreover, the second term in the denominator of (2) is always greater than 1.
We use this simplification in our video optimization problem to reduce the computational complexity of finding the solution.
In this section, we instantiate and solve the general video optimization problem presented in Sec. 3 for the IEEE 802.11e WLAN.
We start by presenting the problem formulation, followed by our solution.
Then, we show how the computed optimal solutions can be enforced by setting the appropriate parameters in the wireless stations.
Finally, we present a simple algorithm to coordinate the interaction between the wireless stations and the base station to implement the computed optimal airtime allocations.
Using the notations developed in Sec. 4, our problem can be stated as follows.
Find the optimal airtime allocation Φ * = {φ * s = r * s /y s |1 ≤ s ≤ S} that achieves the minimum average distortion for all wireless stations.
Mathematically,P : Φ * = arg min Φ S s=1 D(p s , r s , σ s , µ s ) (3a) s.t. S s=1 φ s ≤ EA;(3b)r s = φ s y s ; (3c) 0 ≤ φ s ≤ 1; (3d) s = 1, 2, . . . , S.(3e)In the first constraint (3b), EA is given by (2).
This constraint prevents us from over-allocating the airtime.
The second constraint (3c) follows from our discussion in Sec. 4.1 on the relationship between the application layer rate r s , the physical channel rate y s and the airtime fraction allocated to each station s. Solving this optimization problem yields an allocation that specifies the optimal airtime fraction φ * s for each station s, from which we can compute the application layer rate r * s .
Therefore, the solution of our optimization problem jointly determines the best airtime allocation in the link layer and the best video coding rate in the application layer.
To solve the optimization problem in (3), we need to specify the P-R-D model to compute D(·).
Any P-R-D model can be used in this problem.
We present below the solution for the recently proposed model in Cheng et al. 19 that has been shown to be accurate for different types of video sequences.
2 Solutions for other P-R-D models can be done in similar ways.
We emphasize that our video optimization problem is not restricted to the P-R-D model in Cheng et al., 19 and developing new P-R-D models are outside the scope of this paper.We consider that each station s allocates a power budget p s to its video coder to encode its raw sequence at rate r s .
The P-R-D model gives the distortion estimation as: 19D(p s , r s , σ s , µ s ) = σ 2 s 2 −µsrsg(ps) ,(4)where σ 2 s is the video sequence variance, µ s represents the encoder efficiency, and the function g(p s ) models the mapping between the video coder complexity and the microprocessor power consumption.
This function is given by: g(p s ) = p 1/γ s , where 1 ≤ γ ≤ 3 is a system parameter.
Both σ s and µ s are sequence dependent variables.
σ 2 s is the variance of raw pictures, which can be derived at different aggregation levels, such as frame, group of picture, scene, and sequence.
µ s indicates the hardness of compressing the subject sequence, which can be estimated based on the observation on the correlation between µ s and the degree of motion activities.
Details of efficiently estimating σ s , µ s and more discussion on their characteristics are given in Cheng et al. 19 We first show that our optimization problem is a convex programming problem in the following lemma, which will enable us to develop an efficient solution for it.
The proof is omitted due to space limitations.
This lemma enables us to solve our optimization problem as a convex programming problem.
We present our solution in the next lemma.
φ * s = − 1 β s log 2 ˆ λ α s β s ln 2, where log 2ˆ λ = ( S s=1 log 2 α s β s ln 2 β s − EA)/( S s=1 1 β s ),(5)where α s = σ 2 s , and β s = µ s y s p 1/γ s .
Proof.
This is a budget-constrained convex programming problem, which can be solved using Lagrangian relaxation techniques.
We write the following Lagrangian-relaxed formulation:P LB : Φ * = arg min Φ S s=1 D(p s , φ s y s , σ s , µ s ) + λ( S s=1 φ s − EA) ,where 0 ≤φ s ≤ 1; s = 1, 2, . . . , S.for a nonnegative Lagrangian multiplier λ.
Observe that for a given λ value, every wireless station s can compute its optimal airtime fraction, denoted as φ * s , in a distributed manner.
Mathematically, φ * s at station s is given by solving this subproblem:P S : φ * s = arg min φs D(p s , φ s y s , σ s , µ s ) + λφ s , where 0 ≤ φ s ≤ 1,(7)where the only information shared among wireless stations is the λ value.
Thus, solving this problem requires a very small communication cost and is efficient.
The optimal solution, φ * s , can be derived by: ∂(α s 2 −βsφs + λφ s )/∂φ s = 0, which yieldsφ * s = − 1 β s log 2 λ α s β s ln 2 .
(8)This formula gives us the unique extreme point φ * s for station s.
It is straightforward to see that the second derivative of the objective function of problem P S is larger than zero.
Thus, φ * s is indeed the airtime fraction that minimizes the distortion of the video sequence sent by station s.
Since the total distortion is computed by the linear summation operator, minimizing distortion at each station will yield the minimal total distortion.We next search for the optimal λ value.
In the Lagrangian-relaxed problem (6), tightening the constraint S s=1 φ s ≤ EA results in an optimal solution for the original problem (3) as long as the solution is feasible in the original problem.
This is intuitive because higher airtime fractions lead to lower distortion.
We usê λ to denote this optimal λ value.
We then derivê λ as follows:S s=1 φ s = EA ⇒ S s=1 − 1 β s log 2 ˆ λ α s β s ln 2 = EA ⇒ log 2 ˆ λ = S s=1 log 2 αsβs ln 2 βs − EA S s=1 1 βs .
(9)Notice that the optimal value φ * s for any station s can be computed locally by that station if it knowsˆλknowsˆ knowsˆλ.
Furthermore, the computation is very simple and requires no matrix operations.
Therefore, optimal airtime allocation among all stations can be achieved efficiently and in a distributed manner using a simple algorithm (presented in Sec. 5.4).
After solving the optimization problem, we need to set the parameters in the application and link layers to enforce the computed optimal allocations.
In the application layer, the optimal encoding rate is set as r * s = φ * s y s for each station s.
In the link layer, we need to allocate the airtime.
As mentioned in Sec. 4, we use the transmission opportunity limit TXOP as the control knob to assign airtime among wireless stations.
TXOP limits are set every beacon interval, which is defined by the standard.
We fix all other parameters, so that the wireless stations have equal probability to obtain a transmission opportunity.We define x * s as the TXOP limit for station s. Following similar derivation in the literature, 11,18 we compute x * s as a function of φ * s and protocol overheads as follows.
We use l s to denote the average payload length of video packets sent by station s.
We define o s to be the mean header overhead of packets from station s.
The overhead o s includes headers from all network layers, such as application, transport, and data link headers.
The frame size is, therefore, l s + o s on the wireless channel.
Since the physical rate of station s is given as y s , it takes ls+os ys seconds to transmit a frame.
We define t b to be the beacon interval, t l to be the slot time, t s to be the short inter frame space (SIFS), t d to be the distributed inter frame space (DIFS), and t a to be the average time of sending an acknowledgment.
Since WLANs cover a short range, propagation delays are negligible.
To achieve the target application rate r * s , the number of data frames need to be sent in each beacon interval is given as: ⌈ ls ⌉.
In each transmission opportunity, the sender sends a data frame and waits for an acknowledgment frame from the receiver.
Upon receiving a data frame, the receiver waits for a SIFS period, then sends an acknowledgment frame.
Once this frame arrives at the sender, the sender waits for a SIFS period and sends another data frame given that its transmission opportunity limit is sufficient to accommodate that data frame and the expected acknowledgment frame.
Otherwise, the current transmission opportunity ends.
x * s is therefore given by:x * s = φ * s y s t b l s l s + o s y s + 2 φ * s y s t b l s − 1 t s + φ * s y s t b l s t a .
(10)In the above equation, the first term accounts for the transmission time of data frames, the second term represents all SIFS periods, and the last term considers the transmission time of acknowledgment frames.In the evaluation section, we experimentally verify that setting x * s according to (10) yields the expected application rate for each station using implementation on real 802.11e adaptors.
We present an algorithm to implement the optimal solution by the wireless stations and the base station.
The allocation algorithm is executed periodically.
This period is set as multiple of the system beacon interval, because the EDCA parameters are announced using beacon frames.
Clearly, the length of this period poses a trade-off: the more often the allocation algorithm is executed, the more responsive it is to channel and station conditions, but with higher computation and communication costs.
Each wireless station s reports to the base station its α s and β s parameters, which depend on current power level, channel conditions, and sequence characteristics.
The α s , β s values are reported initially and whenever they change.
If there is no change in them, the station does not send anything, and the access point uses previous values.
The access point computesˆλcomputesˆ computesˆλ, which is the only information needed by wireless stations to compute their optimal allocations.
Each station s computes φ * s , from which it can set r * s as φ * s y s , and compute x * s from Eq.
(10).
There are two types of overheads imposed by our allocation algorithm: computation and communication.
Since the solution is computed from closed-form equations, the computation cost is negligible compared to the video compression operations.
The communication cost involves two parts.
First, broadcasting thê λ value to all stations.
This single value can be included in the beacon frame (in the 64-bit information element field of the frame 25 ) that is automatically sent by the access point every beacon period, or in the worst case, an additional packet is broadcast every beacon period.
The second communication cost is transmitting α s , β s from each station to the access point.
These values are sent by a station only whenever they change.
In the worst case, there is a single packet for each station every beacon period.
This is again a negligible cost compared to the video traffic.
Therefore, our proposed method can optimize the video quality without incurring any significant overhead.
In this section, we first evaluate our allocation algorithm using the OPNET simulator under dynamic and realistic environments.
Then, we show that our algorithm is practical by implementing it in off-the-shelf wireless adapters.
We evaluate our proposed allocation algorithm using the OPNET Modeler simulator version 12.
26 The OPNET Modeler provides a comprehensive simulation environment that accounts for the detailed operation of wireless networks.
For example, the module simulating the IEEE 802.11e protocol has more than 14 thousand lines of C code.
We have implemented two new OPNET Modeler nodes: power-aware wireless station (WS) and intelligent base station (BS).
We construct a wireless network with BS and several WSes.
Upon joining the network, each WS continuously streams a video sequence to the video server co-located with the BS.
This video streaming traffic is tagged as video access category, as defined in the 802.11e standard.
We collect statistics at the video server for individual WSes.We program each WS to join the network at a random time that is uniformly distributed between zero and five seconds from the start of simulation.
Upon joining the network, each WS sends a current status report to the BS.
This status report consists of several parameters, such as P-R-D characteristics and the current modulation scheme of that WS.
The BS, once receiving this report, invokes one of the considered airtime allocation algorithms and constructs a reply to that WS.
This reply contains the assigned airtime allocation that instructs individual WSes to gauge their streaming rates and link-layer QoS parameters to achieve the highest average streaming quality for all WSes.
In order to accommodate the dynamic environments, WSes periodically (every five seconds) send update reports to BS.To simulate more realistic wireless environments, we have implemented the log-normal path loss model [27, Chap 3.11] in OPNET.
OPNET uses the much simpler free-space signal propagation model by default.
We choose the path loss exponent to be 2.2 and the log-normal standard deviation to be 8.7 dB based on the recommendations in Rappaport [27, p.127].
Using this more elaborate path-loss model allows us to conduct simulations that are closer to real wireless systems.
Furthermore, we simulate scenarios where there is cross-traffic running through the WLAN and interfering with the video sessions.
We also simulate dynamic channel conditions due to node mobility.We have implemented four airtime allocation algorithms in OPNET.
We first consider a scheme that equally divides available airtime among all WSes.
This scheme is equivalent to using the IEEE 802.11e EDCA mode and assigning all video traffic a higher priority class than other traffic.
That is, all video traffic session will belong to the same access category (AC), and will receive preferential access to the wireless channel than other types of traffic.
However, since all video traffic sessions belong to the same AC and share the same EDCA parameters, they have similar chance to acquire the shared air medium.
We refer to this algorithm as EDCA in the figures, because it represents what the IEEE 802.11e standard can achieve if it is used in a QoS-enabled WLAN.
We have implemented our algorithm that is provably optimal as shown in Sec. 5.2.
We denote our algorithm as OPT in the figures.
We have also designed two other algorithms that improve upon EDCA, but not in a complete cross-layer manner, as our OPT algorithm does.
These two algorithms are referred to as Ap-only and Link-only.
The Ap-only algorithm allocates the wireless medium bandwidth among WSes in R-D optimized fashion, without considering the physical layer conditions.
Whereas the Link-only algorithm only accounts for the link-layer status and it does not consider the R-D characteristics of the video streams.
Comparisons with Aponly and Link-only algorithms show the importance of considering information from multiple layers in optimizing the video quality in wireless networks.
We should mention that we are not aware of any existing algorithms that solve our optimization problem, which considers real-time nonscalable video streaming from heterogeneous wireless stations to a base station over contention-based wireless networks (see Sec. 2 for details).
Nevertheless, this is not an issue as our OPT algorithm is provably optimal.
Moreover, we compare OPT algorithm against Ap-only and Link-only algorithms, which are not naively designed: They follow the traditional divide-and-conquer approach and search for optimal solutions within one layer of the network stack.
Potential Quality Improvement: We first compare our OPT algorithm against the EDCA algorithm.
We randomly deploy a BS and six WSes in a 300-meter by 300-meter area.
We consider heterogeneous channel conditions and P-R-D characteristics.
WSes that are closer to the BS have better channel conditions and thus can choose more aggressive modulation and coding schemes.
Therefore, WSes closer to the BS have higher physical rates.
s ], respectively.
These ranges are computed from the typical ranges of texture variance and motion vector values given in He et al. 2 and Cheng et al. 19 We also exercise different video resolutions by considering both CIF and 4CIF sequences.We stream video sequences for 60 seconds from all six WSes, and compute the streaming quality achieved by individual WSes.
The quality is measured in MSE (mean squared error).
We compute the average quality among all WSes.
We repeat the same simulation for two algorithms: OPT and EDCA.
Due to space limitations, a sample result is given in Fig. 3, which shows that our OPT algorithm outperforms the EDCA algorithm by up to 28% in quality improvement.
Results of other test cases are similar.
Furthermore, this quality improvement comes at negligible cost, because the optimal solution is computed using simple (scalar) equations and communicated to the wireless stations in the beacon messages that are periodically broadcast by the base station anyway.To validate our allocation enforcement scheme, we collect the airtime usage of each WS in this simulation setup.
We then compute the aggregate effective airtime.
Fig. 4 shows a sample result, all other simulations yielded similar results.
We note that our OPT algorithm estimated the effective airtime to be 69% using the model in Sec. 4.3, which is clearly achieved using our allocation enforcement scheme.
Impacts of Cross Traffic: Next, we consider the impact of cross traffic.
In addition to the six power-aware wireless stations and the base station, we include an application server and four wireless stations that randomly generate cross traffic in our experiments.
The wireless stations start generating cross traffic at a random time chosen from zero to five seconds.
The inter-arrival time between packets in the cross-traffic follows a Poisson distribution, while the packet size follows a normal distribution.We repeat this streaming simulation with two algorithms: OPT and EDCA.
We measure the average streaming quality achieved by all wireless stations.
We observe that our OPT algorithm still significantly outperforms the EDCA algorithm, there is up to 25% quality improvement.
This indicates that the cross traffic does not impose negative consequences on our OPT algorithm and our allocation enforcement scheme.
Therefore, our OPT algorithm can work in real environments where cross traffic always exists.Comparison with Ap-only and Link-only Algorithms in a Dynamic Environment: We then consider a dynamic environment, where channel conditions are changed over time.
We simulate this by moving wireless stations around during the simulation.
WSes that move closer to the BS will have better channel conditions and thus can transmit at higher rates.
Similarly, WSes that move further from the BS will have worse channel conditions and have to reduce their sending rates.
We run all considered allocation algorithms to see how they perform in dynamic environments.We collect the average distortion among all WSes for each algorithm.
We use the EDCA algorithm for base-line comparisons, i.e., we normalize the quality achieved by the OPT, Ap-only, and Link-only algorithms by the quality achieved by the EDCA algorithm.
Fig. 5 illustrates the results, where our OPT algorithm consistently outperforms the other algorithms.
The results in this experiment show that: (i) our OPT algorithm functions properly in dynamic environments, and (ii) the cross-layer solution of the video optimization problem consistently provides better video quality than solutions that only consider information from individual layers.
We have setup a QoS-enabled WLAN testbed with three nodes: one base station and two wireless stations.
In each node, we installed a WLAN adaptor that uses the Atheros AR5005G chip.
We chose this wireless chip because it complies with the 802.11e standard for QoS support.
More importantly, this chip implements a minimal set of functionalities in hardware.
It relies on the software to implement most features and algorithms, which allows us to customize the driver software.
The driver for Linux is publicly available.
28 We implemented the OPT and EDCA allocation algorithms in this driver.In our first experiment, we demonstrate the effectiveness of controlling the throughput of individual video streams by setting the TXOP parameter in the link layer.
We conduct the experiment by assigning different airtime fractions to senders during various periods.
For example, during the period [0,30] second, WS1 is assigned φ 1 = 10% of the airtime and WS2 is assigned φ 2 = 15%.
These airtime fractions are changed in the period [30,60] second to be φ 1 = 20% and φ 2 = 10%.
We compute the TXOP value from Eq.
(10) for each station based on the allocated airtime fraction.
Then we start a UDP video streaming client on each station.
We measure the achieved throughput by each station at the base station which should reflect the allocated airtime to that station.
We fix CW min = 1, AIFS = 50µs, and packet size at 500 bytes (payload data).
Fig. 6 illustrates the throughput of individual stations.
The data is collected with all wireless cards configured to 9 Mbps physical rate.
This figure shows that both stations achieve the target throughput.
For example, in the first 30 seconds, station 1 is assigned 10% of airtime.
Given that the total system throughput is 9 Mbps, we expect to see 0.9 Mbps streaming rate, which is indeed met in our experiments.In the next experiment, we compare our optimal allocation algorithm versus the EDCA algorithm, which allocates airtime equally among stations.
The two stations report their P-R-D parameters and physical rates to the base station every 10 seconds.
The base station computes the optimaî λ and sends it back to the two stations.
Each station computes its optimal airtime fraction φ * s , from which it determines the application sending rate r * s and the link layer parameter x * s which specifies the TXOP limit, as described in Sec. 5.4.
Each station s starts streaming video at rate r * s using the UDP protocol.
We collect throughput statistics at the base station and we compute the video quality using the P-R-D model.
The P-R-D model parameters are generated as described in the previous section.
The allocation problem is solved every 10 seconds.
We repeat the whole experiment for the EDCA algorithm.
We plot the average distortion in Fig. 7.
As the figure shows, significant quality improvement (up to 100% in MSE or 3 dB in PSNR) can be achieved using our optimal allocation algorithm.
We also measure the raw (physical) throughput of the two stations, and plot the results in Fig. 8.
Our algorithm transmits fewer number of bits over the wireless channel, yet achieves much better video quality as shown in Fig. 7.
These results from the QoS-enabled WLAN testbed demonstrate the practicality and efficiency of our algorithm in improving video quality.
We have formulated a cross-layer optimization problem to optimally allocate the wireless network resources among multiple energy-constrained wireless stations.
The objective of the optimization problem is to maximize the video quality of all streams given different power levels and channel conditions of the wireless stations transmitting (or receiving) these streams.
We employed a power-rate-distortion model to capture the trade-off between the encoding rate, the consumed power by the encoder, and the resulting video distortion.
We solved our optimization problem for the IEEE 802.11e wireless networks.
We described how various link layer parameters of such networks can be controlled to achieve differential allocation of wireless resources among wireless stations.
In particular, we showed and experimentally validated that controlling the transmission opportunity (TXOP) limits of wireless stations is a simple and effective scheme to achieve differential allocation of the wireless medium.
We developed an algorithm to realize the proposed cross-layer optimized solution, and we actually implemented our algorithm in a QoS-enabled WLAN testbed.
The results from experiments performed on this testbed show that a quality improvement of up to 100% in terms of the mean squared error (MSE) can be achieved using our algorithm over the allocation algorithm currently used in IEEE 802.11e EDCA networks.
This quality improvement comes at negligible cost, because the optimal solution is computed using simple (scalar) equations and communicated to the wireless stations in the beacon messages that are periodically broadcast by the base station anyway.
Furthermore, we simulated various wireless networks with diverse channel and video conditions in the OPNET simulator.The simulation results show that: (i) our allocation algorithm functions properly in dynamic environments, and (ii) the proposed cross-layer solution of the video optimization problem consistently provides better video quality than solutions that only consider information from individual layers.The formulation and solution of the video optimization problem presented in this paper is not restricted to the IEEE 802.11e WLANs.
It can easily be applied to IEEE 802.16 WiMAX 12, 13 metropolitan area networks and cellular networks.
In fact our solution is easier to apply in such (centrally-controlled) networks than in the distributed WLANs.
For example, in most common WiMAX networks, the wireless channel is divided using time division into frames.
Each frame is divided into downlink subframe and uplink subframe.
The downlink subframe is used by the base station to broadcast to all wireless stations.
The uplink subframe is further divided into variable-length transmission periods, where each period is allocated to a wireless station to transmit data to the base station.
The length of each transmission period is computed by the base station and is included in the beginning of each frame.
Using our optimal allocation algorithm, the base station can determine the optimal lengths of these periods to maximize video quality for all wireless stations.
In addition, unlike the somewhat complex allocation enforcement scheme in WLANs (see Secs. 4 and 5.3), the allocation in WiMAX is included in each frame, which the wireless stations have to obey according to the standard.
