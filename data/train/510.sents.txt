In this paper, we develop and analyze a low-complexity cooperative protocol that significantly increases the average throughput of multi-hop upstream transmissions for wireless tree networks.
We consider a system in which transmissions are assigned to nodes in a collision free, spatial time division fashion.
This protocol exploits the broadcast nature of wireless networks where the communication channel is shared between multiple adjacent nodes within interference range.
For any upstream end-to-end flow in the tree, each intermediate node receives information from both one-hop and two-hop neighbors and transmits only sufficient information such that the next upstream one-hop neighbor will be able to decode the packet.
This approach can be viewed as the generalization of the classical three node relay channel for end-to-end flows in which each intermediate node becomes successively source, relay and destination.
We derive the achievable rate and propose an optimal schedule that realizes this rate for any regular tree network.
We show that our protocol dramatically outperforms the conventional scheme where intermediate nodes simply forward the packets hop by hop.
At high signal-to-noise ratio, it yields approximatively 80% throughput gain.
Emerging architectures for large-scale urban wireless networks employ multihop wireless communication over trees.
In particular, while the network's physical topology is quite complex, the logical topology used for forwarding follows a tree.
For example, IEEE 802.16j mandates tree forwarding and IEEE 802.11s standardizes a tree-based routing protocol.In this paper, we develop and analyze Turbo-Relaying, a low-complexity cooperative protocol that significantly increases the average throughput of multi-hop upstream transmissions for wireless tree networks.
1 We consider a system in which transmissions are assigned to nodes in a collision free, spatial time division (TD) fashion, e.g., [2], [3].
Moreover, each node forwards its neighbor's traffic in addition to its own traffic with the final destination of all upstream traffic being the root node.
We make the following contributions.
This research was supported by NSF grants ANI-0331620 and ANI-0325971 and by Intel Corporation.
1 The term Turbo-Relaying is not related to the Turbo-codes, [1], but rather is based on the turbine engine principle: In turbocharged engines, the combustion air is already pre-compressed before being supplied to the engine.
The engine aspirates the same volume of air, but due to the higher pressure, more air mass is supplied into the combustion chamber.
Consequently, more fuel can be burnt, so that the engine's power output increases related to the same speed and swept volume.First, we devise the Turbo-Relaying Protocol (TRP) for the "parking lot" topology which refers to a special case of a 1-ary tree (linear topology) with a flow originating from each node and terminating at the outer-most node (cf. Figure 1a).
The principle is as follows: A source node n in the chain transmits a packet such that the next hop upstream neighbor, n − 1, is able to decode it, but the next upstream two hop neighbor, n − 2, cannot, since the distance of two hops is assumed to be larger than the transmission range.
However, this latter node "eavesdrops" on the transmission and stores the received signal without attempting to decode it.
Then, node n − 1 transmits to node n − 2, only the necessary information such that, in addition of the previously stored data, node n − 2 will be able to decode the full packet.
Node n − 3 in turn eavesdrops this transmission.
Then, node n − 2 transmits only the necessary information such that node n − 3 can decode the packet.
In the same manner the process repeats itself until the root node is reached where each relay (intermediate node) receives information from both one-hop and two-hop neighbors and transmits only sufficient information such that the next upstream one-hop neighbor will be able to decode the packet.
The strategy involves three neighbor nodes at the time and can efficiently be implemented based on Turbo-codes [4] or Low Density Parity Check (LDPC) codes [5].
We compare TRP to the conventional non-cooperative relay solution.
In particular we compare it to the method suggested in [3] which presents an optimal scheduling among the nodes in a spatial TD fashion which guarantees collision free transmissions.
We also compare our scheme to an improved version of this solution where optimal power allocation is considered.
We show that the optimal power allocation strategy slightly improves the scheme suggested in [3], however TRP dramatically outperforms both schemes, e.g., for a chain topology, the asymptotic behavior at high signal-to-noise ratio of the throughput gains of TRP over the conventional scheme yields approximately 90% gain for large chains.Second, we generalize our protocol to the m-ary trees.
The larger the connectivity degree of the tree, the higher the throughput gain.
The throughput gain of TRP over the conventional scheme is above 80% at a signal-to-noise ratio of 30 decibels for any connectivity degree.
Our cooperation protocol can easily be extended to irregular tree topologies and downstream or bidirectional transmissions.Our work contrasts with extensive prior work in cooperative communication in that no prior work proposes a cooperation strategy for multiple flows in a collision free, spatial time division fashion.
In particular, study of relaying began with a classical three-node scenario in which a single relay that is dedicated to help the sender in transmitting the information to the receiver [6], [7].
(Extension to a four nodes network with two transmitters that cooperate can be found in [8], [9], [10].)
This three-node cooperation can be viewed as a special case of our approach for a three node chain.
More recent works of study of multiple relays are based on power optimization [11], [12] for single end-to-end flow.
This approach would have very limited gain since no spatial reuse among the users can be considered.
In [13], the achievable rate for ad hoc network with optimal node cooperation is found.
However, it is not clear whether such rate can be achieved in tree network topology with a local cooperative strategy as we propose.
Cross layer optimization is addressed in [14] and in [15], a efficient multihop routing is proposed for cellular network in severe fading environment.
However, the throughput gain is very little if the nodes have no mobility as in our transmission model.The remainder of the paper is organized as follows.
Section II describes our system model for tree network under consideration.
In Section III, the achievable rate is derived for a chain topology and a feasible schedule that realizes this rate is proposed.
Section IV outlines our new node cooperation protocol.
Achievable rate and optimal schedule that realizes this rate are determined.
In Section V, these results are extended to tree networks with arbitrary connectivity degree.
Finally, we draw conclusions in Section VI.
We model the wireless network as a m-ary tree topology where m + 1 denotes the connectivity degree of any node as shown in Figure 1.
The mesh nodes are access points with no mobility.
A link between two nodes means that these nodes are within transmission range of each other.
We assume no timeselective fading and that the distance between two adjacent connected nodes, d, is unitary.
We focus on collision-free Spatial Time-Division Multiple Access (STDMA) protocols that substantially simplify the signal processing algorithms at the receiver as in [3].
The signal-to-inference-plus-noise ratio (SINR) at any receiving node should be larger than a threshold τ :SINR ≥ P σ 2 + i P i γ (1)where P is the transmitted power; σ 2 is the noise spectral density and γ the channel pathloss exponent with typical range: 2 ≤ γ ≤ 4, [16].
The indices i ∈ {1, . . . , N } represent the normalized distances between the interfering nodes and the receiving node.
We assume that the interference power is negligible compare to the noise variance σ 2 if i is greater than a certain threshold, typically 3 or 4.
We define the spatial reuse factor F as this threshold value plus one, which corresponds to the minimum number of hops between two nodes that can simultaneously transmit without interfering with each other.
Supposing that all nodes transmit with constant power P and have the same transmission and interference ranges, F is a constant parameter in our model.
With TRP, we also consider the received signal located two hops apart from its corresponding transmitting node; in order to keep the same spatial reuse factor as in the non cooperative case, we assume directional antennas with main beam steering towards the gateway node.
We first consider a 1-ary tree (m = 1) also known as the parking lot topology shown in Figure 1a.
In this case, the number of nodes N is equal to the depth of the tree, i.e., L.
In Section V, we extend our results to the general case m, m > 1.
In Figure 1a, we also depicted the upstream flows for all nodes.
The traffic load heavily depends on the position of the link in the network and has a significant impact on the cooperation strategy between the nodes, e.g., in Figure 1a the final link carries 4 times the traffic of the left-most link.
In this section, we determine the achievable rate, i.e., the throughput normalized with respect to the bandwidth, per node of an uplink transmission when "no cooperation" between the nodes is considered.
Nodes are obliged to forward other nodes' messages on a fair basis share (e.g., round robin); however by no cooperation between nodes in the sense of [8], we assume that relaying is permitted only as a repeater's technique between neighbors.
Furthermore we assume that all nodes transmit with the same power P (no global or local power allocation optimization), according to a pre-determined Time Division Multiple Access (TDMA) schedule which satisfies the spatial reuse condition.
We also present such a TDMA schedule which realizes the achievable rate.A flow achievable rate is measured by the rate granted to the flow on its bottleneck link, i.e., denoting by R k the achievable rate of the flow originated from node k, k = 1, . . . , N to the gateway, we have:R k = sup t k i,i−1 min i,i−1 t k i,i−1 C i,i−1(2)where C i,i−1 denotes the capacity of the channel between two adjacent nodes i and i − 1, i = 1, . . . , N and t k i,i−1 the transmission time granted to flow k on this channel.
In our model all physical links have the same capacity, so we denote in the sequel C i,i−1 simply by C.
In our study we are interested in optimizing bandwidth allocation on a fair share basis, i.e., the total resources should be distributed such that the end-to-end rates are as equal as possible.
Therefore the achievable rate is determined to the flow that gets the lowest rate:R = sup s∈S min k∈{1,...,N } {R s k } (3)where s denotes a specific schedule, S the set of all feasible schedules and R s k denotes the achievable rate by node k based on schedule s ∈ S.
Our first theorem states the upstream achievable rate in a non cooperation scheme:Theorem 1: For the upstream transmission in the parking lot network with all N nodes fully backlogged, with a spatial reuse factor F , when all nodes transmit with same power P and all links have the same capacity C(P ), the achievable rateR(m = 1, F, N ) is: R(1, F, N ) = 2C(P ) F (2N − F + 1)(4)where C(P ) equals for additive white Gaussian channel with Gaussian sources [17]:C(P ) = 1 2 log 2 (1 + P/σ 2 ); (5) Proof:The amount of time required to transmit at least one packet of all nodes to the gateway node is at least the transmission duration T to transit the packets of all nodes through the first F nodes in the chain, i.e, the last F nodes according to the flows, which are the bottleneck of the network.
Node 1 has to forward N for each packet transmission of its own, node 2 has to forward N − 1, etc.
SoT = N +(N −1)+. . .+(N −F +1) = F (2N −F +1)/2.
This result is an extension of Lemma 3.1 in [18] for arbitrary spatial reuse factor in the case of fully backlogged nodes.
Thus, an upper bound on the achievable rate is C(P )/T with C(P ) the capacity of a single hop link.
Each of the farthest N − F nodes from the gateway has less packets to forward than any node of the first F nodes so they can be scheduled together within T .
Figure 2 shows an example of a schedule which realizes the bound for eight nodes F = 4.
On the horizontal and vertical axes, we show the slotted time and the normalized distance to the gateway node (which is equivalent to the node indices), respectively.
A square in position (i, t) represents an active transmission from node i to node i − 1 at time t.
In order to locate the path of the messages, the source node number is shown in each square.
¡ ¡ ¡ ¡ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ £ £ £ £ £ £ £ £ £ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¥ ¥ ¥ ¥ ¥ ¥ ¦ ¦ ¦ ¦ ¦ ¦ § § § § § § ¨ ¨ ¨ ¨ ¨ ¨ !
!
! " " " " " " " " "
# # # # # # # # # $ $ $ $ $ $ % % % % & & & & & & ' ' ' ' ' '( ( ( ( ( ( ( ( ( ) ) ) ) ) ) In the previous section, we assumed that all nodes transmit with power P .
The optimal schedule has a large number of idled time slots for the nodes F + 1, F + 2, . . . , N .
Higher average throughput can be achieved if the transmit power P is spread over the idle slots.In [19], we show that for upstream transmission in a chain topology of N fully backlogged nodes with a spatial reuse factor F and optimized power allocation, the rate at any node, R(1, F, N, β * ) is upper bounded by:R(1, F, N, β * ) ≤ 2β * C(P ) F (2N − F + 1)(6)whereβ * = η * 1 log(1 + P * 1 /σ 2 )/N log(1 + 1/σ 2 )with η * 1 and P * 1 are the optimal transmission duration and transmission power of node 1, respectively.
Whereas the nodes transmit with different powers depending on their position in the chain, the interference range increases.
However, we keep the same F as in the case with fixed power allocation, so the rate in (6) is usually not achievable.
The throughput gain with optimal power allocation vs. fixed power allocation, Figure 3 shows the throughput gain for different chain sizes as a function of the signal-to-noise ratio SNR = P/σ 2 .
The throughput gain with optimal power allocation is negligible at low and high SNR.
For moderate SNR (10-15 decibels), the gain is less than 25% even for very large chain size (1000 nodes).
G OP A (1, F, N, β * ), is equal to β * .
In the previous section, we determined the achievable rates for multihop uplink transmission in a chain topology with spatial reuse factor F .
We assumed the common relaying strategy that consists of either transmitting its own information or repeating, i.e., decoding-and-forwarding the messages received from the upstream node to the below node.In this section, we propose a new cooperative relaying strategy which exploits the broadcast nature of wireless networks where the communication channel is shared among for the parking lot vs. fixed power allocation scheme as a function of the signal-to-noise ratio (SNR= P/σ 2 ).
Gains with OPA are negligible at low and high SNRs.
For very large chain (100 or 1000 nodes), the throughput gain does not exceed 25%.
The pathloss is equal to 2 for all cases with spatial reuse factor F = 4.
multiple adjacent nodes.
Whereas the adjacent node only is able to decode the message, the other below adjacent nodes may receive some information but they are not able to decode it.
Throughout the paper, we focus on decodeand-forward protocol.
Whereas there exist other protocols such as amplify-and-forward and estimate-and-forward [9], [10], recent implementations of decode-and-forward protocol based on distributed LDPC codes perform very close to the theoretical limit [5] with single user computational complexity.
We limit our study to the case for which only the nodes located one hop and two hops apart of the transmitting node collect some information from this node.
Although this approach is suboptimal, we motivate this choice by noting that the SINR at farther nodes is very low.
Larger spatial reuse factor is required which consequently reduces the throughput.
Additionally, implementation of our scheme does not require phase/symbol synchronization at the sample level contrary to [5], [8], [13], since only one node within its transmission range is transmitting at the time.
Figure 4 illustrates the strategy that we call Turbo Relaying as motivated in the introduction.
The arrows represent transmissions for three consecutive time slots.
Before calculation of the achievable rate with this strategy for an arbitrary number of nodes, we treat the case of a chain with 3 nodes, i.e., nodes 1 and 2 and the gateway.
This special case is similar to the classical "relay channel" in the TimeDivision (TD) mode, see for instance [5], [12], with two main differences: (i) In the classical relay channel, the relay, i.e., node 1 with our notations, does not have its own information to transmit, and (ii) Bounds for the achievable rate usually require perfect power control.
In order to satisfy the spatial reuse constraint, we assume that all nodes transmit with fixed power P .
For a chain with three nodes in TD mode, the upstream Fig. 4.
Turbo Relaying strategy.
Node n sends a coded packet such that node n−1 is able to decode it.
As the distance between nodes n and n−2 is larger than the transmission range, node n−2 cannot decode it but nevertheless stores it.
Node n − 1 re-encodes the information and transmits to node n − 2 few additional redundant bits.
Node n − 2 gathers both parts as a single codeword and decodes it ( [5]).
In the same manner, the process repeats itself until the root node is reached.t − 1 n − 1 n − 2 n − 3 n n − 4 t + 1 ttransmission schedule is shown in Figure 5.
In Equation (5)X2 Y1 Y0 X 2 X 1 Y 0 Y 0 X 1 Phase 1 Phase 2 Phase 3Fig .
5.
Turbo Relaying strategy in a multihop transmission for a chain of three nodes (two nodes in addition to the gateway node).
The throughput gain is up to 50% compared to the case of single-hop relaying.of [5] it was shown that the achievable rate in TD mode for node 2 to transmit to node 0 is:R = max t 1 ,t 2 t1+t2≤1 min {t 1 I(X 2 ; Y 1 ) + t 2 I(X 2 ; Y 0 |X 1 ), t 1 I(X 2 ; Y 0 ) + t 2 I(X 2 , X 1 ; Y 0 )}where X 2 is the transmitted signal by node 2 during the first phase with duration t 1 .
Node 1 and the gateway node receive a noisy version of it, namely Y 1 and Y 0 , respectively.
X 2 and X 1 represent the signals transmitted simultaneously by nodes 2 and 1 during the second phase with duration t 2 ; Y 0 is the noisy superposition of those signals received by the gateway node.
(The quantity I(X; Y ) represents the channel capacity assuming that X and Y are the transmitted and received signals, respectively.)
In order to avoid node synchronization at the sample level, we assume that node 2 does not transmit during the second phase, i.e., X 2 = 0.
Moreover, node 1 has to also transmit its own packet during a third phase with duration t 3 .
Therefore, the achievable rate becomes:R = max t1,t2,t3 min {t 1 I(X 2 ; Y 1 )/(t 1 + t 2 + t 3 ), [t 1 I(X 2 ; Y 0 ) + t 2 I(X 1 ; Y 0 )] /(t 1 + t 2 + t 3 ), t 3 I(X 1 ; Y 0 )/(t 1 + t 2 + t 3 )} .
The rate R is maximized when the three terms are equal [12], i.e.:t 1 I(X 2 ; Y 1 ) = t 1 I(X 2 ; Y 0 ) + t 2 I(X 1 ; Y 0 ) = t 3 I(X 1 ; Y 0 ).
Assuming fixed transmission power P for all nodes, we have I(X 1 ; Y 0 ) = I(X 2 ; Y 1 ) = C(P ) with C(P ) given by (5) which gives t 3 = t 1 .
According to our propagation model, I(X 1 ; Y 0 ) is also equal to C(P ) and I(X 2 ; Y 0 ) = C(P/2 γ ).
Therefore, t 2 can be expressed as:t 2 = t 1 [I(X 2 ; Y 1 ) − I(X 2 ; Y 0 )] /I(X 1 ; Y 0 ) = t 1 (1 − C(P/2 γ )/C(P )).
Denote α = C(P/2 γ )/C(P ).
The achievable rate for nodes 1 and 2 becomes: R = t 1 I(X 2 ; Y 1 )/(t 1 + t 2 + t 3 ) = C(P )/(3 − α).
Since C(P/2 γ ) is loosely bounded as: 0 ≤ C(P/2 γ ) ≤ C(P ), we have 0 ≤ α ≤ 1 so that:C(P )/3 ≤ R ≤ C(P )/2 .
For a chain of 2 nodes with single-hop relaying, the achievable rate is equal to C(P )/3.
Therefore, the achievable rate based on TRP is always equal to or greater than the single-hop relaying case and the throughput improvement is up to 50%.
This result is obtained without any power allocation optimization.
Here, we extend the Turbo Relaying strategy to a chain of any size.
Our main result is summarized in the following theorem.Theorem 2: Define the coefficient α as the ratio between the capacities of a direct two-hop transmission and a singlehop transmission:α = C(P/2 γ ) C(P ) = log(1 + P/(2d) γ σ 2 ) log(1 + P/d γ σ 2 )(7)The rate R(1, F, N, 1, α) with Turbo-Relaying Protocol for parking lot topology is achievable if:R(1, F, N, 1, α) ≤ 2(1 + α) 3 C(P )/ F (2N − F )(1 + α) 2 + F (1 + α)(1 + 3α) − 2α 2 [1 − (−α) F ] × [1 + (−α) N − (−α) F ](8)Proof: We first determine an upper bound of the achievable rate and then a schedule that realizes this bound.1) Upper bound of the achievable rate: In order to accomplish fairness between the nodes, node 1 should transmit the information of the N nodes for each own packet transmission.
Node 2 should transmit the information of N − 1 nodes for each own packet, etc.
With spatial reuse F , any two nodes that belong to the first F nodes cannot transmit simultaneously.
In the best case, the remaining N −F nodes are scheduled amid the first F nodes' transmissions.
In contrast with the non cooperative case, the duration of the transmission varies with the position in the chain of the source node.
For node 1, the normalized time slot for its own packet is equal to 1.
For a packet of node 2, the normalized time slot for its own packet to transmit to node 1 is also equal to 1.
The information received by the gateway node amid this transmission is equal to α with α defined by (7).
Therefore, the time slot duration to transmit the necessary information such that the gateway node can decode the packet is reduced to 1 − α with TRP.
Following the same procedure, the duration to transmit the packet of source node 3 to the gateway node with TRP is equal to: 1 time slot to transmit from node 3 to node 2, 1 − α of a time slot to transmit from node 2 to node 1 and 1 − α(1 − α) = 1 − α + α 2 of a time slot to transmit from node 1 to the gateway.
Based on the same reasoning, it can be shown after some manipulations that the transmission of the messages ofthe first F nodes lasts F l=1 l k=1 (−α) k−1 (l − k + 1) = F 2 (1 + α) 2 + F (1 + α)(1 + 3α) + 2α 2 [1 − (−α) F ]/2(1+ α) 3 .
The transmission duration through the first F nodes of the remaining N − F nodes is calculated as follows.
The total slotted duration of the transmission through the last F nodes for the node F + k, k > 1 is equal toF k l=0 (−α) l + F +k−1 l=k+1 (−α) l (F − l + k).
After adding the durations for transmitting the packets of all nodes 1, 2, . . . , F − 1, F, F + 1, . . . , N , the total duration T (normalized in term of time slots) can be expressed as:T = F (2N − F )(1 + α) 2 + F (1 + α)(1 + 3α)+ 2α 2 [1 − (−α) F ][1 + (−α) N − (−α) F ] / 2(1 + α) 3 .
Since the capacity of each link is C(P ), the achievable rate per node is upper bounded by R ≤ C(P )/T .
2) Optimal Schedule: In order to construct a schedule that realizes this upper bound, we share the time T between the first F nodes that cannot transmit simultaneously as they are in interference range of each other.
Then, we show that during this cycle it is possible to find a schedule that forwards one message from each of the nodes F + 1, F + 2, . . . , N to reach F .
Since nodes F + 1, 2F + 1, 3F + 1, etc. can transmit simultaneously with node 1, we schedule them to transmit when node 1 is transmitting.
Hence, we schedule F + 1, 2F + 1, 3F + 1, etc. to transmit their own packet when node 1 is transmitting its own packet (the transmission duration is 1 for all these nodes).
Then, they forward the sufficient information of their respective one-hop neighbor (F + 2, 2F + 2, 3F + 2, etc.) such that their next hop neighbor (F, 2F, 3F , etc.) can decode it when node 1 is transmitting the information of node 2 to the gateway node.
The transmission duration is (1 − α)-time slot for all these nodes.
We follow the same reasoning to forward the packets of the nodes j, F + j, 2F + j, 3 ≤ j ≤ N , etc. through the nodes 1, F +1, 2F +1, etc.
The same procedure is applied to forward the packets through the nodes j, F + j, 2F + j, 3F + j, 2 ≤ j < F etc.An example of a schedule which realizes the bound for 8 nodes with spatial reuse F = 4 is shown in Figure 6.
We illustrate the throughput improvement of TRP.
We define the throughput gain G T RP (1, F, N, 1, α) vs. the single-hop relaying case as:G T RP (1, F, N, 1, α) = R(1, F, N, 1, α) − R(1, F, N ) R(1, F, N )(9)The asymptotic gain improvements are summarized as follows:lim N →+∞ G T RP (1, F, N, 1, α) = α (10) lim SN R→0,N →+∞ G T RP (1, F, N, 1, α) = 1/2 γ (11) lim SN R,N →+∞ G T RP (1, F, N, 1, α) = 1(12)In the low SNR regime, α ≈ 1/2 γ with γ pathloss exponent.
Assuming γ = 2, the throughput gain with TRP is at least 25% for all SNRs for large networks.
At high SNR, TRP doubles the throughput compare to the classical case.
Indeed, α = 1 corresponds to the fact that a node located two hops apart from a transmitting node can directly decode the received packet without any additional information.
In (5), we considered Gaussian signals.
However, it is interesting to evaluate the performance gains for constellations with finite alphabet, e.g., 4-QAM modulation.
As the achievable rates are proportional to the link capacity C(P ), the throughput improvement given by (9) can be expressed for any modulation.
In Figure 7, the throughput gain is depicted for Gaussian and 4-QAM signals.
The throughput gains are larger for 4-QAM signals than for Gaussian signals at any SNR, for any chain size and any channel pathloss exponent.
TRP (with constant power allocation) outperforms the conventional hop-by-hop relaying scheme with or without optimal power allocation at any SNR for any chain size.
In this section, we extend the Turbo-Relaying Protocol to an arbitrary m-ary tree network.
We shall not treat the optimal power allocation case since we showed that the gains are modest for chain topology.
The main differences with the parking lot topology are: (i) The spatial reuse is applied not only through the flow towards the access point but also through any other path of the tree, and (ii) Several flows converge simultaneously toward the same node.
We first determine the achievable rate per node when no cooperation between nodes is considered.Theorem 3: For upstream transmission in a regular tree network with connectivity degree m, N fully backlogged nodes, and spatial reuse F , the rate at any node, R(m, F, N ), is achievable if:R(m, F, N ) =        2C(P )m(m − 1) 2 / [N (m − 1) + m][m(F − 2) + 2] × (m − 1) + 2m F/2 (1 − 2m) + 2m 2 if F is even (m − 1) 2 C(P )/ {[N (m − 1) + m](m − 1)(F/2 − 1) −m F/2 + m if F is odd (13) Proof:In the first part we give an upper bound to the achievable rate, and in the second part we present a schedule that realizes the bound.
Fig. 8.
Illustration of the sets Sodd, S and Seven (= Sodd ∪ S ) for ternary tree.
Two cases: a) The spatial reuse factor F is odd (= 7).
The number of hops between any two nodes in the set Sodd is 6 at most which is strictly smaller than F , i.e., there is no transmission spatial reuse within nodes in the set Sodd.
b) The spatial reuse factor F is even (= 8).
The number of hops between any two nodes in the set Seven is 7 at most which is also strictly smaller than F , i.e., there is no transmission spatial reuse within nodes in the set Seven as well.
We define the following notation: The gateway node is denoted as node 0.
The remaining nodes are numbered using two indices, the first referring to the depth of the node in the tree, i.e., its distance from the gateway and the second to the position of the node within the layer.
The numbering within layers starts always from node 1 and continues counterclockwise within the layer.
Node 1 in the first layer is chosen arbitrarily; in the other layers, node 1 is defined as the left-most descendant of node 1 from the previous layer.
The set of nodes n (i,:) denotes all the nodes in the i-th layer, i.e., all nodes i hops away from the gateway node.We distinguish between the cases that F is even or odd, starting with F odd.
Define the set of nodes S odd as the set of all nodes belonging to the first ( F 2 − 1) layers, i.e. S odd = {n (i,:) |1 ≤ i ≤ F 2 − 1}.
In this set, the number of hops between any potential transmitter and receiver is smaller than F − 1, i.e., there is no transmission spatial reuse within nodes as illustrated in Figure 8 for F = 7.
Assuming fair rate allocation as defined in (3), each node in S odd forwards one packet of each of its descendants for each own packet.
The minimum number of packets that should be transmitted by the nodes in S odd is hence:K odd = N + (N − m) + · · · + (N − F/2−2 j=1 m j ) = (F/2 − 1) ((m − 1)N + m) (m − 1) + m − m F/2 (m − 1) 2In the case of even F , define the set S as the group of nodes belonging to layer F 2 and which are descendants of node n 1,1 , i.e., S = {n F 2 ,j |1 ≤ j ≤ m F 2 }, and denote S even = S ∪S odd .
The distance between any two nodes in S is smaller than or equal to twice the number of hops to node n 1,1 , i.e., 2( F 2 − 1), and the distance between a node in S to the farthest node in S odd is the distance from node i ∈ S to node 0 plus the distance from node 0 to a node in layerF 2 − 1, i.e., F 2 + F 2 − 1.
Therefore there is no spatial reuse in set S even .
An example with F = 8 is shown in Figure 8.
The number of packets that should be transmitted by the nodes in S such that each of their descendants transmit one packet is which gives:K even = K odd + (m − 1)N + m − m F/2 m(m − 1) = (m − 1) ((m − 1)N + m) (m(F/2 − 1) + 1) +m F/2 (1 − 2m) + m 2 · 1 m(m − 1) 2Since the capacity of each link is C(P ) and there is no spatial reuse within set S, the achievable rate is upper bounded by: R ≤ C(P )/K even or odd .
This completes the first part of the proof in which we determined an achievable rate upper bound.
Next, we present a schedule that can realize the bound.
By suggesting a schedule that achieves the rate C(P )/K, we only lower bound the rate since we have not shown that there cannot be a schedule that attains a higher rate.
However, since the upper bound matches the lower bound, the rate is exactly R = C(P )/K even or odd .2) Lower bound of the achievable rate: Here, we present a feasible schedule that bounds the achievable rate from below and shows that the rate is attainable.
Since the achievable rate is determined based on the maximum rate over all feasible schedules, a rate corresponding to any specific schedule is a lower bound.Denote by B (j,k) the subtree rooted at node n (j,k) , i.e., node n (j,k) itself and all of its descendants in the tree; e.g., B 0 is the complete tree and B (1,1) is the subtree with root node n (1,1) .
Denote by B (j,k) (l) the set of nodes belonging to subtree B (j,k) that are l hops from node n (j,k) .
Note that B (j,k) (l) defines the intersection between the subtree B (j,k) and the set of all nodes in layer j + l on the original tree, i.e., B (j,k) (l) ≡ B (j,k) ∩ n (j+l,:) .
Finally denote by |B j,k | the number of packets transmitted by all nodes in set B j,k .
Next we describe the schedule and show that in each cycle period a packet from each node in the network is delivered to the gateway and the distance between any two transmitters is greater or equal to F (no collisions).
As in the first part we distinguish between odd and even F .
Suggested Schedule for odd F :B (1,k) (l + iF ) 0≤i≤(L−l)/F , B (1,k+1) ((i + 1)F − l − 2) 0≤i≤(L−F +l+2)/F , B (1,k−1) ((i + 1)F − 1) 0≤i≤(L−F +1)/F if l = 0, 1 ≤ k ≤ m , 0 ≤ l ≤ F/2 − 2 (14)with the following conventions: k + 1 = 1 if k = m and k − 1 = m if k = 1.
An example optimal schedule is given in Figure 9 for a ternary tree with depth L = 11 and spatial reuse F = 5.
Fig. 9.
An example of optimal schedule for ternary tree as determined in (14).
The depth of the tree is L = 11 and the spatial reuse 5.
B (1,2) (0) B (1,3) (0) B (1,2) (2) B (1,3) (2) B (1,1) (2) B (1,2) (3) B (1,3) (3) B (1,1) (3) B (1,3) (4) B (1,1) (5) B (1,1) (4) B (1,2) (5) B (1,2) (4) B (1,3) (5) B (1,1) (6) B (1,2) (6) B (1,3) (6) B (1,2) (7) B (1,3) (6) B (1,1) (7) B (1,2) (8) B (1,3) (8) B (1,1) (8) B (1,2) (9) B (1,1) (9) B (1,1) (10) B (1,2) (10) B (1,3) (9) B (1,3) (10) layerWe schedule all groups for i = 0 sequentially starting with l = 0 cyclically going over all k and gradually increasing l until l = F 2 − 2.
Groups that share the same k, l indices but differ in i are scheduled simultaneously.
The number of packet transmission time slots each node is assigned coincides with the number of packets it has to forward such that it forwards one packet of its own and one for each of its tree successors, i.e., node n (i,j) receives |B (i,j) | packets.Next we show that in the suggested schedule a packet from each node arrives to the gateway.
Since each node is assigned exactly the number of time slots as the number of packets it has to forward, it is sufficient to show that all nodes are scheduled for transmission.
The set {B (1,k) (l)|1 ≤ k ≤ m , 0 ≤ l ≤ F 2 − 2} covers all nodes in the first F 2 − 1 layers.
The set {B (1,k+1) ((F − l) − 2)|1 ≤ k ≤ m 0 ≤ l ≤ F2 − 2} covers all nodes in layers F 2 until layer F − 1 and the set {B (1,k−1) (F − 1)|1 ≤ k ≤ m} covers the nodes in layer F ; all nodes in the first F layers are covered.
Since each set is scheduled to transmit with all sets that are iF layers away from it 0 ≤ i ≤ L F , all nodes in the network are scheduled for transmission.The set {B (1,k) (l)| ≤ k ≤ m , 0 ≤ l ≤ F 2 −2}which corresponds to the set S odd is scheduled sequentially (no spatial reuse).
Subgroups {B (1,k+1) ((F − l) − 2), B (1,k−1) (F − 1)| ≤ k ≤ m , 0 ≤ l ≤ F 2 − 2}are scheduled simultaneously with {B (1,k) (l)}, all belonging to different main branches of the tree.
Hence the distance between any two nodes belonging to different subgroups is greater than F hops.
The rest of the nodes scheduled at the same time are kept iF i ≥ 1 hops apart.
Consequently the distance between any two nodes transmitting simultaneously is greater than or equal to F .
The set of flows forwarded by B (1,k) (l + h) is only a subset of the flows forwarded by B (1,k) (l) hence |B (1,k) (l)| > |B (1,k) (l + h)| ∀h ≥ 1.
In addition, due to symmetry |B (1,k) (l)| = |B (1,k+e) (l)| ∀e, (k + e) (mod )m.Therefore, the duration of the schedule is determined by the set{B (1,k) (l)| ≤ k ≤ m , 0 ≤ l ≤ F 2 − 2}.
Thus, the duration of the schedule is equal to the sum of |B (1,k) (l)|, 1 ≤ k ≤ m , 0 ≤ l ≤ F 2 − 2 which is exactly K odd .
Hence the schedule rate is C(P )/K odd as in (13).
Since the upper and lower bounds coincide, the achievable rate is C(P )/K odd .
For the even case we use the same schedule as suggested in (14), adding one additional group scheduled subsequently to the other groups.
The added group is:B 1,k (F/2 + iF )| 1≤k≤m, 0≤i≤( 2L−F 2F )It is important to note that all main branches, 1 ≤ k ≤ m are scheduled simultaneously.
Moreover the distance between the nodes that belong to different subgroups is at least F hops, hence they can transmit without interfering with each other.
The rest of the proof follows the same procedure as in the odd case where S even replaces S odd ; it is omitted due to space limitations.Remark: the schedule for the binary tree is slightly different than the other cases since for k = 1 both indices k + 1 and k − 1 equal 2.
Both corresponding subgroups in the schedule coincide and cannot be scheduled simultaneously.
In [19], we suggest a slightly different schedule which also achieves (13) for m = 2.
We now extend the Turbo-Relaying Protocol to an m-ary tree.
The main result is summarized in the following theorem.Theorem 4: For the upstream transmission in a regular tree network with connectivity degree m and depth L with all N nodes fully backlogged, with a spatial reuse F , when all nodes transmit with the same power P and all single-hop links have the same capacity C(P ), the rate with turbo-relaying is achievable if:R(m, F, N, α) =                            m(m − 1) 2 (1 + α) 2 (1 + mα)C(P )/ [N (m − 1) + m] [(mF/2 − m + 1)(1 + α)(1 + αm)× (m − 1) + (−α) L+2−F/2 (m − 1) 2 [1 + α − mα× (1 − (−α) F/2−1 )] −(1 + α) 2 m F/2 (2m − 1) − m 2 if F is even (m − 1) 2 (1 + α) 2 (1 + mα)C(P )/ [N (m − 1) + m] [(F/2 − 1)(1 + α)(1 + αm)(m − 1)+ (−α) L+3−F/2 [1 − (−α) F/2−1 ](m − 1) 2 −(1 + α) 2 (m F/2−1 − 1) if F is oddProof: First we give an upper bound to the achievable rate, and second we present a schedule that realizes the bound.1) Upper bound of the achievable rate: As in Theorem 3, we consider the set S odd as the set of all nodes belonging to the first ( F 2 − 1) layers for odd F and for F even, the set S even as the union of the set S odd and B (1,1) (F/2 − 1).
In both cases, F even or odd, two nodes that belong to S odd (resp.
S even ) can simultaneously transmit since they are at most F − 1 hops apart (cf. Figure 8).
As in the hop by hop relaying case, an upper bound of the rate of any node in the tree is determined by the total transmission duration needed to transmit at least one packet of all nodes of the tree through the nodes in S even or odd .
We first determine the transmission duration of one node which belongs to S in layer l.
The transmission for a source node in l + k layer to its upstream one hop neighbor in layer l + k − 1 is equal to one time slot as it is without TRP.
From the latter node to his neighbor in layer l + k − 2, only (1 − α) time slot is necessary with TRP, α being defined in (7); from the latter node to his neighbor in layer l + k − 3, only (1 − α + α 2 ) time slot is necessary, etc.
Based on the same reasoning, the transmission duration to transmit the necessary information of a node that belongs to layer l + k from node in layer l to its one-hop neighbor in layer l − 1 is equal to k i=0 (−α) i .
A node in layer l has m k descendant nodes in layer k + l. Therefore, in order to transmit the information of all its descendant nodes in addition to its own information, a node in layer l requires L−l k=0 m k k i=0 (−α) i time slots.
Since two nodes that belong to S cannot transmit simultaneously, the total duration K to transmit one packet per node for all nodes in the tree to the gateway node is at least: K = conventional hop by hop relaying as a function of the signal-to-noise ratio for several connectivity degrees m.
The throughput gain with TRP is greater than 50% at SNR= 10 dB and greater than 80% at 30 dB for any m ≥ 2.
Throughput improvement is higher as the connectivity degree of the tree increases.
In all cases, the channel pathloss exponent is equal to 2 with spatial reuse F = 4.
Since the capacity of each link is C(P ), the achievable rate is upper bounded by: R ≤ C(P )/K odd or even .
This completes the first part of the proof in which we determined an upper bound of the achievable rate.
Next, we present a schedule that can realize the bound.2) Lower bound of the achievable rate: We adopt the same basic schedule given by (14) and described in Figure 9 to provide the achievable rate lower bound which coincides with the upper bound.
The basic difference between both schedules is that in the non cooperative case, we could schedule the nodes in each subgroup B 1,k (l) ∀l sequentially and still realize the upper bound.
For the cooperative case, in order to realize the achievable rate upper bound we have to further exploit the spatial reuse within the subgroups B 1,k (l) l > F 2 .
In [19], we propose a schedule that realizes the achievable rate upper bound.
Here, we illustrate the throughput improvement with turborelaying.
For the parking lot, the TRP throughput gain over single-hop relaying is given by: Figure 10 shows G T RP (m, F, N, α) as a function of the noise level for several connectivity degrees.
In all cases, the tree depth is 8 with spatial reuse F = 4.
The larger the connectivity degree of the tree, the higher the throughput improvement.
The gap between the parking lot and the cases with connectivity degree greater than or equal to 2 is due to better spatial reuse between the subtrees in the latter cases as discussed in Theorem 4.
The throughput gain with TRP is larger than 50% at SNR= 10 dB and more than 80% at 30 dB for any m ≥ 2.
G T RP (m, F, N, α) = R(m, F, N, α) − R(m, F, N ) R(m, F, N )(15) We proposed the Turbo-Relaying Protocol to increase each node's throughput of upstream transmission in tree topologies.
Whereas power optimization leads to a near-zero throughput gain compared to the basic case of multihop hop-by-hop transmission with fixed power allocation, we showed that our approach can achieve 80% throughput gain for any regular tree with any connectivity degree.
