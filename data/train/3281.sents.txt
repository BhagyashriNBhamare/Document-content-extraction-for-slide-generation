This paper presents PinPoint, a technique for localizing rogue interfering radios that adhere to standard protocols in the inhospitable ISM band without any cooperation from the interfering radio.
PinPoint is designed to be incrementally deployed on top of existing 802.11 WLAN infrastructure, and used by network administrators to identify and troubleshoot sources of interference which may be disrupting the network.
PinPoint's key contribution is a novel algorithm that accurately computes the line of sight angle of arrival (AoA) and cyclic signal strength indicator (CSSI) of the target interfering signal at all APs, even when the line of sight (LoS) component is buried by stronger multipath components, interference and noise.
PinPoint leverages this algorithm to design an optimization technique, which can localize interfering radios and simultaneously identify the type of interference.
Unlike several localization techniques which require extensive pre-deployment calibration (e.g. RF-Fingerprinting), PinPoint requires very little calibration by the network administrator, and uses a novel algorithm to self-initialize its bearings, even if the locations of some AP are initially unknown and are oriented randomly.
We implement PinPoint on WARP software radios and deploy in an indoor testbed spanning an entire floor of our department.
We compare PinPoint with the best known prior RSSI [8, 11] and MUSIC-AoA based approaches and show that PinPoint achieves a median localization error of 0.97 meters, which is around three times lower compared to the RSSI [8, 11] and MUSIC-AoA based approaches .
Interference is the number one cause for poor wireless performance.
All of us have had anecdotal experiences, where, even though the AP is quite close, we experience poor performance and more often that not, interference is to blame.
Yet, in spite of these pervasive problems, we often know very little about where this interference is coming from.
We do not know the nature of the interfering radio (e.g. whether it is another WiFi network, Bluetooth or Zigbee), neither do we know where it is located.
Without such localization, troubleshooting performance problems becomes hard.One might imagine that we could leverage the extensive prior work [4,8,11,15,20,21,22,23,24,25] that has tackled indoor localization.
However, none of it is applicable to localizing interfering radios.
First, most of them are RSSI based and work typically with WiFi, i.e. they measure the RSSI of the WiFi signal from multiple vantage points, and then leverage propagation models and triangulation techniques to localize.
However, when localizing interference, the source could often be a non-WiFi radio.
Further, its unlikely we can get a good estimate of the interfering signals RSSI because there could be multiple signals present from concurrent transmitting radios.
Another class of RSSI techniques requires extensive RF fingerprinting of the indoor environment.
However these techniques do not work under interference either since the RSSI fingerprints will be distorted when there are multiple concurrent transmissions.
Further, these techniques are expensive to deploy since they require constant and recurring site fingerprinting.
Another class of techniques [16,17,18,19,24] use non-RSSI based techniques such as range-finding and time of arrival, however all of them require modifications to and cooperation from the client radio (e.g in the form of special beaconing hardware), which is untenable when we are trying to localize an interferer not under our control.In this paper we present PinPoint, a system that computes the nature as well as the location of the interfering radio(s) with sub-meter accuracy.
PinPoint is robust, it can localize each interfering radio even when multiple interfering radios may be transmitting concurrently.
Furthermore, PinPoint's accuracy is at least two times better as compared to RSSI based techniques even when no interference is present.
Hence even though PinPoint's design is motivated by the scenario of localizing interference, it provides a general indoor localization technique that works across a wide variety of scenarios.
The system consists of an indoor AP infrastructure with PinPoint capability, of which a small subset ( 3 − 5 per floor of a large department building) are anchor APs that already know their absolute indoor location.
The PinPoint APs work together to detect and localize interfering radios.
PinPoint assumes no co-operation from the interfering radio, works with legacy client radios, and it does not assume any knowledge of the protocol, power or the spectrum at which interfering radios are transmitting.
Further, PinPoint does not require any expensive calibration or surveying, either at installation or in subsequent operation.
We believe this combination of accuracy, robustness and generality is a first.PinPoint's key contribution is a novel algorithm that ac- [2] to identify and separate out multiple sources of interference.
PinPoint then uses this information to build a novel algorithm which detects the LOS AoA, even when it is buried by stronger multipath reflections.
Finally, PinPoint leverages the LOS AoA at individual APs by aggregating all of the measurements at a central server and solving an optimization algorithm which triangulates the source of interference.curately computes the LoS AoA and the signal strength (CSSI) of only the target interfering radio signal at all APs where the LoS component is at least barely perceptible (i.e. its signal strength is at least −10dB relative to the strongest path).
Once the LoS AoA and the corresponding CSSI is estimated at a few of the APs, PinPoint runs an optimization algorithm based on triangulation to compute the exact location.
Computing the LoS AoA and CSSI in practice, however, is challenging because of two inherent environmental factors.
First, since we have no control over the interfering radios, the APs could be receiving signals that consist of contributions from multiple interfering radios, potentially using different physical layer protocols.
Second, radio signals bounce off walls and other objects, and create numerous multi-path components that arrive at the AP at a variety of angles.
Often, the strongest component of the received signal will be a reflection and the LoS component might be weak due to obstructions.
Hence, PinPoint's algorithm has to disentangle the LoS AoA and CSSI in spite of these factors that make the signal look like it is coming at the AP from a variety of sources and a variety of angles.Our key insight is that both multipath and angles of arrival manifest themselves as relative delays between copies of the same signal arriving at an AP from the target radio.
For example, since the LoS component will have the shortest path to the AP, it will arrive before any reflected component.
Similarly, a signal arriving at a particular AoA at an AP, will arrive at slightly different times at the different antennas in a multiple antenna AP because the signal has to travel slightly different distances.
We design novel algorithms based on cyclostationary signal analysis [2,1] that can exploit these relative delays.
Specifically we isolate the LoS component by finding the relative delay between the first time we see a signal and when its reflection arrives.
Next, we find the relative delays at which the isolated LoS component arrives at different antennas at the AP, and from that infer the AoA of the LoS component.
The cyclostationary signal analysis also allows us to accurately infer the signal strength of the target interfering radio without much contribution from the noise and signal sources that do not bear the same cyclic signature as the interfering radio, we will refer to this as CSSI in the rest of the paper.PinPoint's main conceptual contributions are novel algorithms to accurately, efficiently and robustly extract these relative delays and LoS AoAs and CSSI measurements from noisy interfered signals.
As far as we are aware, no prior localization technique has been able to isolate and compute accurate LoS estimates in the presence of severe multipath and interference.
We implement PinPoint using standard WARP software radios [6] equipped with 4 antennas as the RF hardware.
We evaluate PinPoint using testbed experiments in an indoor environment with typical multipath and interference and compare it against the state of the art RSSI based approach [8,11] and MUSIC-AoA algorithm.
We find that:• PinPoint is significantly more accurate than both the RSSI and MUSIC-AoA approaches.
In our testbed experiments PinPoint's median error is 0.97 meters, while the RSSI and MUSIC-AoA approaches achieve median errors of 3.35 meters and 2.94 meters respectively.
• PinPoint is even more accurate when there is no secondary interference and a single target radio is being localized, it achieves a median error of 0.83 meters, while the RSSI and MUSIC-AoA approaches achieve 2.32 meters and 2.9 meters respectively.
Thus even though PinPoint's original design goal was to localize interference, it provides a general and accurate technique for all localization problems.
• PinPoint works accurately even if the AP deployment is sparse.
In our testbed, by default we used five APs to cover an entire floor (this was the number recommended by our network manager to provide WiFi coverage for the floor).
However, we found that even if we used only three APs, PinPoint still achieves a median error of 1.76 meters, thus providing good accuracy even in sparse deployments.Finally, while PinPoint has significant advantages over RSSI based approaches, it does require that the APs perform extra DSP computation to calculate LoS AoAs and CSSIs.
While this does not require any extra RF hardware (such as filters, synchronization circuitry etc), it does require extra compute horsepower at the APs.
RSSI based approaches do not, they can directly use the RSSI estimate from the AP.
We believe this cost is modest, in fact, Cisco has started adding similar interference detection (but not localization) capability to its enterprise APs, and given the unique features PinPoint provides, the extra cost is quite reasonable.
Fig. 1 shows the overall PinPoint architecture.
PinPoint assumes that it is deployed on multiple antenna APs (4 antennas are sufficient in our current prototype).
Further, we assume that a small number of the APs (3-5) act as anchor nodes and know their absolute location.
Both these assumptions are easily satisfied, almost all new AP deployments use MIMO APs with at least four antennas [7], and finding the location at the time of deployment for a few APs (e.g. the ones near a window where GPS works) is relatively straightforward.
To localize interfering radios, PinPoint has to deal with two major challenges • Most likely, we are not going to have a priori knowledge about the interfering radios.
We cannot assume we know their transmit power, the frequencies or even the protocol they are using (e.g. WiFi, Bluetooth, Zigbee etc).
Further, we cannot ask these radios to send special beacon packets for localization when we need them to.
Consequently existing RSSI based techniques are difficult to apply, under interference even measuring the RSSI of an individual radio's signal is hard.
• In indoor environments, where PinPoint is likely to be employed, a localization system has to deal with multipath effects and the lack of strong LoS paths between the radios and the APs.
Specifically, an interfering radio may not have a visual LoS path to any AP (e.g. the AP is outside your office).
Further, in the ISM band radio signals will bounce off walls and other objects and arrive at the AP from multiple directions.PinPoint deals with both these challenges and is more accurate than any existing localization system under these scenarios.
At a high level, PinPoint's localization algorithm proceeds with the following steps:1.
Identify the source of interference: PinPoint takes the received signal and first identifies the nature of the interfering radio (e.g. whether it is WiFi, Bluetooth or Zigbee).
To do so, PinPoint builds upon prior work (DOF) in interference identification [2] to discriminate between the signals of different interference types.
2.
Compute the Line of Sight Angle of Arrival (LoS AoA) For Each Interfering Source: PinPoint next computes all the AoAs at which the interfering radio's signal is arriving at an AP.
PinPoint uses a novel technique to compute the AoA of only the LoS component of a radio signal, even when the LoS path is obstructed.
PinPoint does not compute AoA corresponding to the non-LoS paths, which are not useful for localization, thus reducing computation power compared to methods like SAGE [5].
3.
Compute the Cyclic Signal Strength Indicator (CSSI) for each interfering Source: PinPoint also computes the signal strength of only the interfering sources that have been identified in step 1.
4.
Localize the interfering radio: PinPoint then collects the LoS AoA and CSSI measurements from multiple APs in the deployment, and runs a triangulation based optimization algorithm to compute the location of the interfering radio.
Note that this requires that we know the location of the APs themselves in advance, however requiring that the operator measures the absolute location of all the APs during deployment is cumbersome.
Instead, PinPoint leverages the above techniques to localize the APs themselves at the time of deployment.
PinPoint only requires that we know the location of a few (typically 3-5 suffice) anchor APs at the time of deployment.
Such computed AP locations are then used in the localization of interfering radios.For step 1, PinPoint builds on prior work (DOF) in interference identification based on cyclostationary signal analysis [2], while this paper designs novel algorithms for the other three steps.
In the next section, we describe how the first three steps above are performed, followed by a discussion of the localization algorithms in Sections 4 and 5.
even when it is obstructed, is the first to impinge on the AP.
But when there are reflected paths which are stronger (NLOS scenario), they can mask the LOS component reflections.
PinPoint applies novel techniques to detect this LOS component, even when it is >10dB weaker than the reflected paths.
PinPoint's design is based on the insight that multipath effects and different AoAs manifest themselves in relative delays at which the signal arrives at the AP.
For example, a multipath environment shown in Fig. 2 results in signal reflections, and thus the AP receives multiple copies of the signal at different delays depending on the relative delay between the different paths.
However, the LoS component (even if it passes through an obstruction) will have the shortest path to the AP and hence will arrive first, assuming the obstruction does not completely block the signal.
It may be weak however, relative to some unobstructed multipath reflection.
Thus there will be a relative delay between the LoS component (which might be relatively quite weak) and the first multipath reflection component.Similarly, different angles of arrival manifest themselves as relative delays at which the same signal arrives at different antennas.
Fig. 3 demonstrates the idea for a linear multiple antenna array.
Since the antenna #1 is a bit further away than the antenna #2 for the given AoA, the signal hitting the antenna #2 will take a little bit longer to hit the antenna #1 and so on.
Thus if one knew the relative delay that a signal component took between impinging on two consecutive antennas, we can infer the AoA of that signal component.Based on the above geometrical insights, we invent a novel algorithm for identifying the angle of arrival of the line of sight component of a signal.
The algorithm proceeds in two steps• First, it isolates the component of the signal that corresponds to the LoS path by leveraging the insight that this will be very likely the first component to arrive at the AP.
• Next, it repeats the above step at each antenna at the AP, and then correlates the isolated LoS components across all the antennas with each other to infer their relative delay, and thus the AoA corresponding to that component.
By construction, this will corre- spond to the AoA of the LoS component.Our first goal therefore is to isolate the LoS component of the signal by exploiting the insight that it will be the first to arrive at the AP.
However, there are several challenges to accomplish this step.
First, the AP does not know the interfering signal, as it does not know what data is encoded, what rate it is sent at, what modulation is used and so on.
Hence relying on such properties to identify the LoS component is not possible.
Second, the LoS component may be too weak due to obstructions, or interfered by other signals.To tackle this challenge, PinPoint exploits signatures that result from hidden repeating patterns in the signal obtained by cyclostationary signal analysis.
The signatures are robust as they can be detected even when the signal is very weak [1], or even when it is interfered with [1].
As discussed before, PinPoint builds on DOF [2], an interference identification system based on cyclostationary signal analysis.PinPoint then designs novel algorithms that leverage these cyclostationary signatures to determine the LoS AoA and CSSI, even in severely obstructed environments dominated by multipath components or under heavy interference.
PinPoint exploits the knowledge of the signal types to correlate known signatures with the received signals.
Note that this does not imply that we know the interfering signal's contents, only that we know how the underlying structure of the signal has patterns independent of the information that the signal is carrying.In the following section, we'll describe the above process in detail.
We will begin by providing a quick primer on how the hidden repeating patterns within wireless signals can be leveraged to form unique signatures for every signal type [2].
We will then explore how these signatures can be exploited to determine the LOS AoA and CSSI.
We start with a more formal description of how both multipath and different angles of arrival manifest themselves as relative delays between copies of the same signal arriving at the AP.
This description is well known, but serves to set up the context in which PinPoint operates.The scattering caused by the indoor environment causes each signal to traverse multiple paths to our APs.
The multipath arrivals are shifted and scaled copies of the same signal, occurring at varying angles and delays.
We can explicitly model the total signal impinging on a single antenna at our AP asy 1 (t) = L ∑ k=1 s k (t) + n 1 (t) (1)where L is the number of multipath components, n 1 (t) represents additive noise at the antenna, ands k (t) = α k s(t − d k )e 2πi f c (t−d k )(2)represents each multipath component, where s(t) is the transmitted signal, α k ∈ R is the attenuation for each arriving path, d k is the time delay of each path, and f c is the carrier frequency used in the transmission.Assuming each AP has multiple antenna, the delays in propagation paths between each of the antennas enables us to measure the varying angles of each multipath component.
The delay is a function of the antenna arrangement and for exposition simplicity, we consider a Uniform Linear Array (ULA), which is an array that has all of its antennas on a line with equal half-wavelength ( λ 2 ) spacing between the antennas.
In the ULA configuration, the signal arriving at the i th antenna has a difference in propagation path that results in a time delay of (i − 1) λ sin θ 2c , where c is the speed of propagation through the medium.
The output of the antenna array in response to the L multipath signals can be expressed as,y 1 (t) = ∑ L k=1 s k (t) + n 1 (t) y 2 (t) = ∑ L k=1 s k (t)e j2π f c λ sin θ k 2c + n 2 (t) . . . y M (t) = ∑ L k=1 s k (t)e j2π f c (M−1) λ sin θ k 2c + n M (t)This can be written is vector form as,y(t) = L ∑ k=1 s k (t)a(θ k ) + n(t),(3)where y(t) ∈ C M is the received vector, n(t) ∈ C M is the noise vector, and a(θ ) is the steering vector of the array given bya(θ ) = 񮽙 e 0 e j2π f c λ sin θ k 2c ... e j2π f c (M−1) λ sin θ k 2c 񮽙 T .
PinPoint builds on DOF [2], an interference identification system that leverages the hidden and repeating patterns that are unique and necessary for operation and are present in all wireless protocols.
DOF builds on prior work in cyclostationary signal analysis [1] and leverages the following idea from that work: if a signal has a repeating pattern, then if we correlate the received signal against itself delayed by a fixed amount, the correlation will peak when the delay is equal to the period at which the pattern repeats.
Specifically, let's denote the raw signal samples we are receiving by x [n].
Consider the following functionR α x (τ) = ∞ ∑ n=−∞ x(n)x * (n − τ)e − j2παn(4)For an appropriate value of τ corresponding to the time period between the repeating patterns, the above value will be maximized, since the repeating patterns in x[n] will be aligned.
Further, these peak values occur only at periodic intervals in n. Hence the second exponential term e − j2παn is in effect computing the frequency α at which this hidden pattern repeats.
We define such a frequency as a pattern frequency, and (4) is known as the Cyclic Autocorrelation Function (CAF) [1] at a particular pattern frequency α and delay τ.
The CAF will exhibit a high value only for delays and pattern frequencies that correspond to repeating patterns in the signal.Because each wireless protocol utilizes a different set of parameters (encoding, modulation, etc.), each protocol exhibits a unique set of repeating patterns and therefore have unique signature CAFs.
Hence, DOF uses machine learning heuristics to uniquely identify different signal types.
We omit the details of how DOF accomplishes this for brevity and refer the reader to [2] for a more detailed description.
For our purposes it suffices to know that PinPoint uses DOF to identify the signal type.
You can see that even when the direct LOS component is more than 10dB weaker than the strongest multipath component in (A), PinPoint is still able to detect the LOS AoA.
When the LOS AoA is stronger, it is of course easier to detect and PinPoint does well in these scenarios as expected.
The challenge is to identify the LOS component (s 1 (t)) and its corresponding AoA (θ 1 ) even when it is significantly weaker than the multipath components.
To do this, PinPoint leverages what is already known -specifically the type of interfering source and thus the pattern frequencies at which the signatures repeat, enabling us to create a test signature.
PinPoint has a set of test signatures corresponding to the expected set of interfering radios (e.g. one signature for 802.11, another for ZigBee, etc.) which exhibit features at the corresponding pattern frequencies for each protocol.
Note that these signatures do not assume that the data in the target interfering signal is known, they are merely creating a dummy signal which has the same repeating patterns as the identified signal type.
Further, there is a different test signature for each pattern frequency.
In other words since WiFi exhibits hidden repeating patterns at several pattern frequencies, there is a separate test signature for each pattern frequency in WiFi.Once the type has been identified by DOF, it is cross correlated against the corresponding signature for a particular pattern frequency.
Specifically, we can calculate the cross correlation between our target signal y i (t) and our test signature s T (t) using the following function [10]:R α y i s T (τ) = ∞ ∑ t=−∞ y i (t)s * T (t − τ)e −i2παt(5)Unlike the CAF, the Cyclic Cross Correlation Function (CCCF) peaks at values of τ corresponding to the relative delays between the multipath components.
The reason is because the multipath signal is a linear combination of copies of the same signal shifted in time due to reflections.
When the test signature is aligned with one of the multipath components, in effect the hidden repeating patterns in the signature and the received signal align and the CCCF peaks.
Thus the first peak in the CCCF will be for the signal component that is received first, i.e. likely the LoS component, the next peak is for the first reflected component and so on.
The relative distance between the peaks thus corresponds to the relative delays between multipath components.
The benefit of using the CCCF is that it provides robust detectable peaks even when the received signal is very weak or interfered with, because the hidden repeating patterns allow us to integrate and eliminate the uncorrelated noise and interference to produce a robust peak.When we apply the CCCF to the all signals of the antenna array, we obtain a function which is dependent on the pattern characteristics (τ), the delay between the multipath components (d k ), and the angles at which each path impinges (θ k )R α y i s T (τ) = L ∑ k=1 β k R α s T s T (τ − d k )a(θ k ),(6)whereβ k = α k e −πiαd k e −2πi f c d k .
We leverage this fact to form a residual function which is a function of both the delay and the angle of arrival:res α k (τ, θ ) = M ∑ m=1 񮽙 񮽙 񮽙 񮽙 񮽙 R α y m s T (τ) R α y k s T (τ) − a m (θ ) a k (θ ) 񮽙 񮽙 񮽙 񮽙 񮽙 2 , k = {1, ..., M}.
(7)Observe that in (6), the delays (τ) at which the function typically peaks at are shifted by the physical propagation delay experienced by each multipath component d k .
Thus when τ = d k , the first term in the residual function, We can leverage this insight to form an optimization problem that computes the LoS AoA.
Specifically, if we solve Fig. 4 shows the result of this optimization.ˆ θ 1 = argmax {(τ,θ ):τ min ≤τ≤τ max ,θ min ≤θ ≤θ max } 1 ∑ α ∑ M k=1 res α k (τ, θ )(8) The above optimization provides a noisy estimate of LoS AoA and its relative delay.
In order to minimize the uncertainty, PinPoint performs the optimization (8) separately over multiple packets received from the same source.
By running PinPoint over time for different sequences of data, we can build sets of relative delay and AOA pairs.
We found empirically that these sets can be clustered to find an accurate estimate of the LoS AoA, if it exists and is perceptible (i.e. if it has a signal strength of at least -10 dB).
However, if the LoS component is extremely weak (less than -10dB signal strength) perhaps because of a strong obstruction, we found that the computed relative delays and AoAs do not cluster and are all over the place.
PinPoint leverages this insight to eliminate signals where a perceptible LoS component does not exist.Algorithmically, we use a clustering technique based on Gaussian mixture models.
Results of this clustering for various scenarios are shown in Fig. 5.
After clustering, PinPoint checks if there are multiple clusters, and then calculates the mean and standard deviation for each cluster.
Prioritizing the minimization of false positives, we discarded clusters which did not possess a minimum number of data points and clusters with AoA standard deviation above a certain threshold.These steps are not necessary for the operation of PinPoint but helps to fine-tune the AoA estimates.
Of the remaining clusters, the mean AoA corresponding to the cluster which has the smallest relative delay is declared to be θ 1 , the AoA of the direct LOS component.
Indicator (CSSI)PinPoint leverages cyclostationary analysis to compute the signal strength of only the target interfering radios.
This is different from traditional RSSI, those techniques will not work in our context because in the presence of interference those techniques cannot measure the RSSI of the different constituent signals making up the interference.
PinPoint on the other hand can leverage its ability to isolate the target interfering signal using cyclostationary signal analysis (the CAF and the CCCF functions), and then use the correlation values themselves as a proxy for the relative strength of that signal arriving at different APs.
Note that the stronger the target signal , the higher the correlation value.
Hence instead of trying to measure the agggregate signal strength, we can simply use the correlation values at different APs to represent the strength contributed by only the target interfering radio.
We call this correlation value cyclic signal strength indicator (CSSI).
Plugging the relative delay of the LOS component τ into eq.
(5) and taking the magnitude of R α y i s T (τ) gives us a value that is a proxy of the signal strength of the target radio, which PinPoint can use to further constrain its localization search as we'll show in the next section.
Note that for localization we do not need to know the actual RSSI as long as the value we use as a proxy exhibits the same attenuation pattern as RSSI.
PinPoint's localization only needs to compare the relative RSSI across multiple APs, and for that the proxy computed above suffices.
PinPoint collects the LoS AoA and RSSI measurements from multiple APs in the enterprise deployment, and runs a triangulation based optimization algorithm to compute the location of the interfering radio.The challenge is that the above process implicitly assumes that we know the location of the APs themselves.
However, enterprise WiFi networks often consist of tens to potentially several hundreds of APs.
Providing the precise location of each AP is cumbersome since GPS signals are unreliable indoors and orientation is similarly tricky since most APs are not equipped with compasses.
At best, the position and orientation information that is gathered for the central controller will certainly not be optimized and most likely will be ill-defined.
Given that each AP could potentially have a varying frame of reference, and an imprecise knowledge of its own location -the ability to measure LOS AoA components is useless in localizing an interfering radio.To overcome the calibration problems associated with a large scale deployment of APs, PinPoint leverages the LOS AoA measurement capability to first localize and orient the APs themselves.
By doing so, PinPoint minimizes the burden placed on the network administrator as they no longer have to ensure that all of the APs are perfectly positioned and oriented.
We do assume however that we know the location and orientation of a small number (typically 3-5 per floor) of APs (referred to as anchor APs), either via GPS or manual calibration by the network ad-ministrator.
Note that this requirement is not unusual and is relatively easy to satisfy, for example, it is possible to localize a few APs that are near a window with GPS .
Further, this is a one-time requirement at the time of installation, and does not require repeated surveying unlike some prior techniques [12,13,14].
To demonstrate how a typical enterprise network would be calibrated, we consider a deployment which consists of n APs.
We assume that l of the APs (the anchor APs) already know their locations and orientations.
We define N (i) as the set of neighboring APs within the detection range of the i th AP.
Each AP is equipped with ULA and has ability to measure AoA α i j relative to its own axis from neighboring APs in N (i).
The orientation h i of each AP is the angle made by its axis to the x-axis.
If the estimate of the orientation and location [h i x i y i ] of the i th AP and the location of the j th AP [x j y j ], where j ∈ N (i), are known, estimate of the AoA ¯ α i j , can be computed as ¯α i j = Ψ([h i (x j − x i ) (y j − y i )] T ).
Where the function Ψ : R 3 → R computes angle formed by the vector [x y] T with the axis of an ULA located at the origin that has orientation h.We form penalty Φ(α i j − ¯ α i j ) for each AP pairs i and j that are in communication range of each other.
Here Φ : R → R is a penalty function of the form Φ(u) = |u| p ,where p ≥ 1 [3, §6.1.2], for the residue between the measured angle α i j and the estimated angle ¯ α i j .
The i th AP can also compute cyclic RSSI p i j for signal arriving from the neighboring j th AP, where j ∈ N (i).
Given distance d i j between the i th and the j th AP, the cyclic RSSI can be computed using standard path loss model as ¯ p i j = β i − 10γ i log d i j .
Where β i is a constant that is dependent on the environment of the i th AP and γ i is the path loss exponent.
Since exact distance d i j is not known a priori, we form penalty Φ(p i j − ¯ p i j ) for each AP pairs i and j that are in communication range of each other.To find the location of APs, we solve the following optimization problem,minimize ∑ i (∑ j Φ(α i j − ¯ α i j ) + λ ∑ j Φ(p i j − ¯ p i j )) subject to [h n+k x n+k y n+k ] = [c k a k b k ], k = {1,..., l} Ψ([h i (x j − x i ) (y j − y i )] T ) = ¯ α i j , ¯ p i j = β i − 10γ i log d i j , i = {1,...,n + l}, j ∈ N (i)(9)where the variables are x, y, h, β , γ with dimension R n+l .
The problem data a, b and c with dimension R l are the known x-location, y-location, and the orientation of the anchor APs.
And the data α i j and p i j are the AoA and cyclic RSSI measurements by each APs.
The above optimization problem is non-convex therefore we solve it approximately using Sequential Convex Programming (SCP) [26].
At each iteration of SCP we will fit the nonconvex function Ψ and ¯ p i j to some convex function within a trust region and then solve the resulting convex optimization problem to obtain a locally optimal solution.
At the end of each iteration step, trust region will be updated and the convergence of the algorithm will be evaluated.
Once the APs have been calibrated, the respective locations and orientations of every AP in the network is known.
Localizing an interfering radio is now relatively straightforward.
PinPoint leverages its knowledge of the signal type, direct line of sight AoA and cyclc RSSI to localize sources of interference.In order to localize an interfering radio, PinPoint relies on the local measurements from APs near the source of interference.
These APs measure the LOS AoA and cyclic RSSI and send the measurement results back to a central server.
The server then aggregates the data, averages it over time to weed out noisy measurements, and triangulates the source of interference with the following optimization problem to find the location of the target radio.minimize ∑ j Φ(α jm − ¯ α jm ) + λ ∑ j Φ(p jm − ¯ p jm subject to [h j x j y j ] = [c j a j b j ], Ψ([h j (x m − x j ) (y m − y j )] T ) = ¯ α jm , ¯ p jm = β j − 10γ j log d jm , j ∈ N (m)(10)where the interference radio whose location [x m y m ] T has to be estimated is seen by N m = |N (m)| APs.
x, y with dimension R N m +1 and h ∈ R N m are the optimization variables.
The problem data c, a, b with dimension R N m are the estimated orientations and locations of the APs that detect the interference radio.
Although this problem formulation is similar to the problem (9), the size of optimization variable in this case is much smaller than the size of the optimization variable in problem (9).
As a result, interfering radio sources can be localized within seconds, enabling network operators to quickly diagnose and troubleshoot sources of interference within their networks.
In this section, we evaluate the localization accuracy of PinPoint in an indoor testbed and determine how different factors such as calibration offsets, signal SNRs, and overlapping sources of interference effect performance.
Below we first summarize our findings:• PinPoint is robust and accurate, it's median error is 0.97m, around three times lower than the 3.35m and 2.94m median error for RSSI and MUSIC-AoA based approaches in our testbed across all scenarios (with and without interference).
Further, PinPoint is significantly better in the tail, its 80 th percentile error is approximately 1.75m whereas for the RSSI and MUSIC-AoA based approaches it can be as high as 7m.
Note that PinPoint can localize even though it has no information about the target radio, such as protocol, transmit power, spectrum used, data formats etc.
Several prior RSSI based approaches require such a priori information to work accurately.
• PinPoint is even more accurate when there is no interference (median error of 0.83m), whereas the RSSI and MUSIC-AoA based approaches achieve 2.32m and 3.06 respectively.
Thus even though PinPoint is designed to localize interference, it provides a general and accurate localization technique for all scenarios.
In scenarios where there is interference, PinPoint's median error is 1.05m, while the RSSI approach worsens to a median error of more than 4m because it is unable to accurately measure RSSI under interference.
• PinPoint achieves its high accuracy assuming typical WiFi AP densities (we used the same deployment locations as the ones used by our WiFi network manager).
Further, we found that even if AP density is reduced, i.e. instead of the 5 APs used to cover the full floor of 15000 sq. ft. we use only 3 APs, PinPoint can still localize accurately achieving a median error of 1.76m.Compared Approaches: We compare PinPoint against the state of the art RSSI based approach [8,11,14].
Further, to make a fair comparison, we allow the RSSI based approach to know the interferer transmit power, even though in practice this may be hard to achieve since the interfering radio could be using a different modulation format (e.g. Bluetooth, Zigbee) and whatever transmit power it is capable of without the AP knowing it.
Note that we do not compare against any approach that requires modifying the clients since one of our design goals is to make our technique work with legacy clients.
Neither do we compare against any approach that requires extensive RF fingerprinting of the environment since our design goal is to allow quick and one-time deployment of the system.Second, we also do not compare directly against a recently proposed approach that uses AoA measurements [15] .
This technique uses a modified version of the MUSIC algorithm [9] to compute all the AoAs of signals at an AP, and then runs a heuristic to compute the location of the radio after collecting measurements from multiple APs.
However, the published prior work assumes APs equipped with 8 antennas.
In this evaluation however we equip APs only with 4 antennas because, in our opinion we do not see WiFi APs with more than 4 antennas being widely available and deployed, most new deployments over the next few years are expected to be with 4 antenna APs.
This is due to two reasons, first MIMO throughput benefits are marginal beyond 4 antennas [7] and second the space occupied by an antenna is a major concern in many large scale deployments (e.g. an 8 antenna AP would span at least 3-4 feet assuming half wavelength spacing in the ISM band).
Setup: We evaluate PinPoint in the testbed environment shown in Fig. 6 which covers one floor of our department building and spans nearly 15000 sq. ft. We checked with our network manager the number of APs he would deploy for such a setting, and used the number he suggested (5 APs) as our baseline.
Five APs to cover one floor is a common number and thus represents typical AP density.
Of these 3 of the APs are manually localized and calibrated, while the rest of the APs are calibrated using PinPoint's self initialization algorithm.
We also hand measure every location and orientation to determine the ground truth, however these are not used to perform the actual localization unless mentioned otherwise.
Three types of radio interferers (802.11g, Bluetooth, 802.15.4 ZigBee) are placed at random static locations within the testbed and transmit with bursty traffic patterns which are representative of typical operation.
Traces are gathered at each AP and the aggregate data is processed for localization.
Overall Localization Performance: We start by examining the overall localization error that PinPoint achieves.
For all experiments in this section, in each trial we attempt to localize one of the three radios (802.11g, Zigbee and Bluetooth) that are randomly placed in the testbed.
Note that all of them could be transmitting concurrently, and other WiFi interference from the department network may also be present.
Fig. 7 plots the CDF of errors for all of the interference localization trials.
The curves show the performance for the three compared techniques -PinPoint, RSSI, and MUSIC-AoA.
PinPoint can localize an interfering radio to within a median error of 0.97 meters, the RSSI and MUSIC-AoA approaches can only manage median errors of 3.35 and 2.94 meters respectively, i.e. at least three times worse than PinPoint.
There are two reasons for PinPoint's accuracy.
First, PinPoint is inherently more accurate since it can disentangle and infer the LoS component's AoA even in severe multipath environments.
Second, it is able to disentangle the target radio's signal and infer its CSSI even when there are other concurrent interfering transmissions.
Neither the RSSI or MUSIC-AoA based approach possess these features.To show that PinPoint's benefits are not primarily derived from its ability to disentangle the target radio's signal from interference, we show the performance of all three approaches when only the target radio is transmitting and no other concurrent transmissions are present.
Fig. 8 shows the results.
PinPoint has the best accuracy of 0.83m, while the RSSI and MUSIC-AoA approaches exhibit median errors of 2.32 and 2.98 meters respectively.
The reason is PinPoint's ability to identify the LoS component's AoA, which the other two techniques do not possess and consequently their performance suffers in the harsh multipath environments that we find in indoor deployments.
We therefore believe that even though PinPoint's initial design motivation was to localize interference for network management, it is a general localization technique that can be applied in a wide variety of scenarios to different applications.In Fig. 9 we plot the performance of the three techniques with one additional interference source transmitting concurrently with the target source.
PinPoint maintains sub-meter accuracy, while the RSSI approach performs poorly (median error of 4 meters and often tail errors as high as 15 meters).
The MUSIC-AoA approach is less sensitive, its median error stays near 2.9 meters.
The RSSI approach suffers because it cannot accurately measure RSSI of the target radio's signal alone under interference.
The MUSIC-AoA approach uses the MUSIC algorithm which is robust to interference when it comes to computing the AoAs, and therefore maintains its performance.
Effect of AP Density: Intuitively, AP density affects localization accuracy since more measurements help mitigate the effects of uncertainty in the LoS AoA and CSSI measurements from individual APs.
Fig. 10 plots the impact of AP density which we vary by reducing the number of APs in the testbed.
As expected the median error increases as fewer APs are deployed to 1.76m when 3 APs are used to cover the entire floor.
We note that this accuracy is still better than the RSSI and AoA approaches with PinPoint performs well even in sparse AP deployments, achieving a median error of 1.76m even when only 3 APs are used to cover the entire floor.
5 APs.
At 2 APs however, the error is significantly worse (around 6m).
As a rule of thumb, and this agrees with intuition, we found that target radios need to be visible to at least three APs to achieve good accuracy.
Impact of AP self-calibration: In Fig. 11 we measure the impact of PinPoint's AP self calibration technique on overall localization error.
Specifically, we allow each AP to know its ground truth location and orientation and then compute the overall localization error for interfering radios.
As we can see, there is virtually no difference in the median error, the difference is less than 5 centimeters.
PinPoint's AP self-calibration performs well enough to provide very good performance that is close to the case when all APs are manually calibrated.
Next, we examine how well PinPoint can disentangle the LoS component's AoA from multipath and interference.
As we discussed in the design, this process has two steps: first the relative delay and angle for several packets are determined.
Next, PinPoint determines whether or not a LOS component actually exists and determines how reliable the estimate actually is by using clustering techniques.
If the LOS component is too weak to reliably detect, based on how large the standard deviation of the LoS cluster is, PinPoint discards the measurement so that it does not skew the subsequent localization if it is not a direct LOS path.
If a sufficiently strong path exists, then it estimates the AoA and the CSSI measurement.
We evaluate the accuracy of the AoA measurement alone, since there is no way of knowing the ground truth CSSI measurement reliably because it varies with time for every measurement.
Method: In this experiment, we statically place a single source of WiFi 802.11 interference within an indoor office environment.
The interfering source transmits con- tinuously at a constant average power.
Measurements are then performed at various locations within the office, with the locations selected in such a way that different types of propagation paths from the source to the APs are tested.In order to determine the ground truth for the LOS propagation path, we equip each source and receiver with compasses and annotate the placement of each with respect to landmarks in the office (wall corners, poles, etc.).
We then calculate the AoA that the direct LOS path should traverse from the interference source to the receiver and use it as the benchmark for our algorithm.
Compared Approach: We compare PinPoint's LOS AoA identification against the standard algorithm used to measure AoAs, the MUSIC algorithm [9].
Since MU-SIC computes all AoAs and cannot explicitly compute the LoS path's AoA, the heuristic we use is that the component with the strongest signal is the LoS AoA for MUSIC.
Clearly this will not work in many scenarios, but this is the best heuristic we could come up with for comparison since it will be accurate when a strong LoS path exists.
Analysis of AoA Estimation: First, we show in Fig. 12 the CDF of the estimation error across all experimental runs.
We can see that PinPoint's LOS detection achieves an accuracy of ±20 • more than 65% of the time, significantly outperforming MUSIC.
Notice that while PinPoint's performance degrades gracefully, MUSIC's performance drops sharply at a certain point (e.g. at the 70% mark on the CDF).
AoA Estimation in LOS vs. NLOS scenarios: In order to dive a little deeper, Fig. 13 plots the data from the previous graph in two separate groups differentiated by whether a dominant LOS path is present (solid lines) or not (dotted lines).
When there is an obvious physical LOS component with no obstruction between the interfering source and the receiver, we can see that both algorithms perform quite similarly.
But even in these sce- narios where the LOS component is the dominant path, MUSIC sometimes locks onto the weaker multipath component, causing sharp drop offs in performance which are seen at the tails of Fig. 13 The dotted lines in Fig. 13 show the performance of PinPoint and MUSIC when the LOS is physically obstructed.
While the performance of PinPoint is only slightly worse, MUSIC is unable to correctly identify the LOS path's AoA because the secondary multipath reflections become stronger than the direct LOS path.
Their performance degrades rapidly and are unable to reliably detect the LOS AoA.
RSSI modeling based systems like EZ [8] assume that they get GPS locations from the users while they are walking.
This training data consisting of RSSI measurements is collected at various points with a hand held mobile device across different points in the floor plan and is used to create a RSS model of the entire network.
EZ achieves a median error of 2m.
Another approach WiFiNet [11] also uses the RSSI for localizing the source of interference.
This approach uses the off the shelf hardware to build the localization system and achieve errors of <4m.
Both of these are the most recent and the best performing approaches based on RSSI modeling, other prior such approaches include [20] [21] [22] [23].
While these RSSI based methods have the attractive property of being simple and deployable on current WiFi APs, they cannot localize interference and neither are they accurate due to the inherent inaccuracy of standard RSSI as a predictor of physical distance in a rich indoor multipath environment with interference.Other RSSI based localization systems like HORUS [12] , RADAR [13], and PINLOC [14] require significant pre-deployment effort in RF-fingerprinting.
HORUS achieves median error of 0.7m, RADAR achieves median error of 1.3 m and PINLOC achieves localization granularity in 1mx1m box with 90% accuracy.
All such approaches rely on the precomputed fingerprint which can become obsolete if location of some of the APs changes or if the environment changes.
Fingerprinting is time consuming and expensive and has to be done periodically.
Pinpoint requires no fingerprinting, and lightweight calibration of a few anchor APs at deployment.
Since Pinpoint can self-calibrate the remaining APs, any changes in AP locations or the environment can be easily handled.
Thus PinPoint is easy to deploy and maintain.A recently proposed AoA based localization algorithm [15] achieves high accuracy of 0.36 m using ULA with 8 antennas.
The algorithm weights the received AoA (calculated with a variant of MUSIC) by the power of the received signal.
In [15], they cannot distinguish the LOS or NLOS component of the received signal, and therefore might suffer in low SNR NLOS scenarios as we saw in Sec. 6.
Further, these techniques require 8 antennas at each AP, which is unrealistic for standard WiFi deployments.
Other examples of the AoA based techniques are [24] [25] but these share the same shortcomings as above and generally do not provide good accuracy.
PinPoint's design highlights how one can solve interference localization tasks by leveraging the rich information hidden in RF signals.
This paper designs novel signal processing algorithms and applies them to solve practical systems problems.
We believe the RF signals flying around us can be mined for many more practical applications, including mapping, context detection and so on, and our future work aims to explore novel signal processing algorithms to build such applications.
