In this paper, we decompose a large-or small-scale multi-hop wireless network into embedded subgraphs, each consisting of four nodes and two flow pairs.
We systematically study all twelve possible topologies that arise according to whether the different nodes are in radio range of each other.
We show that under both a random spatial distribution of nodes and random waypoint mobility with shortest-path routing, a critical and highly probable scenario is a class in which the channel state shared by the two flows is not only incomplete (i.e., the graph is not fully connected), but there is also asymmetry in the state between the two flows.
We develop an accurate analytical model validated by simulations to characterize the long-term unfairness that naturally arises when CSMA with two-or four-way handshake is employed as a random access protocol.
Moreover, we show that another key class of topologies consists of incomplete but symmetric shared state.
We show via modeling and simulations that in this case, the system achieves long-term fairness, yet endures significant durations in which one flow dominates channel access with many repeated transmissions before relinquishing the channel.
The model predicts the timescales of this unfairness as a function of system parameters such as the maximum retransmission limit.
To better understand the performance characteristics of large-or small-scale multi-hop wireless networks, we begin with the basic building blocks of pairs of contending one-hop flows.
If all four nodes of the two flows are within radio range, or if the two senders are within radio range, a CSMA protocol with two-or fourway handshake obtains fair performance that can be accurately predicted using existing models [4].
Unfortunately, all remaining two-flow topologies encounter performance problems, including severe long-term unfairness and shortterm unfairness on timescales of up to seconds.
While the existence of some problematic topologies is well known (see [2,11,12,17] for example), this paper is the first to systematically and comprehensively identify and study via analytical modeling and simulations all twelve possible configurations of two flows in a random access environment.
We compute the likelihood of each scenario occurring in a random topology, develop models that accurately predict each flow's short-and long-term performance in each scenario where senders are not in range, and predict the impact of key system parameters such as the maximum retransmission limit.In particular, our contributions are as follows.
First, we enumerate the twelve distinct scenarios and classify them into three groups based on their geometric properties: Senders Connected (SC), Asymmetric Incomplete State (AIS), and Symmetric Incomplete State (SIS).
We develop a spatial model that predicts the likelihood of the scenarios and groups when nodes are placed randomly.
Moreover, we use simulations with random waypoint mobility and routing protocols to further characterize scenario likelihood.
We show that the problematic AIS and SIS groups should not be viewed as rare "corner cases," but rather characterize topologies that occur with high frequency.Second, we perform an extensive set of simulations to characterize the short-and long-term performance in each of the twelve scenarios.
The experiments quantify the severe long-term unfairness of the AIS class and the seconds time-scale short-term unfairness of the SIS class.
We describe the MAC mechanisms that lead to each class' performance limits.
Moreover, we show how random waypoint mobility allows flows to alternate among classes, resulting in improved long-term performance but velocity-controlled epochs of poor performance in the AIS and SIS classes.Third, we develop an accurate analytical model for the AIS class.
We begin with a general "decoupling model" of IEEE 802.11 which provides key temporal embedding points that are critical for development of a Markov model for topologies in which nodes are not fully connected and performance is asymmetric.
We generalize the model to incorporate flows that are not continuously backlogged and use simulations to validate the model's accuracy.Finally, we develop a model to characterize the short-term unfairness that arises in the SIS class.
Because this class achieves long-term fairness, the steady state distribution is not of interest.
Instead, we derive an expression for the expected time for the system to switch between one flow dominating and the other flow dominating.
The model incorporates effects of key system parameters such as the maximum retransmission limit on the timescales of unfairness.
Simulation results indicate that the model is able to accurately predict transition times ranging from 10's of msec to 1 sec, with the range accounted for by both the maximum retransmission limit and whether or not RTS/CTS is used.The reminder of this paper is organized as follows.
In Section 2 we identify the twelve topologies for the flow pairs, classify them into three groups, and conduct a spatial analysis to determine their likelihood in a random network.
In Section 3, we study via simulations the impact of protocols on the fairness of the three classes and describe the protocol-driven origins of this behavior.
In Section 4 and Section 5, we model the AIS and SIS classes respectively.
Finally, in Section 6 we discuss related work and in Section 7 we conclude.
In this section, we first identify all feasible topologies in which exactly two directional flows are communicating.
Next, using a grouping of these topologies, we perform a spatial analysis that characterizes the likelihood of each of these topologies occurring under random node placement.
Finally, we compare scenario likelihood via the model and simulations that incorporate mobility.
We consider four stations that are communicating pairwise, where two senders are transmitting a one-way data flow to their two respective receivers.
When two stations are within radio range of each other (i.e., the received SNR is above the carrier sense threshold) we refer to them as having a connection or link between them.
Depending on the distances and propagation paths between the four stations, a link may or may not be established between the two flows.Denote station A as the sender for flow A and station B as the sender for flow B, and stations a and b as their respective receivers.
Links are named by using the names of the stations that they interconnect.
There are four possible inter-flow links: AB, ab, aB and Ab.
In a general topology, each one of these links may be present or not, yielding 2 4 = 16 different scenarios.
Notice that links Aa and Bb are always present, given that senders are connected with their respective receivers.
However, scenarios where link Ab exists and link aB does not are symmetric to those where aB exists and Ab does not.
After ruling out four such cases, we have twelve distinct scenarios depicted in Figure 1.
For example, Scenario 1 in Figure 1 depicts the case in which the two flows are out of radio range and hence operate independently.Omitting Scenario 1 which is trivial to analyze, we classify the remaining eleven scenarios into three groups as follows.
• Senders Connected (SC) -Scenarios 2-7, in which link AB is present.
• Asymmetric Incomplete State (AIS) -Scenarios 11 and 12, in which senders are disconnected, and only one of links Ab or aB is present (we assume it is always aB), resulting in asymmetric connection between the two flows.
• Symmetric Incomplete State (SIS) -Scenario 8, 9 and 10, in which senders are disconnected, and either both Ab and aB are present or neither is present (in the latter case ab is present) resulting in symmetric connection between the two flows.We will show that the flow pairs obtain dramatically different performance profiles according to which of the three groups represent their topology.
We demonstrate this using simulations for both two-way and four-way handshakes in Section 3 and via analytical models in Sections 4 and 5.
Now we develop a model to compute the probability that each scenario in Figure 1 occurs in a random graph.
Our approach is to view a scenario as three joint events, and to conduct a spatial analysis to compute the probability of each of these events occurring.
We assume the four stations are uniformly distributed in the network and that the size of the network is large enough so that border effects are negligible.
We describe in detail only the derivation for Scenario 11.
The same approach can be applied to predict the occurrence probabilities of the other scenarios.We consider a simplified propagation model in which r is the radio range of a station.
1 Let s denote the physical area (size) of the network and T (·) represent a region of the plane satisfying certain geometric conditions.
In particular, T (A) indicates the region within radio range of station A and T ( ¯ A ∩ B) represents the region within radio range of B but outside that of A.
The distance between station A and a is denoted by d1.
Similarly, the distance between station B and b is denoted by d2.
The coordinates of station z are denoted by xz and yz, respectively, where z ∈ {A, a, B, b}.
Node placement for Scenario 11 is shown in Figure 2, where the angle β indicates whether station b is within T (A ∪ a).
Scenario 11 can be decomposed into the following three events: (i) d1 ≤ r; (ii) station B is within T ( ¯ A ∩ a) given that the first event occurs; (iii) d2 ≤ r and station b is within T ( ¯ A ∩ ¯ a) given that the first two events occur.
Note that due to the symmetry of region T ( ¯ A ∩ a), we only need to consider cases where yB ≥ 0 and then apply a multiplicative factor of 2.
We now compute the probability of each of the three events occurring.
In event (i), the probability of station a falling into a doughnut area comprised in the interval [d1, d1 + ∆d1] with A at the center is given byλ1 = 2π(d1 + ∆d1) 2 − 2πd 2 1 s = 2π∆d 2 1 + 4πd1∆d1 s .
(1)When ∆d1 → 0 we can neglect the second order term, obtainingλ1 = 4πd1∆d1 s .
(2)In event (ii), the probability of station B falling into a small square region in T ( ¯ A ∩ a) defined by the interval [xB, xB + ∆xB] on the x axis and [yB, yB + ∆yB] on the y axis is given by λ2 = ∆xB∆yB s .
In event (iii), the joint probability that the distance between station B and b is within the interval [d2, d2 + ∆d2] and station b is within T ( ¯ A ∩ ¯ a), is given byλ3 = 1 − β 2π × 2π(d2 + ∆d2) 2 − 2πd 2 2 s = 1 − β 2π × 2π∆d 2 2 + 4πd2∆d2 s ,(4)where β is the angle shown in Figure 2.
Neglecting the second order term, this equation becomesλ3 = 1 − β 2π × 4πd2∆d2 s ,(5)when ∆d2 → 0.
From Equations (2), (3) and (5), the probability that Scenario 11 occurs given xB, yB, d1 and d2 isp 11 = λ1 × λ2 × λ3 = 4πd1∆d1 s × ∆xB∆yB s × (1 − β) 2π × 4πd2∆d2 s = 8π d1∆d1∆xB∆yBd2∆d2(1 − β) s 3 .
(6)Finally the probability of Scenario 11 occurring isp11 = Z r 0 Z r 0 Z r+d 1 d 1 2 Z f 2 (d 1 ,x B ) f 1 (d 1 ,x B ) 2 × p 11 d(yB) d(xB) g(d2) d(d2) g(d1) d(d1),(7)where g(.)
is a given probability density function of the distance between a transmitter and a receiver.
The x coordinate of any pointwithin T ( ¯ A ∩ B) lies in the interval [ d 1 2, r + d1], which explains the bounds of the third integral.To solve Equation (7), we need to compute β, f1(d1, xB) and f2(d1, xB).
As shown in Figures 3 and 4, computations for β, f1(d1, xB) and f2(d1, xB) are different when station B falls into different regions of T ( ¯ A ∩ a).
Therefore, we need to compute p11 in different regions and sum the results.To compute β, we consider Figure 3 which indicates that if d2 is fixed, T ( ¯ A ∩ a) can be divided by the dashed circle into two areas, denoted by R1 and R2 respectively.
β is computed differently in R1 than in R2 because the circle centered at B intersects with other circles differently in different regions.
However, the computation for β is trivial in either R1 or R2 although its expression is tedious, so we omit it here.
To determine f1(d1, xB) and f2(d1, xB), we further divide region R1 and R2 in Figure 3 into smaller regions.
Let Γ denote such a value that when d2 = Γ, xQ = d1, where xQ is the x axis of the intersection Q shown in Figure 4.
When d2 ≤ Γ, T ( ¯ A ∩ a) is divided into five areas labeled by I, II, III, IV and V as shown in Figure 4(a).
When d2 > Γ, T ( ¯ A ∩ a) is divided into five different areas shown in Figure 4(b).
f1(d1, xB) and f2(d1, xB) can be determined within each of the five regions and Equation 7 can be solved numerically.
Similar to β, f1(d1, xB) and f2(d1, xB) are easy but tedious to obtain, thus we omit their expressions here.
A similar analysis can be conducted for computing the probability that each of the other 10 scenarios in Figure 1 occurs, denoted by pi, where i ∈ {2, 3, 4 . . . 12}.
We now compare the likelihood of the three classes occurring.
In the context of a multi-hop wireless network, it is especially interesting to evaluate the probability of each of the three classes occurring between direct neighbors as a function of hop distance.
We assume that the distance between transmitters and receivers is constant, and we compute pi as a function of d, where d = d1 = d2.We can obtain results independent of flow density by computing the conditional probability that a particular Scenario i occurs, given that some connection exists between the two flows, i.e., they are not isolated.
This is then the probability of Scenario i occurring conditioned on the event that any of the scenarios except Scenario 1 occurs.
Thus it is given by pi/p, where p = P 12 i=2 pi.
Results validated by Monte Carlo simulations are shown in Figure 5 as a function of the normalized hop distance, which is the actual distance between a sender and a receiver divided by the radio range.
Simulations are run dropping two pairs of nodes at a given distance from each other uniformly at random in a square area with wraparound (to avoid border effects), and seeing which case they map into (excluding Scenario 1).
By so doing, results are insensitive of area size and node density.We observe that Scenario 11 (belonging to the AIS class and one with problematic performance) emerges as the dominating scenario when the distance between sender and receiver increases.
Denote the respective probabilities of the Senders Connected (SC), Asymmetric Incomplete State (AIS), and Symmetric Incomplete State (SIS) classes occurring as SC, AIS and SIS.
We have SC = {p2 +p3+p4+p5+p6+p7}/p, SIS = {p8 +p9+p10}/p, and AIS = {p11 + p12}/p.
The three probabilities above are reported in Figure 6 as a function of the normalized hop distance.Results indicate that the AIS and SIS classes account for a significant fraction of all possible scenarios.
Increasing the hop distance, the likelihood of class AIS approaches that of the SC class despite accounting for two vs. six scenarios.
The ratio between AIS and SIS probabilities is about 2.
In multi-hop wireless networks, the distribution of hop distances depends on the routing protocol deployed.
From Figure 6, it is clear that routing protocols can have a significant impact on the probability of each class occurring.
To evaluate this impact, we conducted simulation experiments to measure the hop distance dis- tribution resulting from the operation of current routing protocols in large-scale networks with mobility.
In our simulations, we consider 300 stations randomly deployed in a 2000 m × 2000 m area.
A random waypoint model [22] is used to simulate mobility, and connections are randomly established among the nodes.
The routing algorithm considered is Distance Sequence Distance Vector (DSDV) (we tested other routing algorithms and obtain similar results).
To compute the normalized hop distance distribution, we calculate the hop distance of every link traversed by each packet and divide it by the maximum transmission range.
After averaging the results of several simulation runs, we obtained the distribution of normalized hop distances reported in Figure 7.
Compared to the results in [14], in which the impact of routing protocol is not considered, our simulation experiments suggest that in a multi-hop wireless network, about 40 percent of normalized distances are within the [0.9, 1] interval.
This can be explained by the fact that routing protocols select minimum-hop paths to reach the destination.
Combined with the results in Figure 6, this means that current routing protocols make the scenarios of classes AIS and SIS more likely to occur in a random network, by favoring larger hop distances when choosing next hops.
The occurrence probabilities of classes SC, AIS and SIS under routing can be computed from Figures 6 and 7, assuming random distribution of two-hop flows.In the previous analysis, we assumed identical transmission and sensing range for all stations.
In a real network, however, sens- ing range and transmission range of a station are usually different.
In order to examine the impact of this factor, we vary the sensing range of the nodes, while keeping the transmission range fixed.
We assume the distance between senders and receivers is equal to the transmission range.
Results are shown in Figure 8, as a function of the ratio between sensing range and transmission range.
Although the occurrence probabilities of the AIS and SIS classes decrease when the ratio between sensing range and transmission range increases, the probability of class AIS occurring is significant over the whole range of values encountered in practice.
The ratio between AIS and SIS is always around 2.
In this section we qualitatively assess by simulation experiments the performance of IEEE 802.11 in the two-flow subgraphs identified by the spatial analysis of Section 2.
Our objective is to identify the critical performance issues that can arise when a typical CSMA-based MAC protocol is employed to arbitrate channel access between the two flows.The main channel access mechanisms implemented in the IEEE 802.11 standard [7] are the "basic access" two-way handshake without RTS/CTS and the four-way handshake with RTS/CTS.
We study how both access methods perform in each of the twelve possible scenarios comprising two flows.We consider a data rate of 11 Mbps, and a fixed packet size of 500 bytes.
Both flows are continuously backlogged with UDP traffic.
We measure the average throughput of each flow during consecutive periods of 0.4 seconds.
Each simulation experiment lasts 20 seconds, thus we collect 50 throughput samples for each flow.
In Figure 9, we plot the normalized throughput of flow B versus the normalized throughput of flow A in each measurement interval.
The "×" marks correspond to the two-way handshake access method; the dot marks correspond to the four-way handshake.
Dashed lines represent ideal fairness, since they consist of the points where the throughput of the flows are equal.Omitting Scenario 1 in which the flows are isolated due to spatial reuse, we make the following observations on the other 11 scenarios.
• For the Senders Connected (SC) class consisting of Scenarios 2-7, most of the throughput points reside close to the dashed line, indicating that neither short-term nor long-term fairness problems exists.
• For the Asymmetric Incomplete State (AIS) class consisting of Scenarios 11 and 12, the variance of the throughput points is small.
However, these points largely deviate from the fairness line, indicating severe unfairness at all time scales and flow starvation.
• For the Symmetric Incomplete State (SIS) class consisting of Scenarios 8, 9 and 10, the throughput points are symmetrically scattered around the dashed line, indicating short-term unfairness, but in the long term, the throughputs of the two flows are the same.Since the SC class does not encounter fairness problems and because its performance can be analyzed with existing techniques [4], we will not further consider it.
We focus instead on the problematic AIS and SIS classes.
In Sections 4 and 5 we will develop a detailed analysis of these two classes.
Here we provide a qualitative explanation of the behavior observed in the simple experiments of Figure 9.
Origins of AIS Long-Term Unfairness.
Figure 10 shows example topologies of Scenarios 11 and 12 of the AIS class.
The core property of the AIS class is the asymmetric view of the channel state possessed by the two flows.
When transmitters are not in range of each other, channel state information is necessarily incomplete because transmitters cannot sense when the other flow is transmitting.
This lack of information affects the two AIS flows in very different ways because of the asymmetry of the topology.
In particular, flow A lacks the necessary information to compete fairly with flow B, while flow B does not suffer from the incomplete channel state information.
This disparity is due to the fact that sender A does not sense any packets belonging to flow B, and consequently, completely ignores the activity of the other flow.
On the other hand, sender B can hear the control packets sent by node a (CTS and/or ACK), and hence can detect the activity of the other flow.
While sender B knows exactly when to start contending for the channel, sender A has to discover an available time-slot randomly, without any coordination with sender B.
This fact results in many transmission attempts of sender A without any response back from receiver a, most often because A attempts to transmit in the middle of a transmission of flow B, when receiver a cannot receive correctly the packets sent by A, or is not able to reply.
Consequently, sender A is forced to timeout and to repeatedly double its contention window.
As a result, the probability of flow A capturing the channel is significantly smaller than that of flow B. [2,12], depicted in Figure 11(b), is a special case of Scenario 8 when the two flows have the same receiver.
The core property of the SIS class is the symmetric view of the channel state possessed by the two flows while the channel state information is incomplete.
This property results in short-term unfairness but long-term fairness.
The origin of the short-term unfairness lies on the binary exponential backoff mechanism coupled with the large packet loss probability that characterizes all scenarios of the SIS class.
The large packet loss probability is due to incomplete channel state information.
In particular, a sender does not sense the other sender's activity, thus it can start transmitting the first packet of the two-way or four-way handshake while the other sender is also attempting to transmit.
Indeed, a sender does not stop decrementing the backoff counter as soon as the other sender starts transmitting.
This fact significantly increases the collision probability of the flows.
After experiencing a collision, a source doubles its contention window, thus reducing the chances of attempting a new transmission in the next available slot.
On the contrary, a source resets its contention window to the minimum value after a successful transmission, increasing the likelihood of a new transmission attempt in the near future.
Thus, in all scenarios of the SIS group, the system endures significant durations in which one flow dominates channel access with many repeated transmissions, while the the other flow is forced to repeatedly double its contention window significantly reducing the chance to seize the channel.
However, this problem affects the two flows equally, because the geometric relationships in the scenarios of the SIS group are symmetric.
The two flows alternate capturing the channel and dominating over the other flow.
Therefore, flow pairs belonging to the SIS group do not suffer from long-term unfairness (essentially because of symmetry).
Instead, simulations show significant short-term unfairness, as illustrated in Figure 9, which is clearly undesirable as it can adversely affect delay-sensitive applications, such as voice.
Impact of Mobility.
In a network where stations move randomly, a flow is expected to belong to different local subgraphs constantly changing over time.
Will this mobility alleviate the unfairness problem observed in Figure 9?
We conducted a simulation experiment where 40 stations move according to the random waypoint model in a 1000x1000 region with a speed uniformly distributed in a [7,15] m/s interval.
20 connections are established between randomly chosen pair of stations.
Figure 12 shows that although mobility averages out unfairness over time-scales of 120 seconds, severe unbalance is observed during time windows of 10 seconds, in which two dominating flows starve all of the other flows.
This means that severe fairness problems still exists over time scales associated with the speed of the nodes.
In this section we develop an analytical model to study the behavior of flow pairs belonging to the Asymmetric Incomplete State (AIS) group, comprising Scenarios 11 and 12 of Figure 1.
Examples of topologies that satisfy the geometric properties of these two scenarios are illustrated in Figure 10(a) and 10(b).
In both cases, flow B achieves a significantly higher throughput as compared to flow A for CSMA both with and without RTS/CTS (see Figure 9).
The only difference between the two cases is that in scenario 12 the receivers are in radio range of each other, whereas this is not true in scenario 11.
Below, we show how this topology difference affects performance.Our objective is to analytically compute the throughput of the two flows to both characterize the root cause of the starvation of flow A and to evaluate the impact of key system parameters on the extent of the starvation.The remainder of the section is organized as follows.
In Section 4.1 we introduce a general model of the behavior of a backlogged source employing the standard 802.11 DCF.
This model will be applied in Section 4.2 to the particular scenarios of the AIS group.
In Section 4.3 the analysis is extended to the case of non-backlogged sources in order to assess the impact of the starvation problem in more general network scenarios.
Finally, numerical results and simulations are presented in Section 4.4.
Our modeling framework for the AIS group contrasts with existing techniques (e.g., [4]) in that we account for the fact that, in a general topology, the channel state as perceived by a station can be different from node to node.
In [4], all stations are assumed to be in range of each other so that they share a common view of the channel.
In contrast, we build a model representing the channel state as seen by each individual source, instead of the channel state shared by all nodes.
Yet, in the scenarios of the AIS group, the behavior of each station can still be decoupled from that of the other stations, as done in [4].
This property significantly simplifies the analysis of the interaction among the two flows, as we show below.Channel State as Seen by a Single Source.
The behavior of an arbitrary station employing a CSMA protocol such as the DCF function of 802.11 can be abstractly represented by a temporal diagram such as the one illustrated in Figure 13.
We identify 4 different states : (i) idle channel; (ii) channel occupied by successful transmission of the station; (iii) channel occupied by a collision of the station; (iv) busy channel due to activity of other nodes, detected by means of either physical or virtual carrier sensing (i.e., NAV).
The durations of the time intervals during which the channel remains in the four states above are denoted by σ, Ts, Tc, and T b , respectively.
In Figure 13, the time instants of a possible state change are pointed to by arrows placed below the temporal axis.
While σ is a constant equal to one 802.11 time slot, the duration of the other intervals can be variable (with general distribution) depending on the access mechanism (basic access or RTS/CTS), the frame size, and the sending rate of the transmitting node(s).
¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¡ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ ¢ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ £ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¤ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ ¥ σ σ σ T s T c σ σ T b t σ σ σAnalysis of the Behavior of a Single Source.
In order to analyze the behavior of a station, we make the fundamental assumption that the channel evolution can be described by a renewal process: at each switching time the next state does not depend on the current state, and the four states occur with fixed probabilities Πs, Πc, Πσ and Π b .
The resulting process is thus semi-Markov.
Notice in Figure 13 that the durations of Ts, Tc and T b comprise an idle slot at the end of the interval, which occurs deterministically, so that it is not considered as an individual event of the overall stochastic process (hence these special slots are marked with a dotted arrow in Figure 13).
At the end of an idle slot, the station decrements its backoff counter, and starts transmitting in the next interval if the counter reaches zero.
Let τ be the probability that the station sends out a packet after an idle slot, under the assumption that it is always backlogged (we will remove this assumption later in the section).
Let p be the probability that a transmission of the station is not successful.
The probability p is usually referred to as the conditional packet loss probability [4].
We also introduce b, as the probability that the channel becomes busy after an idle slot due to activity of other nodes (assuming that the station does not start transmitting).
Using these probabilities, we can specify the occurrence probability of each of the four channel states at the switching instants as follows,Πs = τ (1 − p), Πc = τ p, Πσ = (1 − τ ) (1 − b), Π b = (1 − τ ) b.(8)Computation of the throughput.
Using renewal theory, the throughput of a station (expressed in packet/s), is given byTP = Πs ∆ ,(9)where ∆ is the average duration of a channel state (in seconds).
The final expression for the throughput of a station is then given byTP = τ (1 − p) τ (1 − p) ¯ Ts + τ p ¯ Tc + (1 − τ )(1 − b)σ + (1 − τ ) b ¯ T b .
(10) Now, the probability τ is a deterministic function of p, which depends only on backoff parameters such as the window size, the number of backoff stages, etc.
For 802.11, the expression of τ as a function of p has been first computed in [4].
More recently, it has been shown that one can easily write similar expressions of τ as a function of p for a large class of backoff mechanisms, employing arbitrary window distributions and backoff multipliers [13].
The complete expression of τ for 802.11, which takes into account the maximum retransmission limit jointly with the maximum window size, is given byτ = 2q(1 − p m+1 ) q(1 − p m+1 ) + W0ˆ1 W0ˆ W0ˆ1 − p − p(2p) m ` 1 + p m−m q ´˜,´˜,(11)where q = 1 − 2p, W0 is the minimum window size, m is the maximum retry limit, and m is the backoff stage at which the window size reaches its maximum value, m ≤ m.The average durations ¯ Ts and ¯ Tc of a successful transmission or of a collision in which the station is involved are also known a priori (see [4]).
It turns out that the only unknown variables are the occurrence probability b of a busy period, its average duration ¯ T b , and p, the conditional packet loss probability.
These quantities are specific to each station, and their values derive from the interaction of the station with the rest of network.In the next section, we apply the above modeling technique to the study of the AIS scenarios.
However, we remark that this methodology has general applicability to modeling long-term throughput of flows in arbitrary networks with any number of nodes.
In complex topologies comprising more than two flows, evaluation of the variables b and ¯ T b for each node turns out to be the most difficult task, whereas their computation is quite simple in scenarios comprising only two flows.
While our study in this paper is restricted to two-flow scenarios, computation of b and ¯ T b in more general network scenarios can be found in [9].
The analysis of all possible combinations of flow pairs provides instead the basis to evaluate the packet loss probability p (the other fundamental variable that we need to compute the throughput) of a node in an arbitrary topology.
That is, two-flow scenarios are the building blocks that can be used to evaluate the collision probability of a transmitter in any network topology: a transmission on a link is successful if it does not collide with any other transmission on neighboring links.
Therefore, the careful analysis of all flow pairs presented in this paper is the necessary first step toward the throughput analysis in arbitrary networks.
Now we apply the general model introduced in Section 4.1 to independently study the behavior of the two transmitting nodes A and B in the scenarios of the AIS group.
We add an index A or B within brackets to all quantities defined in Section 4.1 to distinguish between the values of the two stations.
For example, τ (A) is the transmission probability of node A. For simplicity, we assume that the payload size of all data frames is constant.
The analysis can be extended to the case of variable payload sizes.We start by considering the behavior of flow A.
As described in Section 3, sender A does not detect any activity on the channel produced by flow B, neither by means of physical nor virtual carrier sensing.
As a consequence, b(A) = 0.
It turns out that the only parameter that we need to compute for flow A is the conditional collision probability p(A), or its complement s(A), the conditional success probability.The transmission attempts of sender A are not coordinated with those of sender B, and occur at random points in time according to the backoff process of A.
Our approximation is to assume that each transmission attempt of A is an independent random look at the activity of flow B. Hence we need to characterize the activity of flow B.
A fundamental property of flow B is that all transmission attempts of sender B are successful, i.e., p(B) = 0.
Indeed, transmissions of B could only collide with the control packets sent by a, but the probability that this happens is negligible because of the lack of synchronization: almost always B or a avoid collisions by sensing the channel busy and refraining from transmitting.
2 Under saturated traffic, the activity of flow B is a sequence of successful transmissions, separated by a random number of backoff slots uniformly distributed in the minimum window size W0 (the window size of sender B is never increased, since p(B) = 0).
Occasionally, sender B receives a CT S or ACK packet from node a, freezing its backoff counter for the remaining part of the successful packet exchange of flow A.The only chance flow A has to successfully transmit is when the initial packet of the two-way or four-way handshake (a DATA frame or an RTS frame) happens to arrive during those short gaps in which sender B is in the backoff phase.
More precisely, we have to examine the channel occupation state as perceived by the receiving node a while node A is trying to initiate a new data transfer, which is illustrated in Figure 14 for both scenarios of the AIS group.
Notice that we remove the amount of time in which receiver a is actively transmitting or receiving from sender A, because we are considering the channel around a conditioned on the fact that A starts transmitting a new packet.
The temporal evolution of the channel as perceived by node a can be divided into cycles of variable duration C. Each cycle comprises a successful data transfer of flow B, of duration Ts, and a variable number i of slots σ corresponding to the backoff phase of sender B.
The "gap" G during which a packet originated by node A can be received by node a is also reported in Figure 14.
We observe that this gap comprises also the DIFS space at the end of Ts.
In Scenario 11, node a does not receive the ACK of node b, thus the gap is enlarged by the duration of an ACK and a SIFS.
A key observation is that for flow A to be successful, not only node A must start transmitting during the gap, but the entire packet that node A places on the channel must fit into the same gap.
This explains why we do not consider as potential gaps the short interframe spaces in between the packets of flow B, nor even, in Scenario 11, the space corresponding to the (unheard) CTS of node b, because RTS > CTS + 2 SIFS.If the RTS/CTS mechanism is not used, the situation is very similar to that represented in Figure 14, with the only difference that there are no RTS and CTS packets.
Also, notice that in this case an entire DATA packet must fit into the gap in order to be successfully received by node b. D to be used in (12).
ACK + DIFS -RTS -SIFS RTS/CTS -scenario 12 DIFS -RTS Basic Access -scenario 11 ACK + DIFS -DATA -SIFS Basic Access -scenario 12 DIFS -DATA In order to compute the conditional packet loss probability p(A), we make the simplifying assumption that the initial packet sent by node A (RTS or DATA packet) arrives at an arbitrary point in time during a cycle C. Also, we assume that all transmission attempts of node A randomly and independently sample a point within a generic cycle C. Although this is only an approximation, the analytical predictions produced by the resulting model are quite accurate (see Section 4.4).
We observe that since the duration of a cycle is variable (the number i of slots is randomly chosen by the transmitting node B), we must consider the fact from renewal theory that the probability of arriving within a cycle of duration C is proportional to C.The final expression of the packet loss probability of flow A is as followsp(A) = 1− 2 W0[2Ts + (W0 − 1)σ] W 0 −1 X i=0 max(0, D+iσ), (12)where D is a parameter that depends on the access mechanism used (basic access or RTS/CTS) and on the considered scenario.
Table 1 provides the value of D for all combinations of cases.
Notice that D can take negative values, which explains the max operator in Equation (12).
If D is positive, Equation (12) simplifies top(A) = 2(Ts − D) 2Ts + (W0 − 1)σ , D > 0.
(13)We observe that p(A) can be directly computed as a function of all known system parameters.
Thus, we can already compute the throughput of flow A by first obtaining τ (A) from Equation (11), and then substituting both τ (A) and p(A) into Equation (10) (recall that b(A) = 0).
We now turn to the analysis of flow B.
We have already seen that p(B) = 0, thus we can obtain from Equation (11) τ (B) = 2/(W0 + 1).
The only unknown variable of flow B is b(B), the probability that node B, after an idle slot during the backoff phase, starts receiving a control packet from a (CTS or ACK), after which B sets the NAV and suspends its activity, allowing the packet exchange of flow A to complete successfully.
The duration ¯ T b of this suspension is equal to ¯ Ts minus the duration of the first packet (RTS or DATA) sent by A, which is not heard by B.Since we have already independently computed the throughput of flow A, we know the rate at which sender B has to suspend its activity during the backoff phase.
Indeed, the following equation, similar to Equation (10), has to be satisfiedTP (A) = [1 − τ (B)]x τ (B) ¯ Ts + [1 − τ (B)](1 − x)σ + [1 − τ (B)]x ¯ T b ,(14)from which one can obtain the unknown variable x = b(B), to be used into the expression of the throughput of flow B.We remark that as a result of our analysis, the throughputs of both flows are available in closed form expressions.
This is made possible by the hypothesis that both flows are backlogged.
In the next section, the analysis is extended to the case of non-backlogged sources.
The starvation problem observed in the scenarios of the AIS group is particularly severe when flow B is continuously backlogged and transmits at the maximum achievable rate, occupying the largest possible fraction of channel time with its own transmissions, and leaving few gaps to be discovered by flow A. Therefore it is important to model these scenarios under more general assumptions, i.e., when flow B does not utilize all of the available bandwidth.
This can happen because flow B represents a variable rate flow that empties its transmission queue, or if the sender or receiver of flow B are deferring elsewhere, e.g., if flow B senses the activity of other flows in the network by means of either physical or virtual carrier sensing.In our analysis, we assume that the maximum throughput achievable by a station is known.
For example, if the transmission queue of a source is fed by an arrival process of data packets from the upper protocol layers at rate λ, the achieved rate clearly cannot exceed this value.
If the queue is backlogged but the station senses the activity of other flows in its neighborhood, the achievable throughput will be limited by the resulting share of the channel capacity.
In this paper we limit ourselves to the analysis of two-flow scenarios, therefore we do not deal with the problem of solving the interaction of many flows in arbitrary topologies.
Regardless, we can model the behavior of two-flow scenarios embedded in a large topology by considering each scenario in isolation from the network, and assuming that the transmission queues of the senders are fed by a given arrival rate of packets λ, that can either represent the actual data rate offered by the upper protocol layers, or the maximum rate resulting from the interaction with the rest of the network.Moreover, we assume the the actual throughput T achieved by a station as a function of λ is equal to the input rate λ up to a saturation value Tsatur, after which it remains constant and equal to Tsatur.
Our analysis in the previous sections has actually computed the saturation throughput values Tsatur(A) and Tsatur(B) when both flows are backlogged.Now we extend the analysis to the case in which senders are fed by arbitrary input rates λ(A) and λ(B).
We add a new probability e to the description of the behavior of a single station introduced in Section 4.1, which is the conditional probability that the transmission queue of the station is empty, given that the station can potentially start a new transmission (i.e., when its backoff counter is zero and the channel has been sensed idle for a time slot).
The occurrence probability of each of the four channel states at the switching instants are modified as follows,Πs = τ (1 − p)(1 − e), Πc = τ p(1 − e), Πσ = [(1 − τ ) + τ e] (1 − b), Π b = [(1 − τ ) + τ e] b,(15)and the throughput expression in Equation (9) must be changed accordingly.
As a result, the only unknown variable that we need to compute is the probability e.
This can be easily done by considering that T = min(λ, Tsatur) as described above, and by assuming that all other variables are known: if T |e=0 < λ, then e = 0 (the source is saturated); otherwise e is equal to the value e * such that T |e * = λ, which is easily obtained by inverting the throughput formula.The solution of the scenarios of the AIS group under arbitrary input rates requires an iterative approach: each flow is studied assuming that the throughput of the other flow is given.
The independent analysis of each flow allows to compute a new estimate of its throughput, to be used in the analysis of the other flow in the next step of the iteration.
After a few iterations we obtain the fixed-point For flow A, we only need to compute the collision probability p(A), or its complement s(A).
To do so, we model the activity of flow B as perceived by a while sender A attempts to transmit as an alternating on-off process.
The on period has a fixed duration TON , equal to the portion of the cycle in Figure 14 not occupied by the gap G, which depends only on the access method and the specific scenario.
The off period is the gap available for flow A, that now can contain also periods of time in which the queue of sender B is empty.
The average duration ¯ TOF F can be computed from the following expression,1 TON + ¯ TOF F = T (B) 1 − T (A) ¯ T b ,(16)which states that the rate at which on periods occur (the inverse of the average duration of a cycle) must be equal to the throughput of flow B, normalized by the fraction of time in which the channel is not occupied by successful transmissions of flow A.
We assume that the duration of the off period is exponentially distributed, and that the transmission attempts of sender A arrive at random point in time.
We obtain the following formula for the successful probability of flow A,s(A) = ¯ TOF F TON + ¯ TOF F e − d ¯ T OF F ,(17)where d is the duration of the first packet sent by A (RTS or DATA).
Equation (17) states that a transmission attempt of flow A is successful if the first packet arrives during the off period of flow B and if it is fully received by a before the beginning of the next on period.
A new estimate of the throughput of flow A can now be derived using the collision probability p(A) = 1 − s(A).
For flow B, the only unknown is the probability b(B), which is updated using the same reasoning applied at the end of Section 4.2.
Here we validate our analysis of the AIS group and compare the analytical predictions of the throughput of the two flows with simulation results obtained with ns.
We consider stations operating according to the 802.11b standard, with a data rate of 11 Mb/s.
The common parameters at the MAC and physical layers for all of the experiments of this paper are reported in Table 4.4.
We first consider the case of continuously backlogged sources.
In Figure 15 we compare the throughput achieved by flow A (in pkt/s) in the two scenarios of the AIS group.
We vary the data payload size from 100 bytes to 1500 bytes, and we use the RTS/CTS access mechanism to transfer all data frames, irrespective of their size.
Figure 16 reports the corresponding results for flow B.We observe that despite a number of approximations, the model's predictions provide an excellent match with simulation results for all payload sizes and in both scenarios.
As expected, the throughput of Flow B is significantly larger than the throughput of flow A (notice the different scales on the y axis).
As predicted by the model, starvation is partially alleviated in scenario 11, when nodes a and b are not in range of each other.
As already explained, this is due to the fact that in this case, the gap in which node A can successfully send to a is enlarged by the duration of an ACK (see Figure 14).
In Figure 17 we compare the throughput achieved by flow A in scenario 11, considering the basic access method and assuming that the maximum retry limit is equal to either the Short Retry Limit or the Long Retry Limit as specified in the 802.11 standard, irrespective of the data payload size (notice that the Short Retry Limit corresponds in the model to m = 6, while the Long Retry Limit corresponds in the model to m = 3).
We observe that flow A achieves very different throughput depending on the packet payload size used.
Flow A is completely starved (i.e. achieves zero throughput) when the size of a DATA packet exceeds the maximum possible gap left free by flow B. For very small payload sizes, the throughput of flow A can actually be higher than the throughput obtained employing the RTS/CTS mechanism due to the reduced MAC overhead.We also observe that flow A achieves significantly higher throughput when the Long Retransmission Limit (m = 3) is used, with respect to the case in which the Short Retransmission Limit (m = 6) is used.
This is due to the fact that when m = 3, sender A spends less time in backoff, because after reaching the maximum retransmission limit, the window is reset to the minimum value W0.
This increases the aggressiveness of sender A, which is more likely to find an available gap in the activity of flow B.Finally, we consider flows that are not continuously backlogged.
The most interesting case to analyze is when we limit the rate of flow B so as to leave more time available to flow A.
In Figures 18 and 19 we plot the throughput achieved by the flows as a function of the input rate λ(B), while keeping flow A always backlogged.
Fig- ure 18 refers to scenario 12 with the RTS/CTS mechanism, whereas 18 refers to scenario 11 with basic access.
The data payload size is constant and equal to 1000 bytes, and m = 6.
We also report on the plots the sum of the throughput of the two flows.
We observe that the asymmetry between the flows results in nearly strict priority of flow B over flow A. Indeed, flow B achieves a throughput exactly equal to the input rate up to a sharp saturation point, whereas flow A, even if backlogged, only gets a fraction of the remaining channel capacity.
Notice that there is a significant loss in aggregate throughput when the two flows obtain similar throughput.
This is due to the time wasted by flow A during backoff, even when flow B does not have packets to transmit, leaving the channel idle for a large fraction of time.
By limiting the rate of flow B, it is possible to give the flows the same rate, at the expense of a loss in the aggregate throughput.
This illustrates the trade-off between fairness and capacity (aggregate throughput) in networks as it is realized with an unfair access mechanism.
In this section we develop an analytical model to study the behavior of flow pairs belonging to the Symmetric Incomplete State (SIS) group, comprising Scenarios 8, 9 and 10 in Figure 1.
We explore the resulting short-term unfairness by means of analysis and examine the impact of various protocol parameters.
The main difficulty in analyzing the scenarios of the SIS group resides in the fact that the behavior of the two flows is tightly correlated: when one flow starts dominating over the other, the states of the flows clearly cannot be considered to be independent, and we therefore cannot employ the decoupling technique adopted in Section 4.
In order to correctly analyze the system, it is necessary to consider the joint behavior of the two flows.Thus, we represent the system state as the pair (SA, SB), where SA and SB represent the current backoff stages of transmitters A and B, 0 ≤ SA, SB ≤ m, respectively.
Recall that m + 1 is equal to the maximum retransmission limit, which plays a fundamental role in the behavior of the flows as we show in Section 5.2.
The total number of states is (m+1) 2 yielding a computationally efficient solution.Using our bi-dimensional state description, we build a discrete time Markov Chain embedded over continuous time at the time instants in which both senders can (potentially) start transmitting the first packet of a new data exchange (either the RTS or the DATA packet), provided that their backoff counter is equal to zero.
We use the same channel view as depicted in Figure 13, but consider only time epochs at which both transmitters can attempt a new transmission.We assume that the backoff counter of a station is geometrically distributed, instead of uniformly distributed, over the current window.
By doing so, we can exploit the memoryless property of the geometric distribution and avoid explicitly incorporating in the state description the remaining number of backoff slots of each station.
Our simulations indicate that this approximation does not compromise the model's accuracy.
The parameter γi of the geometric distribution that characterizes the backoff counter at stage i (0 ≤ i ≤ m) is given by γi = 2W i −1, where Wi is the window size of backoff stage i. Consequently, at each time epoch a station in stage i attempts a new transmission with probability γi.
We consider the behavior of the two flows in Scenario 8 (or equivalently, Scenario 9).
The key point to analyze the system dynamics is the computation of the (conditional) packet collision probability p.
We observe that sender A (for example) does not know if sender B has started accessing the channel until a packet sent by B has been fully received at b, triggering the transmission of a CTS or ACK that can be immediately sensed by A.
This leads to the following typical situation: sender A starts transmitting a new packet, but before it is fully received by a, sender B also starts transmitting a packet, resulting in a collision at the receivers in which both packet are destroyed.
A transmission from sender A is successful only if sender B does not attempt to transmit in all transmission opportunities that occur during the duration of the first packet (either the RTS or the DATA packet) sent by A.
The number of such transmission opportunities is given by the duration of the first packet (RTS or DATA) expressed in the number of backoff slots, and denoted by f .
The (conditional) successful probability of sender A in state (i, j) is then given by (1−γj ) f (recall that j is the backoff stage of sender B, and γj the corresponding transmission probability).
from state to state probability i , j i , j Table 3: Transition probabilities of the Markov Model.
(1 − γi)(1 − γj) i , j 0 , j γi (1 − γj) f i , j i , 0 (1 − γi) f γj i , j (i + 1) mod m , (j + 1) mod m otherwiseThe transition probabilities stemming from the generic state (i, j) are summarized in Table 3.
The first row of the table is the self transition corresponding to the case in which both flows do not start transmitting a new packet.
The second and third rows refer to successful transmissions from sender A or B, respectively.
Notice that in this case the backoff stage of the station successfully transmitting is reset to the initial value (stage 0).
Finally, the last row corresponds to a collision event for both flows, with the consequent increase of the backoff stage -if the backoff stage reaches the maximum retransmission limit, it is reset to 0, which explains the modulus operator.
By numerically solving the Markov Chain, which is ergodic for any choice of parameters, we obtain the stationary distribution π = {πi,j}, ∀i, j.
An example of such a distribution is reported in Fig- ure 20, obtained using the set of parameters in Table 4.4 and considering the RTS/CTS access mechanism.
The plot clearly suggests a bi-stable behavior, in which the most likely states are those in which one flow maintains a small value of window size (thus obtaining high throughput), while the other falls into deeper and deeper backoff stages (thus obtaining low throughput).
Only when the poor flow reaches the maximum retransmission limit, it resets its window and competes equally with the rich flow.
Long-term performance metrics can be obtained directly form the solution of the Markov Chain.
From renewal-reward theory, the throughput of either flow is given byT = P i,j πi,j γi (1 − γj) f ∆ ,where ∆ is the average duration of a step.
The duration of a successful transmission is equal to Ts, as defined in Section 4.
The idle slot is σ, while a collision has an approximate average duration of Tc + σ f /2, assuming that the colliding packet starts on average in the middle of the packet that is transmitted first.
∆ is computed as the average of the duration of all possible events in all states, weighted by their respective probabilities.
The average conditional collision probability p for each flow can be computed asp = P i,j πi,j Pc(i, j) P i,j πi,j [Pc(i, j) + γi (1 − γj) f ] ,where Pc(i, j) is the collision probability at state (i, j) (fourth row of Table 3).
As SIS scenarios are long-term fair, we are most interested in evaluating the short-term unfairness of these cases.
In particular, it would be desirable to have an indication of the average amount of time during which one flow experiences poor throughput while the other gets most of the available channel capacity.
To this purpose, we consider the system states (m, 0) and (0, m), where one flow has reached the last backoff stage, while the other is at stage 0.
These two states are expected to be reached in the two symmetric conditions in which one flow strongly dominates over the other.
The average amount of time necessary to transition from one of these states to the other provides a good estimate of the duration for the system to switch from one equilibrium point to the other, i.e., the system's time-scale of unfairness.To compute this, we exploit the symmetry of our system, and reduce the problem to finding the average time necessary to reenter one of the above states (for example (m, 0)) after having left it.
To simplify notation, let i be state (m, 0).
We proceed as follows.
First, we remove all self-transitions of state i, since we want to consider re-entries to this state only after a change of state.
To do so, transitions leaving state i are renormalized to sum up to one.
3 The time actually spent in state i in between two successive visits to this state will be considered separately at the end of the computation.After applying this modification to the transition probabilities, we recompute the stationary distribution of the model obtaining a different state vector π .
From the renewal-reward theorem applied to cycles defined by visits to state i, we know that the average number of visits to state j between returns to state i is given by E(Vij) = π j /π i .
Moreover, the average number of transitions of type j → k between returns to state i is given by [21] E(V ijk ) = π j p jk /π i , ∀i, j, k.(18)Using this result, we can compute the average time to return to state i after leaving it by summing all durations associated with transitions j → k, weighted by their expected average number of occurrences given by Equation (18).
Finally, we add the average time spent in state i before leaving it, which was initially removed.
This can be easily done by considering that the average number of steps spent in a state is geometrically distributed, with parameter equal to the exit probability from the state.
In this section we validate the analytical model of the behavior of the two flows in Figure 11(a) and investigate several properties of this scenario with a focus on short-term unfairness.
Our results are summarized in Table 4, in which we compare analytical predictions with ns simulations in four different cases: (C1) RTS/CTS access, m = 6, CWmax = 1024; (C2) RTS/CTS access, m = 8, CWmax = ∞; (C3) basic access, m = 3, CWmax = 1024; (C4) basic access, m = 6, CWmax = 1024.
Case C1 corresponds to the default parameters of 802.11 when RTS/CTS is used, having the maximum retransmission limit equal to 7, the Short Retry Limit.
Case C2 also employs RTS/CTS, but increases the maximum retransmission limit to 9 and does not bound the maximum window size.
Case C3 corresponds to the default parameters of 802.11 with basic access, having maximum retransmission limit 4, and the Long Retry Limit.
Case C4 differs from C3 in that the maximum retransmission limit is set to 7, the Short Retry Limit.We compare both long-term performance metrics (average throughput and collision probability) and our characterization of the shortterm unfairness by means of the average time ∆t to transition from state (m, 0) to (0, m).
This latter quantity is computed analytically using the approach described above and has also been measured in simulation via inspection of the backoff stage of the two flows.
The last column of Table 4 reports the per-flow throughput (in pkts/s) achieved in each case when senders are connected (SC).
In addition to the excellent agreement between analysis and simulations in all cases, we make the following observations.
All configurations achieve similar throughput (around 220 pkt/s) except case C3, for which we observe a severe penalty (62%) mainly due to the large packet loss probability combined with the small retransmission limit, which leads to many packets being dropped by the MAC.
In the other cases the throughput loss with respect to the case in which senders are connected is not significant using RTS/CTS (around 10%, cases C1 and C2), while it is important in case C4, in which basic access is employed (34%).
The maximum throughput is achieved in case C2, where we have increased both the maximum number of retransmissions and the maximum window size with respect to standard values.
The small gain in throughput comes at the expense of a severe short term unfairness, as the average transition time from one equilibrium point to the other approaches 1 second.
This confirms the significant impact of m on the time-scales of short-term unfairness.Surprisingly, the basic/access mechanism with m = 6 achieves the smallest value of ∆t while obtaining a throughput comparable to that obtained using the RTS/CTS mechanism.
This is remarkable, as the RTS/CTS mechanism was actually proposed to overcome the hidden terminal problem in infrastructure mode (see ure 11(b)).
Unfortunately, it leads to further short-term unfairness than that obtained when the basic access mechanism is used.As a further validations of our conclusions, we present in Figure 21 simulation results showing the average number of packets successfully sent by one of the two flows every 100 ms, in the window [50s − 60s], for each of the four cases.
We also show the average number of packets obtained when senders are connected, for comparison.
We observe that the throughput oscillates dramatically in the cases having a large value of ∆t, enduring prolonged intervals in which the achieved rate is either very high or very low.
Problematic Topologies.
Variants of some of the scenarios we investigated are known to incur poor performance.
Among them are the classic hidden terminal and exposed terminal problems examined in [2,12,18].
Likewise, AIS scenarios are described in [2,3,11,12,20].
Yet no prior studies comprehensively analyze all scenarios within a single analytical framework nor predict scenario likelihood in a random graph.Modeling Throughput.
The fully connected topology and Senders Connected (SC) group can be accurately modeled using [4] and hence we do not consider them here.
In contrast, we model topologies in which senders are disconnected, which leads us to develop new modeling techniques for both the AIS and SIS groups.In [15,16], a queuing analysis of Scenario 11 in Figure 1 is developed under (unrealistic) assumptions that (i) the time between retransmissions (i.e. the backoff delay) is negligible, and (ii) the maximum number of retransmissions allowed for each packet is unlimited.
Consequently, the model matches simulations well only under light traffic conditions and with very large packets transmitted at low data rate.
In contrast, our analysis incorporates all details of 802.11 DCF, applies to both saturated and non-saturated conditions, incorporates variable packet sizes, and shows the significant impact of the maximum retransmission limit and access method (two-or four-way handshake).
In [10] the authors present a throughput analysis that incorporates topology dependent relations, and report preliminary results for the ring topology neglecting the impact of the binary exponential backoff.Modeling Short-Term Unfairness.
While a number of studies have analyzed short-term unfairness due to various aspects of the wireless medium ranging from channel errors to contention, (see [1,5,6] for example), none accurately characterize the time scale in which 802.11 stations alternate domination in SIS scenarios.
In particular, in our analysis of the SIS group, we model short-term unfairness of IEEE 802.11 with and without RTS/CTS, derive the behavior of the flows from the collision probability, analyze the transient behavior of the system, and accurately predict the timescale of this unfairness as a function of key system parameters.Receiver Oriented Media Access.
A number of receiver-based access mechanisms, in which channel contention is initiated by the receiver, not the sender, have been proposed to improve fairness and performance in various scenarios [2,8,19].
The Request-forRequest-to-Send (RRTS) solution is an example receiver-oriented mechanism originally proposed in MACAW [2]: whenever a station receives an RTS to which it cannot respond (due to deferral), it contends during the next contention period on behalf of the sender, reserving the channel by means of an additional control packet called RRTS.
The RRTS message solicits the sender to immediately send a new RTS.
Time (s) We have investigated the effectiveness of this solution in both the AIS and SIS group, implementing the RRTS packet exchange in the ns simulator.
We have found that this solution has a fundamental limitation in the fact that it requires the receiver of a flow to correctly decode the RTS packet sent by the sender.
Unfortunately, this occurs extremely rarely when a transmission attempt is not successful.
Consider the scenarios of the AIS group: the RTS packet sent by A typically arrives at a during a transmission of flow B, or it is destroyed by a new packet sent by B before it is fully received by a. Simulation results confirm that the RRTS mechanism does not help in the scenarios of the AIS group.In the SIS group, the RRTS mechanism is also not useful in scenarios 8 and 9, because during a collision event both RTS packets are destroyed at the receivers.
The only exception is scenario 10: in this case, the two flows are connected only through the receivers; the receiver of a flow is not in range of the transmitter of the other flow, and correctly receives the RTS sent by the sender.
This scenario leads to short-term unfairness, and can be analyzed in a similar way as described in Section 5.
Figure 22 shows that the RRTS mechanism partially mitigates the observed unfairness.
Notice that the occurrence probability of Scenario 10 is only about 10%, as reported in Figure 5.
We have systematically and comprehensively investigated the foundational scenarios of multi-hop wireless networks.
We identified all possible topologies consisting of four nodes and two flows, classified them into three geometric groups, and computed their likelihood under random node placement.
In each case, we showed how fundamental properties of two-and four-way handshake CSMA protocols yield short-term unfairness in one group, and long-term unfairness in another.
Because these problematic scenarios are highly likely to occur in a random graph, we developed an analytical model that can accurately predict the performance in each of these scenarios.
For example, we are able to precisely predict each flow's throughput in scenarios with long-term unfairness and the time scale that flows alternate domination in scenarios with shortterm unfairness.
