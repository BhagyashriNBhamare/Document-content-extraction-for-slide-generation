We present the first polynomial-time approximation algorithms for single-minded envy-free profit-maximization problems [13] with limited supply.
Our algorithms return a pricing scheme and a subset of customers that are designated the winners, which satisfy the envy-freeness constraint , whereas in our analyses, we compare the profit of our solution against the optimal value of the corresponding social-welfare-maximization (SWM) problem of finding a winner-set with maximum total value.
Our algorithms take any LP-based α-approximation algorithm for the corresponding SWM problem as input and return a solution that achieves profit at least OPT /O(α · log u max), where OPT is the optimal value of the SWM problem, and u max is the maximum supply of an item.
This immediately yields approximation guarantees of O(√ m log u max) for the general single-minded envy-free problem; and O(log u max) for the tollbooth and highway problems [13], and the graph-vertex pricing problem [3] (α = O(1) for all the corresponding SWM problems).
Since OPT is an upper bound on the maximum profit achievable by any solution (i.e., irrespective of whether the solution satisfies the envy-freeness constraint), our results directly carry over to the non-envy-free versions of these problems too.
Our result also thus (constructively) establishes an upper bound of O(α · log u max) on the ratio of (i) the optimum value of the profit-maximization problem and OPT ; and (ii) the optimum profit achievable with and without the constraint of envy-freeness.
Profit (or revenue) maximization is a classic and fundamental economic goal, and the design of computationally efficient algorithms and mechanisms for various pric- * Dept. of ORIE, Cornell University, Ithaca, NY 14853, USA.
Work done while the author was at the University of Waterloo.
Supported in part by NSERC grant 32760-06 and NSF grant CCR-0635121.
† Dept. of Combinatorics and Optimization, Univ. of Waterloo, Waterloo, ON N2L 3G1.
Supported in part by NSERC grant 32760-06.
ing problems has received much recent attention [1,12,13,3,2,5,4].
We study the algorithmic problem of envyfree profit-maximization for single-minded customers in the limited-supply setting, which we refer to as the (general) single-minded envy-free problem (SMEFP).
We are given m items, each of which is available in limited supply, and n customers, each of which has a certain (nonnegative) value for a single subset of items that she desires.
We need to determine prices for each item and a subset of customers, designated the winners, who can afford to buy their subset (the price of a subset is the total price of the items in it), and are allocated their sets, that satisfy two feasibility conditions: (i) capacity constraints, which require that the number of winners that are allocated an item be at most the supply of that item; and (ii) envy-freeness constraints, which stipulate that every customer for which the value of her desired set is strictly greater than the price of the set is allocated her set.
The objective is to maximize the total profit obtained by selling the items to the winners.
This problem was introduced by Guruswami et al. [13].
In the nonenvy-free version of the problem, which we refer to simply as the profit-maximization problem, the goal is to find a pricing-scheme and a winner-set (of customers who can afford to buy their subsets) that satisfies (only) the capacity constraints and maximizes the seller-profit.
An envy-free solution satisfies a natural fairness criterion: it ensures that every customer is maximally satisfied with her allocation given the pricing-scheme.
This is especially relevant in limited-supply settings (as noted in [13]), where the seller may want to discriminate between customers in order to satisfy the capacity constraints and maximize profit; envy-freeness ensures that the seller does not display any such bias, thereby avoiding discontent among customers.
Notice that an envy-free solution may be viewed as a stable or "equilibrium" outcome for the customers, in that no customer has an incentive to dispute the allocation (given the pricing).
Not surprisingly, in the economics literature, the notion of envy-freeness has been used to model fair equilibrium pricing in various settings; Walras [21] is a classical reference.
The envy-free problem also plays a role in providing a metric for comparison of profit-maximizing truthful mechanisms, where the profit is often compared to the profit of an optimal envy-free solution [12,2].
Guruswami et al. also introduced two structured cases of general SMEFP: (a) the tollbooth problem where the items are edges of a graph and the customer-sets correspond to paths in this graph, which can be interpreted as the problem of pricing transportation links or network connections.
(b) a further special case called the highway problem where the graph is a path, which one can motivate also from a scheduling perspective.
The path corresponds to a time-interval during which a machine is available, and one needs to price the time-units (edges) so as to maximize the profit obtained by scheduling jobs; each job (customer) can only be processed in a specific time interval, and if scheduled, it must pay for this time interval.
Even the highway problem is NP-hard, so we will be interested in designing approximation algorithms for these problems.
Throughout, we use the term ρ-approximation algorithm for a maximization problem, where ρ ≥ 1, to denote a polynomial time algorithm that returns a solution of value at least (optimum value)/ρ.Our results.
We present the first (polynomial time) approximation algorithms for envy-free profit maximization problems with limited supply and single-minded customers.
Our main result, stated informally below, is that one can exploit any LP-based approximation algorithm for the corresponding social-welfare-maximization (SWM) problem of finding a maximum-value subset of winners satisfying the capacity constraints, to obtain an approximation guarantee for the envy-free problem.
Let u max = max item-supply.
Informal Main Theorem Given an α-approximation algorithm for the corresponding SWM problem whose approximation ratio is with respect to the "natural" LP-relaxation of the problem, one can obtain an envy-free solution with profit at least OPT /O(α · log u max ), OPT being the optimum value of the SWM problem.These yield the first (non-trivial) approximation algorithms, even for various special cases of SMEFP, as we mention below.
We point out that the O(log u max )-factor above is unavoidable: a well-known example with a single item shows a gap of umax i=1 1 i = Θ(log u max ) between the optimum of the SWM and envy-free problems.Since the upper bound that we use to compare the quality of our solution is also an upper bound for the corresponding non-envy-free profit-maximization problem, (that is, where envy-freeness is not a constraint), an immediate corollary of our theorem is that we obtain identical guarantees for the non-envy-free profit-maximization problem with limited supply and single-minded customers.
To the best of our knowledge, the results that we thus obtain (as corollaries) for the profit-maximization problem with limited-supply and single-minded customers are new.
(For some of the non-envy-free problems, one can obtain certain guarantees via a reduction in [2] showing that an α-approximation for the SWM problem and an algorithm for the unlimited-supply problem that returns profit at least (SWM-optimum)/β yield an αβ-approximation.)
A key notable feature of our theorem is its generality.
One can simply "plug in" various known (or easily derivable) results about the SWM problem to obtain approximation algorithms for various limited-supply single-minded (envy-free and nonenvy-free) profit-maximization problems.
Theorem 1.1 We obtain the following approximation guarantees for various single-minded envy-free (and non-envyfree) limited-supply profit-maximization problems (u max = max item-supply, m = no.
of items):(i) O( √ m log u max ) for the general single-minded problem: α = O( √ m) [19,17]; (ii) O(log u max ) for: the highway problem (α = 1); the tollbooth problem on trees (α ≤ 4 [7]); the graphvertex pricing problem introduced by [3] (α ≤ 2: this follows from Lemma 3.11 in [16]).
Part (i) of Theorem 1.1 answers positively one of the main open questions in Guruswami et al. [13], of whether there exists a sublinear factor polynomial time approximation algorithm for the single-parameter limited-supply case.
For general SMEFP, our approximation guarantee is close to the best possible since a simple reduction from the setpacking or independent-set problem shows that approximating general SMEFP within a factor better than m 1 2 or n is NP-hard even when u max = 1 [14].
Previously, for general SMEFP, and even for special cases such as the highway problem, the only known guarantees were either poly-time logarithmic guarantees (in m and/or n) for the unlimited-supply setting [13,3,5,4], quasipolynomial and pseudopolynomial algorithms, or approximation schemes for restricted instances [13,15,5,14].
Our main theorem has two interesting consequences.
First, the theorem establishes a concrete, explicit connection between the approximability of the (limited-supply) envy-free profit-maximization problem and that of the SWM problem.
(We remark that many approximation algorithms for profit-maximization problems [13,3,5,4,10] obtain logarithmic performance guarantees by comparing their profit against the optimum of the SWM problem.)
Second, as a corollary of our results, we obtain that the worst-case ratio between the profit achievable by a non-envy-free solution and an envy-free solution is O(α · log u max ), where α is now the integrality gap of the LP-relaxation of the SWM problem.
(An analogous ratio is often investigated in scheduling, where one seeks to know the extent by which preemption can improve the value of an optimal schedule.)
We call this ratio the price of envy-freeness and it quantifies the loss faced by the seller to ensure envy-freeness (so as to avoid discontent among customers and provide some kind of fairness guarantee).
In Section 5, we extend our main theorem to allow for (a) disjoint k-minded customers, where a customer may desire k disjoint subsets and may be allotted multiple such subsets; and (b) customer-multisets, where a customer may desire multiple copies of an item.Our techniques.
We give a high-level overview of the ideas behind our algorithms and analyses.
We use the terms supply and capacity interchangeably.
First, we note that the common technique of setting a common price for all items, which has been frequently used to obtain algorithms for various non-envy-free and/or unlimited-supply profitmaximization problems [13,10,9,4] fails quite badly in the limited-supply envy-free setting.
(For example, suppose there are m items in unit supply, m+2 customers.
Each customer i = 1, . . . , m wants item e i and has value A − 1; customers m + 1, m + 2 want item e 1 and have value A. Any envy-free single-price scheme must charge price p ≥ A and earn profit at most A, whereas the optimal profit is m(A − 1) + 1.)
Thus, one needs to devise new techniques to attack the limited-supply envy-free problem.
Our algorithms and analyses are based on a novel use of linearprogramming tools, especially duality theory, and do (indeed) charge different prices for different items.
They may shed some light about how to exploit price-differentiation for profit-maximization (an issue mentioned in [13,4]).
Given a single-minded envy-free problem with supplyvector (u e ), sets {S i }, valuations {v i }, our starting point is a natural LP-relaxation, (P), for the corresponding SWM problem: we have a variable x i for each customer i denoting if i is chosen as a winner, and a capacity constraint (1) for each item e.max i v i x i (P) s.t. i:e∈Si x i ≤ u e for all e (1) 0 ≤ x i ≤ 1 for all i.(2)It is not clear how (P) might help in determining envy-free (or even non-envy-free) prices for our problem, especially given that this LP does not even have any price-variables!
The key insight underlying our algorithms is that the dual LP (D) can be used to furnish the prices.
In the dual program, y e and z i are the dual variables corresponding to (1) and (2) respectively.min e u e y e + i z i (D) s.t. e∈Si y e + z i ≥ v i for all i y e , z i ≥ 0 for all e, i.The crucial observation is that in an optimal dual solution (y * , z * ), the y * e -values yield item prices that satisfy envyfreeness with respect to the optimal primal (fractional) allocation x * .
By this we mean that, due to the complementary slackness (CS) conditions, (i) if i is a fractional winner, i.e.,x * i > 0, then e∈Si y * e ≤ v i ; and (ii) if x * i < 1 then e∈Si y * e ≥ v i .
In particular, this implies that if x * is integral, then the prices {y * e } and the winner-set {i : x * i = 1} constitute a feasible solution to the envy-free problem; the profit achieved is e u e y * e (again using the CS conditions).
There are two impediments to turning the above observation into an approximation algorithm.
First, an optimal solution to (P) need not of course be integral.
Second, the profit achieved using prices {y * e }, even by a fractional optimal solution, i.e., e u e y * e , could be quite small (in particular, it could be 0!)
compared to the optimum profit, and hence, the optimum value OPT of the above LPs.
We take care of the first difficulty via an interesting rounding procedure.
Given an α-approximation algorithm for the SWM problem, we use the convex-decomposition theorems of [6,18] to obtain a random winner-set W such that {i :x * i = 1} ⊆ W ⊆ {i : x *i > 0} with probability 1, and where the expected number of winners whose sets contain an element e is at least u e /α.
Using the CS conditions, this shows that the prices {y * e } along with W is a feasible solution to the envy-free problem achieving expected profit at least e u e y * e /α.
Handling the second obstacle requires more work.
We use the oft-used idea of lowering capacities to increase the profit.
Our algorithms choose an appropriate supply-vector (see below) and compute the optimal primal and dual solutions for this vector; the optimal dual y e -values yield the prices, and the winner-set is obtained by rounding the primal solution (as above).
The bulk of the analysis (which is also the basis of the algorithm) is devoted to proving that there exists some vector u ≤ u (which one can efficiently find) and an optimal dual solution (y , z ) for u such that e u e y e = OPT /O(log u max ); thus, the profit we achieve is OPT O(α·log umax) .
The proof requires establishing various properties about the optimum-value OPT , viewed as a multivariable function of the capacities.
In particular, we need to define and analyze the breakpoints of OPT (.)
, which is a piecewise-linear concave function, along different directions to prove this statement.Related work.
The envy-free profit-maximization problem with arbitrary valuations was introduced by Guruswami et al. [13], who then proceeded to study two important classes of valuations/customers: single-minded customers, and unit-demand customers.
They obtained an O(log n)-approximation algorithm for the unit-demand problem with limited-supply, and an O(log m + log n)-approximation algorithm for the unlimited-supply singleminded problem.
The latter result was extended to an O(log m + log n)-approximation for arbitrary valuations and unlimited-supply, by Balcan et al. [4].
Guruswami et al. also introduced the tollbooth and highway problems as special cases of the single-minded envy-free profit-maximization problem.To the best of our knowledge, no (polynomial-time) approximation results are known for the general SMEFP, or its special cases, the tollbooth and highway problems.
In fact, other than the approximation result of [13] for the envy-free problem with unit-demand customers, we are aware of only a few (poly-time) approximation results for limited-supply profit-maximization problems in general, and these few results [10,9,4] are for non-envyfree profit-maximization problems.
Dobzinski, Nisan and Schapira [10], Dobzinski [9] obtain results for combinatorial auctions (where one has unit supply).
Balcan, Blum and Mansour [4] consider the arbitrary-supply setting, and obtain an 2 O( √ log n log log n) -approximation for subadditive valuations and an O(log m + log n)-approximation for a class they call simple submodular valuations.We now discuss previous work on the general singleminded problem and the special cases considered in Theorem 1.1.
The existing results either pertain to the unlimitedsupply problem or yield non-polynomial-time algorithms for the non-envy-free version of the limited-supply problem, and fall into two categories: (a) approximation algorithms with logarithmic guarantees; and (b) quasipolynomial and pseudopolynomial algorithms, and exact algorithms or approximation schemes for restricted instances.For the general single-minded problem with unlimited supply, the O(log m + log n)-approximation guarantee of Guruswami et al. [13] was improved to an O(log B +log )-approximation ratio by Briest and Krysta [5], where B is the maximum number of set containing an item and is the maximum size of a set.
(Note that our result yields an O(log B)-approximation guarantee, since α = 1 for the unlimited-supply problem.)
Balcan and Blum [3] gave an O()-approximation algorithm, which leads to a 4-approximation algorithm for the graph-vertex pricing problem.
They also gave an O(log m)-approximation for the unlimited-supply highway problem, which improves upon the guarantee of [13] and is incomparable to the guarantee of [5].
Hartline and Koltun [15] gave an FPTAS for the unlimited-supply general single-minded problem with a bounded number of items.
For the unlimited-supply highway problem, Guruswami et al. [13] designed dynamicprogramming based quasi-and pseudo-polynomial exact algorithms when the maximum interval-length or maximum valuation is bounded; these algorithms may be extended to the limited-supply setting.
Balcan and Blum [3] and independently Briest and Krysta [5] gave an FPTAS for the problem when the customer-paths form a laminar family (such an instance also captures an instance of the general problem with a laminar customer-subset family).
For the limited-supply highway problem, Grigoriev et al. [14] obtained an FPTAS under the assumption that the maximum supply is bounded, and recently Elbassioni et al. [11] devised a quasi-PTAS.
It is not clear if the rounding ideas in such schemes can be applied to the envy-free problem since envy-freeness imposes both upper-bound (for winners) and lower-bound (for losers) constraints on the price of a customer-subset, so rounding may not preserve the feasibility and profit of the solution.
For the tollbooth problem on trees, [13] gave a poly-time algorithm for the unlimitedsupply problem for the case where all paths share a common endpoint; this extends to a quasipolynomial algorithm with limited supply.
On the other extreme, [14] obtained a poly-time algorithm for the unit-supply problem.We now survey the known hardness results for these problems.
For the general limited-supply single-minded problem, it is relatively easy to show via a reduction from the set-packing problem that achieving an approximation factor better than m 1 2 , or n, is NP-hard even when u max = 1.
This was first noted by Grigoriev et al. [14], who proved that the tollbooth problem cannot be approximated better than a factor of n even on grid graphs with u max = 1.
Guruswami et al. [13] showed that the unlimited-supply tollbooth problem is NP-hard even on a star where all valuations are 1 and all customer-sets have size at most 2.
Briest and Krysta [5] showed that the unlimited-supply highway problem is NP-hard even when the customer-subpaths form a laminar family.
For the general unlimited-supply problem, Demaine et al. [8] proved a log σ() m-inapproximability result assuming NP ⊆ BPTIME (2 m ), and a log 1 3 − minapproximability for any > 0, assuming that refuting random-3SAT formulae is hard on average.
The single-minded envy-free pricing problem.
The input to the single-minded envy-free pricing (SMEFP) problem consists of m items that are for sale, and n customers.
Each customer i desires a single subset S i of items (hence the term single-minded) and has a valuation v i that represents the maximum amount the customer is willing to pay for S i .
(Note that the customer desires the entire set S i , and not portions of it.)
Each item is available in limited supply.
We let u e denote the number of copies available (i.e., the supply or capacity) of item e, so item e may be given to at most u e customers.
A solution to SMEFP consists of a pricing scheme, that is, nonnegative prices p e ≥ 0 for the items, and a subset W ⊆ {i : e∈Si p e ≤ v i } of the customers called "winners" who can afford to buy their sets and are allotted their sets, satisfying • Capacity constraints.
Every edge e is allocated to at most u e winners: |{i ∈ W : e ∈ S i }| ≤ u e .
• Envy-freeness.
For every customer i / ∈ W , we must have e∈Si p e ≥ v i .
So the winner-set W should satisfy {i :e∈Si p e < v i } ⊆ W ⊆ {i : e∈Si p e ≤ v i }.
In other words, every customer who obtains a positive utility by paying for her set (utility = valuation − total price) is a winner.Notice that a customer i with e∈Si p e = v i may or may not be chosen as a winner (her utility is 0 in either case).
The goal is to compute a solution that maximizes the profit of the seller, which is given by i∈W e∈Si p e = e p e |{i ∈ W : e ∈ S i }|.
We will also be interested in the following special cases.
(a) the tollbooth problem: the items are edges of a graph G, and each customer i's set S i is a path of G; and (b) the highway problem: a special case of the tollbooth problem, where the graph G is a path.
In Section 3, we consider the highway problem with uniform capacities and give an approximation algorithm that showcases many of the ideas underlying our algorithm and analysis for general SMEFP.
We also consider the non-envyfree versions of the above problems, which we refer to simply as the profit-maximization problem.
Here the objective is to find item prices {p e ≥ 0}, and a winner-set W ⊆ {i : e∈Si p e ≤ v i } satisfying the capacity conditions that maximizes the seller profit, i∈W e∈Si p e .
Even the special case of the unlimited-supply highway problem where the sets S i form a laminar family, is NPhard.
So our goal will be to design approximation algorithms for these various envy-free pricing problems.
In all our algorithms, the approximation guarantee is proved by comparing the profit obtained against an upper bound, which is the maximum total value achievable by a winnerset that satisfies the capacity constraints.
The problem of finding a winner-set with maximum total value is often called the social-welfare maximization (SWM) problem in the mechanism-design literature.
One can formulate this problem as an integer program and relax the integrality constraints to obtain the linear program (P) (given in "Our techniques", Section 1).
Our algorithms and analyses also crucially use the dual of (P), which is given by the LP (D).
We use O * (I) and OPT (I) to denote respectively, the value of the optimum profit attainable for instance I, and the common optimum value of (P) and (D) for instance I; we drop I when the instance is clear from the context.
ClearlyO * (I) ≤ OPT (I): an optimal solution {p e }, Wto the highway problem yields an integer solution (i.e., x i ∈ {0, 1}) to (P), where we set x i = 1 if i ∈ W and 0 otherwise, of value i v i x i ≥ O * since the profit e∈Si p e earned from each winner i is at most v i .
Given an instance I, suppose we fix m, n and {(v i , S i )} i=1,...,n but let the capacities vary.
For a capacity-vector k = (k e ) ∈ R m , we use (P k ) and (D k ) to denote respectively (P) and (D) with item capacities {k e }.
Note that the feasible region of (D k ) does not depend on k.
We prove some useful properties about the function OPT (k), which denotes the common optimum value of (P k ) and (D k ).
Lemma 2.1 OPT (k) is a piecewise-linear concave function of k, i.e., for any two capacity-vectors k , k , λ ∈ [0, 1],we have OPT (λk + (1 − λ)k ) ≥ λOPT (k ) + (1 − λ)OPT (k ).
Further, OPT (.)
is linear on the line segment joining k and k iff there is a dual solution that is optimal for both (D k ) and (D k ).
Proof : Let k = λk + (1 − λ)k .
Let (y * , z * ) be an optimal solution to (D k ).
Then we have OPT (k ) ≤ e k e y * e + i z * i and OPT (k ) ≤ e k e y * e + i z * i from which it follows that OPT (k) = e k e y * e + i z * i ≥ λOPT (k ) + (1 − λ)OPT (k ).
If OPT (.)
is linear on the line segment joining k and k , then taking k = (k + k )/2 and (y * , z * ) to be an optimal solution to (D k ), the above argument implies that the bounds obtained on OPT (k ) and OPT (k ) by plugging in the value of (y * , z * ) must be exact.
So (y * , z * ) is an optimal solution to both (D k ) and (D k ).
Conversely, suppose (y * , z * ) is a common optimal solution to (D k ) and (D k ).
Plugging in the value of (y * , z * ) for any capacity-vector k = µk + (1 − µ)k , where µ ∈ [0, 1], gives OPT (k) ≤ µOPT (k )+(1−µ)OPT (k ).
But the concavity of OPT (.)
implies the opposite inequality, which means that the above inequality is in fact an equality.
We first consider the highway problem with uniform capacities (i.e., all the u e 's are equal) to illustrate many of the key ideas underlying our algorithms and analyses for the general single-minded envy-free pricing problem.
We prove a tight approximation guarantee of H U = Θ(log U ) by exploiting the special structure of (P) for this problem.
Here U is the uniform capacity and H k = 1 + 1 2 + · · · + 1 k .
For ease of exposition, we describe a pseudopolynomial time algorithm (Algorithm 1) that has running time polynomial in U .
By applying a standard scaling idea, we can convert this into an algorithm with approximation ratio H u (1 + ), for any > 0, whose running time is polynomial in the input size and 1 .
In Section 4, we build upon the ideas introduced here and extend our results to (the general) SMEFP to show that one can obtain an O α·log(max e u e ) -approximation guarantee for SMEFP given an LP-based α-approximation algorithm for the corresponding SWM problem.
(For the highway problem, as we note below, α = 1).
We use the terms items and edges, and customers and intervals interchangeably in this section.
For the highway problem, (P) corresponds to an interval-packing LP and it is well known that the constraint matrix of this LP is totally unimodular (TU), that is, every square submatrix has determinant 0 or ±1.
This has the useful consequence that there is always an integer optimal solution to (P) (assuming integer capacities); see, e.g., [20] for details on TU matrices.
Theorem 3.1 There is an efficiently-computable integer optimal solution to (P) (with integer capacities).
We show below that any integer optimal solution to (P) and any optimal solution to (D) can be used to obtain a feasible solution.
We overload notation and use (P k ) and (D k ) to denote respectively (P) and (D) with u e = k for all e; OPT (k) denotes their optimal value as before.Lemma 3.2 Let k ≤ U .
Let x * be an integer optimal solution to (P k ), and (y * , z * ) be an optimal solution to (D k = u e .
Lemma 3.2 implies that one can compute an optimal solution to the highway problem with unit capacities.
This follows because with unit capacities, constraints (2) become redundant, so we can get rid of them from (P), which has the effect of getting rid of the z i variables from the dual (D).
Equivalently, this means that there is always an optimal solution to (D) where z i = 0 for all i. By Lemma 3.2, the profit obtained by using such an optimal dual solution (y * , 0) to set the prices is e y * e = OPT (1).
With higher capacities, the main obstacle to proving an approximation guarantee is that it is no longer true that there exists an optimal dual solution with z * i = 0 for all i; hence, the profit e u e y * e earned by applying Lemma 3.2 could be much smaller than OPT (and even O * ) for every optimal dual solution (y * , z * ).
For example, suppose u e = 2 for all e.
There are m + 1 customers with S i = {e i } for i = 1, . . . , m, and S m+1 = E; the valuation of every customer is 1.
The unique optimal primal solution is to set x * i = 1 for all i, and thus, in any optimal dual solution we must have e y * e ≤ v m+1 = 1.
So e u e y * e ≤ 2, but the optimal profit is m achieved by setting a price of 1 for each edge.
This example shows that the simple approach of using the optimal y e values as the prices, which worked with unit-capacities, does not work with higher capacities.
In order to make this approach work, we need to combine it with another idea, namely, that one may be able to obtain higher profit by reducing the edge capacities.
Notice that in our example, if we reduce the capacity of each edge to 1, the new instance has an optimal dual solution where y e = 1 for every edge e (and z i = 0 for every i), and this gives an optimal solution to the highway problem.Let I be an instance of the highway problem with uniform edge capacities u e = U .
Our algorithm proceeds by considering U different capacitated instances, where instance k = 1, . . . , U is obtained from I by reducing the edge capacities to k.
We solve each of these instances to obtain a dual optimal solution satisfying certain properties, and among the U solutions so obtained we choose the dual solution (y, z) for which the prices {y e } yield the maximum profit.
The allocation is obtained by solving the corresponding primal problem.
The algorithm is described precisely below.
In the analysis, we prove (Lemma 3.3) that for every k, there exists a dual solution (y, z) that is simultaneously optimal for both (D k ) and(D k−1 ).
Let (y (k) , z (k) ) denote such an optimal dual solution to (D k ).
Algorithm 1 Given: an instance of the highway problem with edge capacities u e = U .1.
For k = 1, . . . , U , compute an optimal solution (y (k) , z (k) ) to (D k ) that is also optimal for (D k−1 ).
(The proof of Lemma 2.1 shows how to compute such a common optimal solution.)
2.
Select the index c ∈ {1, . . . , U } that maximizes e cy (c) e breaking ties arbitrarily.
Compute an optimal solution x (c) to (P c ).3.
Return y (c) as the pricing-scheme, and the winner-set W = {i : x (c) i = 1}.
To make the running time of Algorithm 1 polynomial, instead of considering all U values in steps 1 and 2, given > 0, we consider values separated by a multiplicative factor of (1 + ).
Let k 1 = 1, k 2 = k 1 (1 + ) and so on, setting k j+1 = k j (1 + ) until we reach such that k −1 (1 + ) ≥ U ; we set k = U .
We refer to this polynomial-time algorithm as the "polynomial-version of Algorithm 1".
The key combinatorial lemma that leads to the desired approximation guarantee is as follows.Lemma 3.3 For any k, there exists a common dual solution (y (k) , z (k) ) that is optimal for both (D k ) and (D k−1 ).
Observe that by Lemma 2.1, the above lemma is equivalent to the statement that OPT (.)
varies linearly between any two consecutive integers, or equivalently, that the breakpoints of this piecewise-linear concave function occur only at integers.
This (somewhat intriguing) property might be of independent interest.
The proof of Lemma 3.3 heavily exploits the total unimodularity of the constraint matrix of (P) and is omitted from this version.
Here we show how this lemma leads to the desired approximation guarantee.
We now build upon the ideas introduced in Section 3 and extend our results to the general single-minded envyfree pricing (SMEFP) problem.
The general problem gives rise to various distinct challenges that we need to overcome to prove an approximation guarantee.
We show that one can utilize any LP-based α-approximation algorithm for the corresponding SWM problem to obtain an O(α · log u max )-approximation guarantee for SMEFP.
(Recall that α = 1 for the highway problem.)
Our analysis in Section 3 relied heavily on the fact that the constraint matrix of (P) is TU for the highway problem.
This is no longer true for general SMEFP problems, so we need to devise alternate algorithm-design and analysis methods.
First, (P) may no longer have an integer optimum solution.
So, we need to (a) devise a rounding procedure; and (b) come up with some kind of an analog of Lemma 3.2, which showed that for the highway problem, given an optimal dual solution (y * , z * ), one can compute a winner-set that combined with prices {y * e } yields profit e u e y * e .
The main ingredient of our rounding procedure is a result of Carr and Vempala [6] (or rather, its refinement by [18]), which shows that given any primal feasible solution x, one can decompose x/α into a convex combination of integer primal solutions using an LP-based α-approximation algorithm as a black-box.
Lemma 4.2 analyzes the rounding procedure and provides a suitable analog of Lemma 3.2.
We show that given an optimal primal solution x * and an optimal dual solution (y * , z * ), our rounding procedure returns a (random) winner-set that combined with the price-vector y * yields a feasible solution earning profit at least 1 α e u e y * e .
The second place where we crucially use total unimodularity in Section 3 is in the proof of Lemma 3.3, which shows that with uniform capacities, the optimal-value function OPT (.)
only has integer breakpoints.
This allowed us to argue that the profit earned by using prices {y(k) e } is k OPT (k) − OPT (k − 1)(which then leads to the H Uapproximation guarantee).
For general SMEFP problems, even with uniform capacities, OPT (.)
will not in general have this integer-breakpoint property; it could be that ev-ery optimal solution (y * , z * ) to (D k ) is such that e ky * e is much smaller than k OPT (k) − OPT (k − 1).
For uniform capacities u e = U , we work around this difficulty by obtaining a new bound for the maximum value of e ky * e achievable by an optimal solution (y * , z * ) to (D k ).
We then use a telescoping-sum argument similar to the one in the proof of Theorem 3.4 to prove that there is some k ≤ U and some optimal solution(y * , z * ) to (D k ) such that e ky * e ≥ OPT (U )/O(log U ).
Combined with the above rounding method, this yields an O(α · log U )-approximation algorithm (Theorem 4.4), given an LP-based α-approximation algorithm for the SWM problem.
For non-uniform capacities {u e }, we need to refine the second part of the analysis.
Let (P k ) and (D k ) now denote respectively (P) and (D) for a capacity-vector k = (k e ).
Let u max = max e u e .
As with uniform capacities, we first obtain an exact expression for the maximum value of e k e y * e achievable by any optimal solution (y * , z * ) to (D k ) (Lemma 4.5).
Combined with a more sophisticated telescoping-sum argument (Lemma 4.7), this will allow us to efficiently find a vector k ≤ u for which there exists an optimal solution (y * , z * ) to (D k ) such that e k e y * e ≥ OPT /O(log u max ), which then leads to an O(α · log u max ) approximation ratio.Uniform capacities.
We first consider the case of uniform capacities.
Let u e = U for all e.
As in Section 3, (P k ) and (D k ) denote (P) and (D) respectively with u e = k for all e.
We need the following result that follows from the work of Carr and Vempala [6], and was made explicit in [18], which we have adapted to our setting.
We say that an algorithm A is an LP-based α-approximation algorithm for the SWM problem if on every instance I, it returns an integer solutionˆxsolutionˆ solutionˆx such thati v i ˆ x i ≥ OPT (I)/α.Lemma 4.1 ( [6,18]) Let k = (k e ) be a capacity-vector.
Let x be a fractional solution to (P k ), and A be a polynomial time LP-based α-approximation algorithm for the SWM problem.
Then, in polynomial time, one can express x α as a convex combination of integer solutions to (P k ).
As in the polynomial version of Algorithm 1, we will consider capacity-values that are powers of (1 + ) rounded up.
Define k 1 = 1, k 2 = k 1 (1 + ), . . . , k = U exactly as in Section 3, where k j+1 = k j (1 + ) for j < and is the smallest index such that k −1 (1 + ) ≥ U .
Let 1 be the vector of all ones.Algorithm 2 Given: an instance of SMEFP with capacities u e = U , and an LP-based α-approximation algorithm for the corresponding SWM problem that works for arbitrary (i.e., not necessarily uniform) capacities.
(If α is a function α(.)
of the maximum capacity, take α := max k≤U α(k).)
1.
For each k = k 1 , . . . , k , compute an optimal solution (y (k) , z (k) ) to (D k ) that maximizes e ky * e among all optimal solutions (y * , z * ) to (D k ).
Such a solution can be computed by solving an LP.
2.
Select c ∈ {k 1 , . . . , k } that maximizes e cy (c)e .
Compute an optimal solution x (c) to (P c ).3.
Return y (c) as the pricing-scheme, and W ← Round(c1, x (c) ) as the (random) winner-set.
Round(µ = (µ e ), x * ): Define u e = µ e − |{i : x * i = 1, e ∈ S i }|.
Let (P u ) denote (P) with capacity-vector u .
Define x to be the following feasible solution to (P u ): set Proof : Define u = (u e ) and the fractional solution x that is feasible to (P u ) as in Round(k1, x * ).
Consider any integer solutionˆxsolutionˆ solutionˆx that is assigned non-zero weight in the convex decomposition.
Let W be the corresponding winner-set obtained fromˆxfromˆ fromˆx.
Sincê x is feasible to (P u ), the capacity constraints are clearly satisfied.
For any i ∈ W , we must have x * i > 0; so by complementary slackness and since z * i ≥ 0, we have that e∈Si y * e ≤ v i .
If i / ∈ W , it must be that x * i < 1 and this implies that z * i = 0; so we have that e∈Si y * e ≥ v i .
Thus, (y * , W ) is a feasible solution.
The probability that a customer i with x * i < 1 lies in W is exactly x * i /α.
So for any i, the probability that i ∈ W is at least x * i /α.
Thus, for any edge e with y * e > 0, the expected number of winners whose sets contain e is at least i:e∈Si x * i /α = k/α.
The equality is due to complementary slackness: if y * e > 0 then i:e∈Si x * i = u e .
Hence, the expected profit earned is at least e ky * e /α.
Given the above lemma, it suffices to show that the capacity-value c computed in step 2 of Algorithm 2 is such that e cyx i = x * i if x * i < 1,(c)e is "large" compared to OPT (U ).
To this end, we first obtain an expression for e ky(k)e , the maximum value of e ky * e achievable by an optimal solution (y * , z * ) to (D k ).
Define b k to be the smallest value in [0, k] such that OPT (.)
is linear in [b k , k].
So b k is the breakpoint of OPT (.)
just preceding k. Note that b k < k and b 1 = 0.
Lemma 4.3 For any k, e ky (k) e = k · OPT (k)−OPT (b k ) k−b k .
Proof : By Lemma 2.1 there is a solution (y, z) that is optimal to both (D k ) and (D b k ).
The RHS in the lemma equals e ky e ≤ e ky(k)e , and is also at least e ky(k) e .
We may assume without loss of generality that b k ≥ k − 1 since the RHS in the statement of Lemma 4.3 does not change if we replace b k by any a ∈ [b k , k).
So we use b k to mean max{b k , k − 1} from now on.
e .
By Lemma 4.2, the profit returned is at least P/α, so it suffices to show that P ≥ OPT (U )/ 2(1 + )H U ).
By Lemma 4.3, for each k = k 1 , . . . , k , we haveP · k−b k k ≥ OPT (k) − OPT (b k ).
Also, since OPT (.)
is a piecewiselinear function with decreasing slope (since it is concave), for every k = k j , j < with b kj+1 > k, we haveP/k ≥ OPT (k)−OPT (b k ) k−b k ≥ OPT (b k j+1 )−OPT (k) b k j+1 −k since b kj+1 ≥ k = k j (alternatively, note that the last term is at most e y (k) e ).
Equivalently, we have P · b k j+1 −k k ≥ OPT b kj+1 − OPT (k) (this is trivially true if b kj+1 = k).
For any j < , adding this inequality for k = k j and the earlier inequality for k = k j+1 , we obtain thatP · kj+1−b k j+1 kj+1 + b k j+1 −kj kj ≥ OPT (k j+1 ) − OPT (k j ).
Since k j+1 ≤ 2(1 + )k j , the coefficient of P in the above inequality is at most 2(1+) kj+1 t=kj +1 1 t .
So adding this last inequality for all j < , and the inequality P ≥ OPT (1) (recall that k 1 = 1) gives P · 2(1 + )H U ≥ OPT (U ).
Arbitrary (non-uniform) capacities.
The algorithm and analysis for arbitrary capacities follow the same basic outline as for uniform capacities.
We now use (P k ) and (D k ) to denote respectively (P) and (D) with edge capacities {k e }.
The algorithm again considers a certain number of capacity vectors k ≤ u, computes for each such vector, an optimal dual solution (y (k) , z (k) ) to (D k ) that maxi- mizes e k e y (k)e , and then chooses among these vectors the capacity-vector c that maximizes the sum e c e y(c)e .
The algorithm then returns y (c) as the price-vector, and the winner-set returned by Round(c, x (c) ) where x (c) is an optimal solution to (P c ).
We assume that u e ≥ 1 for all e; if not, we can split the instance into independent instances.
Algorithm 3 Given: an instance of SMEFP with capacityvector u and an LP-based α-approximation algorithm for the SWM problem.
(Again, if α is a function of the maximum capacity, then α := max k≤umax α(k).)
1.
Define k 1 , k 2 , . . . , k as the following capacity-vectors.
Letk 1 e = 1 for all e. For j > 1, let k j e = min (1 + )k j−1 e , u e, and let be the smallest index such that(1 + )k −1 e ≥ u e for all e (so k = u).
For each capacity-vector k = k j , j = 1, . . . , , compute an optimal solution (y (k) , z (k) ) to (D k ) that maximizes e k e y (k)e among all optimal solutions to (D k ).
Round(c, x (c) ) as the (random) winner-set.
Let u max = max e u e .
Lemma 4.2 easily generalizes to non-uniform capacities and shows that if x * is an optimal solution to (P k ), y * is an optimal solution to (D k ) with k ≤ u, and W ← Round(k, x * ), then (y * , W ) is always a feasible solution to SMEFP and achieves expected profit at least e k e y * e /α.
So the profit earned is at least e c e y(c)e /α.
The (rest of the) analysis is devoted to showing that the vector c computed in step 2 of the algorithm is such that e c e y (c) e ≥ OPT (u)/O(log u max ), which thus implies an O(α · log u max )-approximation ratio.
Due to the fact that we now have to deal with capacityvectors, it is harder to make the telescopic-sum argument in Theorem 4.4 work.
The function OPT (.)
is now a multivariable function, and we need to define and analyze the breakpoints of this function along specific directions.
Lemma 4.5 does this, and gives an expression for the maximum value of e k e y * e achievable by an optimal solution (y * , z * ) to (D k ).
Combining this with a more sophisticated telescoping-sum argument, we prove in Lemma 4.7 that e c e y (c) e ≥ OPT (u)/O(log u max ).
For a vector d ∈ R m ≥0 and capacity-vector k, define b k,d , the breakpoint of OPT (.)
before k along direction d, to be the smallest r ≥ 0, r ∈ max e (1 − ke de ), 1 such that OPT (.)
is linear on the line-segment joining k andk − d(1 − r).
For j > 1, define d j = k j − k j−1 .
Note that 0 ≤ d j e ≤ k j e for all e. Let e * be an item with u e * = u max .
Lemma 4.5 For any capacity-vector k and any vector d ∈R m ≥0 with d ≤ k, we have that ( e k e y (k) e ) · max e de ke ≥ OPT (k)−OPT (k−d(1−b k,d )) 1−b k,d, with equality when d = k.Proof : Consider some vector d ∈ R m ≥0 with d ≤ k. Let k = k − d(1 − b k,d ).
By the definition of b k,d and Lemma 2.1, there exists a common optimal solution (y, z)to (D k ) and (D k ).
So OPT (k)−OPT (k ) 1−b k,d = e d e y e ≤ max e de ke · e k e y e ≤ max e de ke · e k e y (k)e .
We alsohave that OPT (k)−OPT (k ) 1−b k,d ≥ e d e y (k)e .
So when d = k, this inequality coupled with the opposite inequality derived above gives the desired equality.Claim 4.6 We have d j e * /k j e * = max e (d j e /k j e ) and d j e * /k j−1 e * = max e (d j e /k j−1 e ) for any j > 1.
Lemma 4.7 The vector c computed in step 2 of Algorithm 3 satisfies e c e y(c) e ≥ OPT (u)/ 2(1 + )H umax .
Proof : Let P = e c e y · (1 − a) · d j+1 e * /k j+1 e * + a · d j+1 e * /k j e * ≥ OPT (k j+1 ) − OPT (k j ).
Since k j+1e * ≤ 2(1 + )k j e * , we can upper bound the coefficient of P in this inequality by 2(1+)· k j+1 e * t=k j e * +1 1 t .
Thus, adding the above inequality for all j < to the inequality P ≥ OPT (k 1 ) gives P · 2(1 + )H umax ≥ OPT (u).
Corollary 4.9 There is a 2α(1 + )H umax -approximation algorithm for the profit-maximization version of SMEFP, where u max = max e u e .
Disjoint k-minded customers.
This is a generalization of single-minded customers where a customer may desire multiple disjoint subsets.
A disjoint-k-minded customer i may desire k disjoint subsets of the items (k may be different for different customers), and specifies k tuples (S i,1 , v i,1 ), . . . , (S i,k , v i,k ), where the sets S i,j are pairwise disjoint.
The customer may be allotted any number of these subsets, and she receives the value v i,j for each set S i,j allotted to her (note that i receives value v i,j only if she is allotted the entire set S i,j ).
An envy-free solution consists of prices {p e } and a winner-set W that now specifies a set of tuples (i, j) indicating which subsets are allocated to each customer.
Each (i, j) ∈ W must be such that e∈Si,j p e ≤ v i,j .
Moreover, W must satisfy the capacity constraints, and the envy-freeness constraint that if (i, j) / ∈ W then e∈Si,j ≥ v i,j .
(In other words, each customer i is allotted only sets that she can afford, and every set S i,j for which e∈Si,j p e < v i,j .)
Notice that an additive valuation, that is, v i (S) = j∈S v i,j , can be represented as a disjoint-n-minded customer, with a tuple ({j}, v i,j ) for every item j.The algorithmic problem with disjoint-k-minded customers reduces to the single-minded problem: for every customer i and every tuple (S i,j , v i,j ), we create a singleminded customer (i, j) that desires the set S i,j and has valuation v i,j .
The envy-freeness condition for the resulting single-minded instance is exactly the same as the envyfreeness condition mentioned above.
Thus, all of our results, in particular, those mentioned in Theorem 1.1, extend to this more general setting.Customers desiring multiple copies of items.
Another generalization of single-minded customers is one where customers may desire multiple copies of items.
Thus, a customer i's set is now a multiset represented by a vector (c i e ) e specifying that she desires c i e ≥ 0 copies of each item e (and is satisfied only if she is allocated c i e copies of each item e).
Given item prices {p e }, the price that a customer i pays for her multiset (c i e ) e is e c i e p e , and this must be at most v i for a winning customer, and envy-freeness requires that this price be at least v i for a non-winner.
In the SWM problem, constraint (1) of the primal (P) changes to i c i e x i ≤ u e for every e, and accordingly the constraint in the dual (D) changes to e c i e y e + z i ≥ v i for all i. Note that we may assume that c i e ≤ u e for all i, e (this ensures that the integrality gap of (P) is bounded).
Given these changes, it is not hard to see that the analysis in Sections 3 and 4 extends to this setting, and thus we obtain the same guarantees (Theorems 1.1, 3.4, 4.4, 4.8) as for the single-minded case.Theorem 5.1 For the profit-maximization problem where each customer desires (up to) k disjoint multisets, one can use any LP-based α-approximation algorithm for the corresponding SWM problem to obtain an envy-free solution that attains profit at least OPT SWM /O(α · log u max ).
We thank András Sebö for his help with the proof of Lemma 3.3.
